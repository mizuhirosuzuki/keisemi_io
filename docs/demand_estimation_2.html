<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.280">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>【非公式】実証ビジネス・エコノミクス Juliaでの実装 - 3&nbsp; 需要モデルの推定（基礎編 2）</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./demand_estimation_merger.html" rel="next">
<link href="./demand_estimation_1.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script>
<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>


</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
    <div class="container-fluid d-flex justify-content-between">
      <h1 class="quarto-secondary-nav-title"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">需要モデルの推定（基礎編 2）</span></h1>
      <button type="button" class="quarto-btn-toggle btn" aria-label="Show secondary navigation">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">【非公式】実証ビジネス・エコノミクス Juliaでの実装</a> 
    </div>
      </div>
      <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
      </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">【非公式】実証ビジネス・エコノミクス Juliaでの実装</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./demand_estimation_1.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">需要モデルの推定（基礎編 1）</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./demand_estimation_2.html" class="sidebar-item-text sidebar-link active"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">需要モデルの推定（基礎編 2）</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./demand_estimation_merger.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">需要モデルの推定（応用編）</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./entry_exit_basic.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">参入ゲームの推定（基礎編）</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./entry_exit_application.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">参入ゲームの推定（応用編）</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./single_agent_dynamic_basic.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">シングルエージェント動学モデルの推定（基礎編）</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#section" id="toc-section" class="nav-link active" data-scroll-target="#section"><span class="toc-section-number">3.1</span>  4.1</a></li>
  <li><a href="#section-1" id="toc-section-1" class="nav-link" data-scroll-target="#section-1"><span class="toc-section-number">3.2</span>  5</a></li>
  <li><a href="#section-2" id="toc-section-2" class="nav-link" data-scroll-target="#section-2"><span class="toc-section-number">3.3</span>  6</a></li>
  <li><a href="#section-3" id="toc-section-3" class="nav-link" data-scroll-target="#section-3"><span class="toc-section-number">3.4</span>  6.1</a></li>
  <li><a href="#section-4" id="toc-section-4" class="nav-link" data-scroll-target="#section-4"><span class="toc-section-number">3.5</span>  7</a>
  <ul class="collapse">
  <li><a href="#step-1" id="toc-step-1" class="nav-link" data-scroll-target="#step-1"><span class="toc-section-number">3.5.1</span>  Step 1</a></li>
  <li><a href="#step-2" id="toc-step-2" class="nav-link" data-scroll-target="#step-2"><span class="toc-section-number">3.5.2</span>  Step 2</a></li>
  <li><a href="#step-3" id="toc-step-3" class="nav-link" data-scroll-target="#step-3"><span class="toc-section-number">3.5.3</span>  Step 3</a></li>
  <li><a href="#step-4" id="toc-step-4" class="nav-link" data-scroll-target="#step-4"><span class="toc-section-number">3.5.4</span>  Step 4</a></li>
  <li><a href="#step-5" id="toc-step-5" class="nav-link" data-scroll-target="#step-5"><span class="toc-section-number">3.5.5</span>  Step 5</a></li>
  </ul></li>
  <li><a href="#section-5" id="toc-section-5" class="nav-link" data-scroll-target="#section-5"><span class="toc-section-number">3.6</span>  8</a></li>
  <li><a href="#section-6" id="toc-section-6" class="nav-link" data-scroll-target="#section-6"><span class="toc-section-number">3.7</span>  9</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title d-none d-lg-block"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">需要モデルの推定（基礎編 2）</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<div class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">CSV</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">DataFrames</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">StringEncodings</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">FixedEffectModels</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">RegressionTables</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">Plots</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">LinearAlgebra</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">Statistics</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">Optim</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">Printf</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">ForwardDiff</span></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">Random</span></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">GLM</span></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">Serialization</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="2">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> CSV.<span class="fu">File</span>(</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">open</span>(read, <span class="st">"data/demand_estimation/CleanData_20180222.csv"</span>, enc<span class="st">"shift-jis"</span>),</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>    missingstring <span class="op">=</span> [<span class="st">"NA"</span>, <span class="st">""</span>],</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>    ) <span class="op">|&gt;</span> DataFrame</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="fu">first</span>(<span class="fu">select</span>(data, <span class="fu">Not</span>([<span class="op">:</span>base_color, <span class="op">:</span>option_color])), <span class="fl">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="3">

<div><div style="float: left;"><span>5×34 DataFrame</span></div><div style="clear: both;"></div></div><div class="data-frame" style="overflow-x: scroll;"><table class="data-frame table table-sm table-striped" style="margin-bottom: 6px;"><thead><tr class="header"><th class="rowNumber" style="font-weight: bold; text-align: right;">Row</th><th style="text-align: left;">Maker</th><th style="text-align: left;">Type</th><th style="text-align: left;">Name</th><th style="text-align: left;">Year</th><th style="text-align: left;">Sales</th><th style="text-align: left;">comment</th><th style="text-align: left;">Model</th><th style="text-align: left;">Year_true</th><th style="text-align: left;">Month</th><th style="text-align: left;">price</th><th style="text-align: left;">kudou</th><th style="text-align: left;">kata</th><th style="text-align: left;">TransMission</th><th style="text-align: left;">WheelBase</th><th style="text-align: left;">MinRideHeight</th><th style="text-align: left;">weight</th><th style="text-align: left;">capacity</th><th style="text-align: left;">SeatRaw</th><th style="text-align: left;">NumofDoor</th><th style="text-align: left;">種類</th><th style="text-align: left;">engine</th><th style="text-align: left;">過給器</th><th style="text-align: left;">displacement</th><th style="text-align: left;">FuelType</th><th style="text-align: left;">TankCapacity</th><th style="text-align: left;">HorsePower</th><th style="text-align: left;">MaxTorque</th><th style="text-align: left;">FuelEfficiency</th><th style="text-align: left;">overall_length</th><th style="text-align: left;">overall_width</th><th style="text-align: left;">overall_height</th><th style="text-align: left;">interior_length</th><th style="text-align: left;">interior_width</th><th style="text-align: left;">interior_height</th></tr><tr class="subheader headerLastRow"><th class="rowNumber" style="font-weight: bold; text-align: right;"></th><th title="String15" style="text-align: left;">String15</th><th title="String7" style="text-align: left;">String7</th><th title="String31" style="text-align: left;">String31</th><th title="Int64" style="text-align: left;">Int64</th><th title="Int64" style="text-align: left;">Int64</th><th title="Union{Missing, String}" style="text-align: left;">String?</th><th title="String" style="text-align: left;">String</th><th title="Int64" style="text-align: left;">Int64</th><th title="Int64" style="text-align: left;">Int64</th><th title="Float64" style="text-align: left;">Float64</th><th title="String3" style="text-align: left;">String3</th><th title="String15" style="text-align: left;">String15</th><th title="String3" style="text-align: left;">String3</th><th title="Int64" style="text-align: left;">Int64</th><th title="Union{Missing, Int64}" style="text-align: left;">Int64?</th><th title="Int64" style="text-align: left;">Int64</th><th title="Int64" style="text-align: left;">Int64</th><th title="Int64" style="text-align: left;">Int64</th><th title="Int64" style="text-align: left;">Int64</th><th title="String31" style="text-align: left;">String31</th><th title="String15" style="text-align: left;">String15</th><th title="String" style="text-align: left;">String</th><th title="Int64" style="text-align: left;">Int64</th><th title="String15" style="text-align: left;">String15</th><th title="Union{Missing, Int64}" style="text-align: left;">Int64?</th><th title="Union{Missing, Int64}" style="text-align: left;">Int64?</th><th title="Union{Missing, Float64}" style="text-align: left;">Float64?</th><th title="Union{Missing, Float64}" style="text-align: left;">Float64?</th><th title="Int64" style="text-align: left;">Int64</th><th title="Int64" style="text-align: left;">Int64</th><th title="Int64" style="text-align: left;">Int64</th><th title="Union{Missing, Int64}" style="text-align: left;">Int64?</th><th title="Union{Missing, Int64}" style="text-align: left;">Int64?</th><th title="Union{Missing, Int64}" style="text-align: left;">Int64?</th></tr></thead><tbody><tr><td class="rowNumber" style="font-weight: bold; text-align: right;">1</td><td style="text-align: left;">Audi</td><td style="text-align: left;">Foreign</td><td style="text-align: left;">A1シリーズ</td><td style="text-align: right;">2011</td><td style="text-align: right;">4206</td><td style="font-style: italic; text-align: left;">missing</td><td style="text-align: left;">1.4 TFSI</td><td style="text-align: right;">2011</td><td style="text-align: right;">1</td><td style="text-align: right;">289.0</td><td style="text-align: left;">FF</td><td style="text-align: left;">DBA-8XCAX</td><td style="text-align: left;">7AT</td><td style="text-align: right;">2465</td><td style="text-align: right;">115</td><td style="text-align: right;">1190</td><td style="text-align: right;">4</td><td style="text-align: right;">2</td><td style="text-align: right;">3</td><td style="text-align: left;">直列4気筒DOHC</td><td style="text-align: left;">CAX</td><td style="text-align: left;">ターボ</td><td style="text-align: right;">1389</td><td style="text-align: left;">ハイオク</td><td style="text-align: right;">45</td><td style="text-align: right;">122</td><td style="text-align: right;">20.4</td><td style="text-align: right;">19.4</td><td style="text-align: right;">3970</td><td style="text-align: right;">1740</td><td style="text-align: right;">1440</td><td style="font-style: italic; text-align: right;">missing</td><td style="font-style: italic; text-align: right;">missing</td><td style="font-style: italic; text-align: right;">missing</td></tr><tr><td class="rowNumber" style="font-weight: bold; text-align: right;">2</td><td style="text-align: left;">Audi</td><td style="text-align: left;">Foreign</td><td style="text-align: left;">A1シリーズ</td><td style="text-align: right;">2012</td><td style="text-align: right;">4502</td><td style="font-style: italic; text-align: left;">missing</td><td style="text-align: left;">1.4 TFSI</td><td style="text-align: right;">2012</td><td style="text-align: right;">1</td><td style="text-align: right;">273.0</td><td style="text-align: left;">FF</td><td style="text-align: left;">DBA-8XCAX</td><td style="text-align: left;">7AT</td><td style="text-align: right;">2465</td><td style="text-align: right;">115</td><td style="text-align: right;">1190</td><td style="text-align: right;">4</td><td style="text-align: right;">2</td><td style="text-align: right;">3</td><td style="text-align: left;">直列4気筒DOHC</td><td style="text-align: left;">CAX</td><td style="text-align: left;">ターボ</td><td style="text-align: right;">1389</td><td style="text-align: left;">ハイオク</td><td style="text-align: right;">45</td><td style="text-align: right;">122</td><td style="text-align: right;">20.4</td><td style="text-align: right;">19.4</td><td style="text-align: right;">3970</td><td style="text-align: right;">1740</td><td style="text-align: right;">1440</td><td style="font-style: italic; text-align: right;">missing</td><td style="font-style: italic; text-align: right;">missing</td><td style="font-style: italic; text-align: right;">missing</td></tr><tr><td class="rowNumber" style="font-weight: bold; text-align: right;">3</td><td style="text-align: left;">Audi</td><td style="text-align: left;">Foreign</td><td style="text-align: left;">A1シリーズ</td><td style="text-align: right;">2013</td><td style="text-align: right;">5071</td><td style="font-style: italic; text-align: left;">missing</td><td style="text-align: left;">1.4 TFSI</td><td style="text-align: right;">2012</td><td style="text-align: right;">1</td><td style="text-align: right;">273.0</td><td style="text-align: left;">FF</td><td style="text-align: left;">DBA-8XCAX</td><td style="text-align: left;">7AT</td><td style="text-align: right;">2465</td><td style="text-align: right;">115</td><td style="text-align: right;">1190</td><td style="text-align: right;">4</td><td style="text-align: right;">2</td><td style="text-align: right;">3</td><td style="text-align: left;">直列4気筒DOHC</td><td style="text-align: left;">CAX</td><td style="text-align: left;">ターボ</td><td style="text-align: right;">1389</td><td style="text-align: left;">ハイオク</td><td style="text-align: right;">45</td><td style="text-align: right;">122</td><td style="text-align: right;">20.4</td><td style="text-align: right;">19.4</td><td style="text-align: right;">3970</td><td style="text-align: right;">1740</td><td style="text-align: right;">1440</td><td style="font-style: italic; text-align: right;">missing</td><td style="font-style: italic; text-align: right;">missing</td><td style="font-style: italic; text-align: right;">missing</td></tr><tr><td class="rowNumber" style="font-weight: bold; text-align: right;">4</td><td style="text-align: left;">Audi</td><td style="text-align: left;">Foreign</td><td style="text-align: left;">A3シリーズ</td><td style="text-align: right;">2006</td><td style="text-align: right;">4830</td><td style="font-style: italic; text-align: left;">missing</td><td style="text-align: left;">アトラクション</td><td style="text-align: right;">2006</td><td style="text-align: right;">1</td><td style="text-align: right;">284.0</td><td style="text-align: left;">FF</td><td style="text-align: left;">GH-8PBSE</td><td style="text-align: left;">6AT</td><td style="text-align: right;">2575</td><td style="text-align: right;">140</td><td style="text-align: right;">1360</td><td style="text-align: right;">5</td><td style="text-align: right;">2</td><td style="text-align: right;">5</td><td style="text-align: left;">直列4気筒SOHC</td><td style="text-align: left;">BSE</td><td style="text-align: left;">なし</td><td style="text-align: right;">1595</td><td style="text-align: left;">ハイオク</td><td style="text-align: right;">55</td><td style="text-align: right;">102</td><td style="text-align: right;">15.1</td><td style="text-align: right;">12.2</td><td style="text-align: right;">4285</td><td style="text-align: right;">1765</td><td style="text-align: right;">1430</td><td style="font-style: italic; text-align: right;">missing</td><td style="font-style: italic; text-align: right;">missing</td><td style="font-style: italic; text-align: right;">missing</td></tr><tr><td class="rowNumber" style="font-weight: bold; text-align: right;">5</td><td style="text-align: left;">Audi</td><td style="text-align: left;">Foreign</td><td style="text-align: left;">A3シリーズ</td><td style="text-align: right;">2007</td><td style="text-align: right;">3874</td><td style="font-style: italic; text-align: left;">missing</td><td style="text-align: left;">アトラクション</td><td style="text-align: right;">2007</td><td style="text-align: right;">1</td><td style="text-align: right;">286.0</td><td style="text-align: left;">FF</td><td style="text-align: left;">GH-8PBSE</td><td style="text-align: left;">6AT</td><td style="text-align: right;">2575</td><td style="text-align: right;">140</td><td style="text-align: right;">1360</td><td style="text-align: right;">5</td><td style="text-align: right;">2</td><td style="text-align: right;">5</td><td style="text-align: left;">直列4気筒SOHC</td><td style="text-align: left;">BSE</td><td style="text-align: left;">なし</td><td style="text-align: right;">1595</td><td style="text-align: left;">ハイオク</td><td style="text-align: right;">55</td><td style="text-align: right;">102</td><td style="text-align: right;">15.1</td><td style="text-align: right;">12.2</td><td style="text-align: right;">4285</td><td style="text-align: right;">1765</td><td style="text-align: right;">1430</td><td style="font-style: italic; text-align: right;">missing</td><td style="font-style: italic; text-align: right;">missing</td><td style="font-style: italic; text-align: right;">missing</td></tr></tbody></table></div>
</div>
</div>
<div class="cell" data-execution_count="3">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>dataHH <span class="op">=</span> CSV.<span class="fu">read</span>(<span class="st">"data/demand_estimation/HHsize.csv"</span>, DataFrame)</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>dataHH[!, <span class="op">:</span>HH] <span class="op">=</span> <span class="fu">parse</span>.(<span class="dt">Int</span>, <span class="fu">replace</span>.(dataHH.HH, <span class="st">","</span> <span class="op">=&gt;</span> <span class="st">""</span>))</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="fu">first</span>(dataHH, <span class="fl">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="4">

<div><div style="float: left;"><span>5×2 DataFrame</span></div><div style="clear: both;"></div></div><div class="data-frame" style="overflow-x: scroll;"><table class="data-frame table table-sm table-striped" style="margin-bottom: 6px;"><thead><tr class="header"><th class="rowNumber" style="font-weight: bold; text-align: right;">Row</th><th style="text-align: left;">year</th><th style="text-align: left;">HH</th></tr><tr class="subheader headerLastRow"><th class="rowNumber" style="font-weight: bold; text-align: right;"></th><th title="Int64" style="text-align: left;">Int64</th><th title="Int64" style="text-align: left;">Int64</th></tr></thead><tbody><tr><td class="rowNumber" style="font-weight: bold; text-align: right;">1</td><td style="text-align: right;">1975</td><td style="text-align: right;">33310006</td></tr><tr><td class="rowNumber" style="font-weight: bold; text-align: right;">2</td><td style="text-align: right;">1976</td><td style="text-align: right;">33911052</td></tr><tr><td class="rowNumber" style="font-weight: bold; text-align: right;">3</td><td style="text-align: right;">1977</td><td style="text-align: right;">34380314</td></tr><tr><td class="rowNumber" style="font-weight: bold; text-align: right;">4</td><td style="text-align: right;">1978</td><td style="text-align: right;">34858696</td></tr><tr><td class="rowNumber" style="font-weight: bold; text-align: right;">5</td><td style="text-align: right;">1979</td><td style="text-align: right;">35350173</td></tr></tbody></table></div>
</div>
</div>
<div class="cell" data-execution_count="4">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>dataCPI <span class="op">=</span> CSV.<span class="fu">File</span>(</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">open</span>(read, <span class="st">"data/demand_estimation/zni2015s.csv"</span>, enc<span class="st">"shift-jis"</span>), </span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>    select <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">2</span>,</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>    skipto <span class="op">=</span> <span class="fl">7</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>    ) <span class="op">|&gt;</span> DataFrame</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a><span class="fu">rename!</span>(dataCPI, <span class="st">"類・品目"</span> <span class="op">=&gt;</span> <span class="st">"year"</span>, <span class="st">"総合"</span> <span class="op">=&gt;</span> <span class="st">"CPI"</span>)</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a><span class="fu">first</span>(dataCPI, <span class="fl">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="5">

<div><div style="float: left;"><span>5×2 DataFrame</span></div><div style="clear: both;"></div></div><div class="data-frame" style="overflow-x: scroll;"><table class="data-frame table table-sm table-striped" style="margin-bottom: 6px;"><thead><tr class="header"><th class="rowNumber" style="font-weight: bold; text-align: right;">Row</th><th style="text-align: left;">year</th><th style="text-align: left;">CPI</th></tr><tr class="subheader headerLastRow"><th class="rowNumber" style="font-weight: bold; text-align: right;"></th><th title="Int64" style="text-align: left;">Int64</th><th title="Float64" style="text-align: left;">Float64</th></tr></thead><tbody><tr><td class="rowNumber" style="font-weight: bold; text-align: right;">1</td><td style="text-align: right;">1970</td><td style="text-align: right;">31.5</td></tr><tr><td class="rowNumber" style="font-weight: bold; text-align: right;">2</td><td style="text-align: right;">1971</td><td style="text-align: right;">33.5</td></tr><tr><td class="rowNumber" style="font-weight: bold; text-align: right;">3</td><td style="text-align: right;">1972</td><td style="text-align: right;">35.2</td></tr><tr><td class="rowNumber" style="font-weight: bold; text-align: right;">4</td><td style="text-align: right;">1973</td><td style="text-align: right;">39.3</td></tr><tr><td class="rowNumber" style="font-weight: bold; text-align: right;">5</td><td style="text-align: right;">1974</td><td style="text-align: right;">48.4</td></tr></tbody></table></div>
</div>
</div>
<div class="cell" data-execution_count="5">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co">## Data cleaning</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> data[!, [</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>        <span class="op">:</span>Maker, <span class="op">:</span><span class="dt">Type</span>, <span class="op">:</span>Name, <span class="op">:</span>Year, <span class="op">:</span>Sales, </span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>        <span class="op">:</span>Model, <span class="op">:</span>price, <span class="op">:</span>kata, <span class="op">:</span>weight, <span class="op">:</span>FuelEfficiency, </span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>        <span class="op">:</span>HorsePower, <span class="op">:</span>overall_length, <span class="op">:</span>overall_width, <span class="op">:</span>overall_height</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>        ]]</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a><span class="fu">rename!</span>(data, <span class="st">"Year"</span> <span class="op">=&gt;</span> <span class="st">"year"</span>)</span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> <span class="fu">leftjoin</span>(data, dataHH, on <span class="op">=</span> <span class="op">:</span>year)</span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> <span class="fu">leftjoin</span>(data, dataCPI, on <span class="op">=</span> <span class="op">:</span>year)</span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a><span class="fu">first</span>(data, <span class="fl">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="6">

<div><div style="float: left;"><span>5×16 DataFrame</span></div><div style="clear: both;"></div></div><div class="data-frame" style="overflow-x: scroll;"><table class="data-frame table table-sm table-striped" style="margin-bottom: 6px;"><thead><tr class="header"><th class="rowNumber" style="font-weight: bold; text-align: right;">Row</th><th style="text-align: left;">Maker</th><th style="text-align: left;">Type</th><th style="text-align: left;">Name</th><th style="text-align: left;">year</th><th style="text-align: left;">Sales</th><th style="text-align: left;">Model</th><th style="text-align: left;">price</th><th style="text-align: left;">kata</th><th style="text-align: left;">weight</th><th style="text-align: left;">FuelEfficiency</th><th style="text-align: left;">HorsePower</th><th style="text-align: left;">overall_length</th><th style="text-align: left;">overall_width</th><th style="text-align: left;">overall_height</th><th style="text-align: left;">HH</th><th style="text-align: left;">CPI</th></tr><tr class="subheader headerLastRow"><th class="rowNumber" style="font-weight: bold; text-align: right;"></th><th title="String15" style="text-align: left;">String15</th><th title="String7" style="text-align: left;">String7</th><th title="String31" style="text-align: left;">String31</th><th title="Int64" style="text-align: left;">Int64</th><th title="Int64" style="text-align: left;">Int64</th><th title="String" style="text-align: left;">String</th><th title="Float64" style="text-align: left;">Float64</th><th title="String15" style="text-align: left;">String15</th><th title="Int64" style="text-align: left;">Int64</th><th title="Union{Missing, Float64}" style="text-align: left;">Float64?</th><th title="Union{Missing, Int64}" style="text-align: left;">Int64?</th><th title="Int64" style="text-align: left;">Int64</th><th title="Int64" style="text-align: left;">Int64</th><th title="Int64" style="text-align: left;">Int64</th><th title="Union{Missing, Int64}" style="text-align: left;">Int64?</th><th title="Union{Missing, Float64}" style="text-align: left;">Float64?</th></tr></thead><tbody><tr><td class="rowNumber" style="font-weight: bold; text-align: right;">1</td><td style="text-align: left;">Audi</td><td style="text-align: left;">Foreign</td><td style="text-align: left;">A1シリーズ</td><td style="text-align: right;">2011</td><td style="text-align: right;">4206</td><td style="text-align: left;">1.4 TFSI</td><td style="text-align: right;">289.0</td><td style="text-align: left;">DBA-8XCAX</td><td style="text-align: right;">1190</td><td style="text-align: right;">19.4</td><td style="text-align: right;">122</td><td style="text-align: right;">3970</td><td style="text-align: right;">1740</td><td style="text-align: right;">1440</td><td style="text-align: right;">53783435</td><td style="text-align: right;">96.3</td></tr><tr><td class="rowNumber" style="font-weight: bold; text-align: right;">2</td><td style="text-align: left;">Audi</td><td style="text-align: left;">Foreign</td><td style="text-align: left;">A1シリーズ</td><td style="text-align: right;">2012</td><td style="text-align: right;">4502</td><td style="text-align: left;">1.4 TFSI</td><td style="text-align: right;">273.0</td><td style="text-align: left;">DBA-8XCAX</td><td style="text-align: right;">1190</td><td style="text-align: right;">19.4</td><td style="text-align: right;">122</td><td style="text-align: right;">3970</td><td style="text-align: right;">1740</td><td style="text-align: right;">1440</td><td style="text-align: right;">54171475</td><td style="text-align: right;">96.2</td></tr><tr><td class="rowNumber" style="font-weight: bold; text-align: right;">3</td><td style="text-align: left;">Audi</td><td style="text-align: left;">Foreign</td><td style="text-align: left;">A1シリーズ</td><td style="text-align: right;">2013</td><td style="text-align: right;">5071</td><td style="text-align: left;">1.4 TFSI</td><td style="text-align: right;">273.0</td><td style="text-align: left;">DBA-8XCAX</td><td style="text-align: right;">1190</td><td style="text-align: right;">19.4</td><td style="text-align: right;">122</td><td style="text-align: right;">3970</td><td style="text-align: right;">1740</td><td style="text-align: right;">1440</td><td style="text-align: right;">54594744</td><td style="text-align: right;">96.6</td></tr><tr><td class="rowNumber" style="font-weight: bold; text-align: right;">4</td><td style="text-align: left;">Audi</td><td style="text-align: left;">Foreign</td><td style="text-align: left;">A3シリーズ</td><td style="text-align: right;">2006</td><td style="text-align: right;">4830</td><td style="text-align: left;">アトラクション</td><td style="text-align: right;">284.0</td><td style="text-align: left;">GH-8PBSE</td><td style="text-align: right;">1360</td><td style="text-align: right;">12.2</td><td style="text-align: right;">102</td><td style="text-align: right;">4285</td><td style="text-align: right;">1765</td><td style="text-align: right;">1430</td><td style="text-align: right;">51102005</td><td style="text-align: right;">97.2</td></tr><tr><td class="rowNumber" style="font-weight: bold; text-align: right;">5</td><td style="text-align: left;">Audi</td><td style="text-align: left;">Foreign</td><td style="text-align: left;">A3シリーズ</td><td style="text-align: right;">2007</td><td style="text-align: right;">3874</td><td style="text-align: left;">アトラクション</td><td style="text-align: right;">286.0</td><td style="text-align: left;">GH-8PBSE</td><td style="text-align: right;">1360</td><td style="text-align: right;">12.2</td><td style="text-align: right;">102</td><td style="text-align: right;">4285</td><td style="text-align: right;">1765</td><td style="text-align: right;">1430</td><td style="text-align: right;">51713048</td><td style="text-align: right;">97.2</td></tr></tbody></table></div>
</div>
</div>
<div class="cell" data-execution_count="6">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dropmissing!</span>(data, <span class="op">:</span>FuelEfficiency);</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>cpi2016 <span class="op">=</span> dataCPI[dataCPI.year <span class="op">.==</span> <span class="fl">2016</span>, <span class="st">"CPI"</span>][<span class="fl">1</span>]</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>data[!, <span class="op">:</span>price] <span class="op">=</span> data.price <span class="op">./</span> (data.CPI <span class="op">/</span> cpi2016) <span class="op">/</span> <span class="fl">100</span>;</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>data[!, <span class="op">:</span>size] <span class="op">=</span> (data[<span class="op">:</span>, <span class="op">:</span>overall_length] <span class="op">/</span> <span class="fl">1000</span>) <span class="op">.*</span> (data[<span class="op">:</span>, <span class="op">:</span>overall_width] <span class="op">/</span> <span class="fl">1000</span>) <span class="op">.*</span> (data[<span class="op">:</span>, <span class="op">:</span>overall_height] <span class="op">/</span> <span class="fl">1000</span>);</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>data[!, <span class="op">:</span>hppw] <span class="op">=</span> data[<span class="op">:</span>, <span class="op">:</span>HorsePower] <span class="op">./</span> data[<span class="op">:</span>, <span class="op">:</span>weight];</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>unique_name <span class="op">=</span> <span class="fu">unique</span>(data[!, [<span class="op">:</span>Name]])</span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>unique_name[!, <span class="op">:</span>NameID] <span class="op">=</span> <span class="fu">rownumber</span>.(<span class="fu">eachrow</span>(unique_name))</span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> <span class="fu">leftjoin</span>(data, unique_name, on <span class="op">=</span> <span class="op">:</span>Name);</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> <span class="fu">transform</span>(</span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">groupby</span>(data, <span class="op">:</span>year),</span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>    <span class="op">:</span>Sales <span class="op">=&gt;</span> sum <span class="op">=&gt;</span> <span class="op">:</span>inside_total</span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>);</span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a>data[!, <span class="op">:</span>outside_total] <span class="op">=</span> data.HH <span class="op">.-</span> data.inside_total;</span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a>data[!, <span class="op">:</span>share] <span class="op">=</span> data.Sales <span class="op">./</span> data.HH;</span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a>data[!, <span class="op">:</span>share0] <span class="op">=</span> data.outside_total <span class="op">./</span> data.HH;</span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a><span class="fu">transform!</span>(</span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a>    <span class="fu">groupby</span>(data, [<span class="op">:</span>year, <span class="op">:</span>Maker]),</span>
<span id="cb6-20"><a href="#cb6-20" aria-hidden="true" tabindex="-1"></a>    [<span class="op">:</span>hppw, <span class="op">:</span>FuelEfficiency, <span class="op">:</span>size] <span class="op">.=&gt;</span> sum <span class="op">.=&gt;</span> [<span class="op">:</span>hppw_sum_own, <span class="op">:</span>FuelEfficiency_sum_own, <span class="op">:</span>size_sum_own],</span>
<span id="cb6-21"><a href="#cb6-21" aria-hidden="true" tabindex="-1"></a>    [<span class="op">:</span>hppw, <span class="op">:</span>FuelEfficiency, <span class="op">:</span>size] <span class="op">.=&gt;</span> (x <span class="op">-&gt;</span> <span class="fu">sum</span>(x<span class="op">.^</span><span class="fl">2</span>)) <span class="op">.=&gt;</span> [<span class="op">:</span>hppw_sqr_sum_own, <span class="op">:</span>FuelEfficiency_sqr_sum_own, <span class="op">:</span>size_sqr_sum_own],</span>
<span id="cb6-22"><a href="#cb6-22" aria-hidden="true" tabindex="-1"></a>    nrow <span class="op">=&gt;</span> <span class="st">"group_n"</span></span>
<span id="cb6-23"><a href="#cb6-23" aria-hidden="true" tabindex="-1"></a>);</span>
<span id="cb6-24"><a href="#cb6-24" aria-hidden="true" tabindex="-1"></a><span class="fu">transform!</span>(</span>
<span id="cb6-25"><a href="#cb6-25" aria-hidden="true" tabindex="-1"></a>    <span class="fu">groupby</span>(data, [<span class="op">:</span>year]),</span>
<span id="cb6-26"><a href="#cb6-26" aria-hidden="true" tabindex="-1"></a>    [<span class="op">:</span>hppw, <span class="op">:</span>FuelEfficiency, <span class="op">:</span>size] <span class="op">.=&gt;</span> sum <span class="op">.=&gt;</span> [<span class="op">:</span>hppw_sum_mkt, <span class="op">:</span>FuelEfficiency_sum_mkt, <span class="op">:</span>size_sum_mkt],</span>
<span id="cb6-27"><a href="#cb6-27" aria-hidden="true" tabindex="-1"></a>    [<span class="op">:</span>hppw, <span class="op">:</span>FuelEfficiency, <span class="op">:</span>size] <span class="op">.=&gt;</span> (x <span class="op">-&gt;</span> <span class="fu">sum</span>(x<span class="op">.^</span><span class="fl">2</span>)) <span class="op">.=&gt;</span> [<span class="op">:</span>hppw_sqr_sum_mkt, <span class="op">:</span>FuelEfficiency_sqr_sum_mkt, <span class="op">:</span>size_sqr_sum_mkt],</span>
<span id="cb6-28"><a href="#cb6-28" aria-hidden="true" tabindex="-1"></a>    nrow <span class="op">=&gt;</span> <span class="st">"mkt_n"</span></span>
<span id="cb6-29"><a href="#cb6-29" aria-hidden="true" tabindex="-1"></a>);</span>
<span id="cb6-30"><a href="#cb6-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-31"><a href="#cb6-31" aria-hidden="true" tabindex="-1"></a>data[!, <span class="op">:</span>iv_BLP_own_hppw]             <span class="op">=</span> data[<span class="op">:</span>, <span class="op">:</span>hppw_sum_own]           <span class="op">.-</span> data[<span class="op">:</span>, <span class="op">:</span>hppw];</span>
<span id="cb6-32"><a href="#cb6-32" aria-hidden="true" tabindex="-1"></a>data[!, <span class="op">:</span>iv_BLP_own_FuelEfficiency]   <span class="op">=</span> data[<span class="op">:</span>, <span class="op">:</span>FuelEfficiency_sum_own] <span class="op">.-</span> data[<span class="op">:</span>, <span class="op">:</span>FuelEfficiency];</span>
<span id="cb6-33"><a href="#cb6-33" aria-hidden="true" tabindex="-1"></a>data[!, <span class="op">:</span>iv_BLP_own_size]             <span class="op">=</span> data[<span class="op">:</span>, <span class="op">:</span>size_sum_own]           <span class="op">.-</span> data[<span class="op">:</span>, <span class="op">:</span>size];</span>
<span id="cb6-34"><a href="#cb6-34" aria-hidden="true" tabindex="-1"></a>data[!, <span class="op">:</span>iv_BLP_other_hppw]           <span class="op">=</span> data[<span class="op">:</span>, <span class="op">:</span>hppw_sum_mkt]           <span class="op">.-</span> data[<span class="op">:</span>, <span class="op">:</span>hppw_sum_own];</span>
<span id="cb6-35"><a href="#cb6-35" aria-hidden="true" tabindex="-1"></a>data[!, <span class="op">:</span>iv_BLP_other_FuelEfficiency] <span class="op">=</span> data[<span class="op">:</span>, <span class="op">:</span>FuelEfficiency_sum_mkt] <span class="op">.-</span> data[<span class="op">:</span>, <span class="op">:</span>FuelEfficiency_sum_own];</span>
<span id="cb6-36"><a href="#cb6-36" aria-hidden="true" tabindex="-1"></a>data[!, <span class="op">:</span>iv_BLP_other_size]           <span class="op">=</span> data[<span class="op">:</span>, <span class="op">:</span>size_sum_mkt]           <span class="op">.-</span> data[<span class="op">:</span>, <span class="op">:</span>size_sum_own];</span>
<span id="cb6-37"><a href="#cb6-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-38"><a href="#cb6-38" aria-hidden="true" tabindex="-1"></a>data[!, <span class="op">:</span>iv_GH_own_hppw]             <span class="op">=</span> (</span>
<span id="cb6-39"><a href="#cb6-39" aria-hidden="true" tabindex="-1"></a>    (data[<span class="op">:</span>, <span class="op">:</span>group_n] <span class="op">.-</span> <span class="fl">1</span>) <span class="op">.*</span> data[<span class="op">:</span>, <span class="op">:</span>hppw]<span class="op">.^</span><span class="fl">2</span> <span class="op">.+</span> </span>
<span id="cb6-40"><a href="#cb6-40" aria-hidden="true" tabindex="-1"></a>    (data[<span class="op">:</span>, <span class="op">:</span>hppw_sqr_sum_own] <span class="op">.-</span> data[<span class="op">:</span>, <span class="op">:</span>hppw]<span class="op">.^</span><span class="fl">2</span>) <span class="op">.-</span> </span>
<span id="cb6-41"><a href="#cb6-41" aria-hidden="true" tabindex="-1"></a>    <span class="fl">2</span> <span class="op">.*</span> data[<span class="op">:</span>, <span class="op">:</span>hppw] <span class="op">.*</span> (data[<span class="op">:</span>, <span class="op">:</span>hppw_sum_own] <span class="op">.-</span> data[<span class="op">:</span>, <span class="op">:</span>hppw])</span>
<span id="cb6-42"><a href="#cb6-42" aria-hidden="true" tabindex="-1"></a>);</span>
<span id="cb6-43"><a href="#cb6-43" aria-hidden="true" tabindex="-1"></a>data[!, <span class="op">:</span>iv_GH_own_FuelEfficiency]   <span class="op">=</span> (</span>
<span id="cb6-44"><a href="#cb6-44" aria-hidden="true" tabindex="-1"></a>    (data[<span class="op">:</span>, <span class="op">:</span>group_n] <span class="op">.-</span> <span class="fl">1</span>) <span class="op">.*</span> data[<span class="op">:</span>, <span class="op">:</span>FuelEfficiency]<span class="op">.^</span><span class="fl">2</span> <span class="op">.+</span> </span>
<span id="cb6-45"><a href="#cb6-45" aria-hidden="true" tabindex="-1"></a>    (data[<span class="op">:</span>, <span class="op">:</span>FuelEfficiency_sqr_sum_own] <span class="op">.-</span> data[<span class="op">:</span>, <span class="op">:</span>FuelEfficiency]<span class="op">.^</span><span class="fl">2</span>) <span class="op">.-</span> </span>
<span id="cb6-46"><a href="#cb6-46" aria-hidden="true" tabindex="-1"></a>    <span class="fl">2</span> <span class="op">.*</span> data[<span class="op">:</span>, <span class="op">:</span>FuelEfficiency] <span class="op">.*</span> (data[<span class="op">:</span>, <span class="op">:</span>FuelEfficiency_sum_own] <span class="op">.-</span> data[<span class="op">:</span>, <span class="op">:</span>FuelEfficiency])</span>
<span id="cb6-47"><a href="#cb6-47" aria-hidden="true" tabindex="-1"></a>);</span>
<span id="cb6-48"><a href="#cb6-48" aria-hidden="true" tabindex="-1"></a>data[!, <span class="op">:</span>iv_GH_own_size]             <span class="op">=</span> (</span>
<span id="cb6-49"><a href="#cb6-49" aria-hidden="true" tabindex="-1"></a>    (data[<span class="op">:</span>, <span class="op">:</span>group_n] <span class="op">.-</span> <span class="fl">1</span>) <span class="op">.*</span> data[<span class="op">:</span>, <span class="op">:</span>size]<span class="op">.^</span><span class="fl">2</span> <span class="op">.+</span> </span>
<span id="cb6-50"><a href="#cb6-50" aria-hidden="true" tabindex="-1"></a>    (data[<span class="op">:</span>, <span class="op">:</span>size_sqr_sum_own] <span class="op">.-</span> data[<span class="op">:</span>, <span class="op">:</span>size]<span class="op">.^</span><span class="fl">2</span>) <span class="op">.-</span> </span>
<span id="cb6-51"><a href="#cb6-51" aria-hidden="true" tabindex="-1"></a>    <span class="fl">2</span> <span class="op">.*</span> data[<span class="op">:</span>, <span class="op">:</span>size] <span class="op">.*</span> (data[<span class="op">:</span>, <span class="op">:</span>size_sum_own] <span class="op">.-</span> data[<span class="op">:</span>, <span class="op">:</span>size])</span>
<span id="cb6-52"><a href="#cb6-52" aria-hidden="true" tabindex="-1"></a>);</span>
<span id="cb6-53"><a href="#cb6-53" aria-hidden="true" tabindex="-1"></a>data[!, <span class="op">:</span>iv_GH_other_hppw]           <span class="op">=</span> (</span>
<span id="cb6-54"><a href="#cb6-54" aria-hidden="true" tabindex="-1"></a>    (data[<span class="op">:</span>, <span class="op">:</span>mkt_n] <span class="op">.-</span> data[<span class="op">:</span>, <span class="op">:</span>group_n]) <span class="op">.*</span> data[<span class="op">:</span>, <span class="op">:</span>hppw]<span class="op">.^</span><span class="fl">2</span> <span class="op">.+</span> </span>
<span id="cb6-55"><a href="#cb6-55" aria-hidden="true" tabindex="-1"></a>    (data[<span class="op">:</span>, <span class="op">:</span>hppw_sqr_sum_mkt] <span class="op">.-</span> data[<span class="op">:</span>, <span class="op">:</span>hppw_sqr_sum_own]) <span class="op">.-</span> </span>
<span id="cb6-56"><a href="#cb6-56" aria-hidden="true" tabindex="-1"></a>    <span class="fl">2</span> <span class="op">.*</span> data[<span class="op">:</span>, <span class="op">:</span>hppw] <span class="op">.*</span> (data[<span class="op">:</span>, <span class="op">:</span>hppw_sum_mkt] <span class="op">.-</span> data[<span class="op">:</span>, <span class="op">:</span>hppw_sum_own])</span>
<span id="cb6-57"><a href="#cb6-57" aria-hidden="true" tabindex="-1"></a>);</span>
<span id="cb6-58"><a href="#cb6-58" aria-hidden="true" tabindex="-1"></a>data[!, <span class="op">:</span>iv_GH_other_FuelEfficiency] <span class="op">=</span> (</span>
<span id="cb6-59"><a href="#cb6-59" aria-hidden="true" tabindex="-1"></a>    (data[<span class="op">:</span>, <span class="op">:</span>mkt_n] <span class="op">.-</span> data[<span class="op">:</span>, <span class="op">:</span>group_n]) <span class="op">.*</span> data[<span class="op">:</span>, <span class="op">:</span>FuelEfficiency]<span class="op">.^</span><span class="fl">2</span> <span class="op">.+</span> </span>
<span id="cb6-60"><a href="#cb6-60" aria-hidden="true" tabindex="-1"></a>    (data[<span class="op">:</span>, <span class="op">:</span>FuelEfficiency_sqr_sum_mkt] <span class="op">.-</span> data[<span class="op">:</span>, <span class="op">:</span>FuelEfficiency_sqr_sum_own]) <span class="op">.-</span> </span>
<span id="cb6-61"><a href="#cb6-61" aria-hidden="true" tabindex="-1"></a>    <span class="fl">2</span> <span class="op">.*</span> data[<span class="op">:</span>, <span class="op">:</span>FuelEfficiency] <span class="op">.*</span> (data[<span class="op">:</span>, <span class="op">:</span>FuelEfficiency_sum_mkt] <span class="op">.-</span> data[<span class="op">:</span>, <span class="op">:</span>FuelEfficiency_sum_own])</span>
<span id="cb6-62"><a href="#cb6-62" aria-hidden="true" tabindex="-1"></a>);</span>
<span id="cb6-63"><a href="#cb6-63" aria-hidden="true" tabindex="-1"></a>data[!, <span class="op">:</span>iv_GH_other_size]           <span class="op">=</span> (</span>
<span id="cb6-64"><a href="#cb6-64" aria-hidden="true" tabindex="-1"></a>    (data[<span class="op">:</span>, <span class="op">:</span>mkt_n] <span class="op">.-</span> data[<span class="op">:</span>, <span class="op">:</span>group_n]) <span class="op">.*</span> data[<span class="op">:</span>, <span class="op">:</span>size]<span class="op">.^</span><span class="fl">2</span> <span class="op">.+</span> </span>
<span id="cb6-65"><a href="#cb6-65" aria-hidden="true" tabindex="-1"></a>    (data[<span class="op">:</span>, <span class="op">:</span>size_sqr_sum_mkt] <span class="op">.-</span> data[<span class="op">:</span>, <span class="op">:</span>size_sqr_sum_own]) <span class="op">.-</span> </span>
<span id="cb6-66"><a href="#cb6-66" aria-hidden="true" tabindex="-1"></a>    <span class="fl">2</span> <span class="op">.*</span> data[<span class="op">:</span>, <span class="op">:</span>size] <span class="op">.*</span> (data[<span class="op">:</span>, <span class="op">:</span>size_sum_mkt] <span class="op">.-</span> data[<span class="op">:</span>, <span class="op">:</span>size_sum_own])</span>
<span id="cb6-67"><a href="#cb6-67" aria-hidden="true" tabindex="-1"></a>);</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="section" class="level2" data-number="3.1">
<h2 data-number="3.1" class="anchored" data-anchor-id="section"><span class="header-section-number">3.1</span> 4.1</h2>
<div class="cell" data-execution_count="7">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>NIPPYOautoIDvec <span class="op">=</span> [</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>    <span class="fl">260</span>, <span class="fl">4</span>, <span class="fl">76</span>, <span class="fl">104</span>, <span class="fl">64</span>, <span class="fl">54</span>, <span class="fl">152</span>, <span class="fl">153</span>, <span class="fl">71</span>, <span class="fl">197</span>,</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>    <span class="fl">42</span>, <span class="fl">45</span>, <span class="fl">114</span>, <span class="fl">208</span>, <span class="fl">209</span>, <span class="fl">77</span>, <span class="fl">236</span>, <span class="fl">58</span>, <span class="fl">127</span>, <span class="fl">187</span>,</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>    <span class="fl">79</span>, <span class="fl">175</span>, <span class="fl">19</span>, <span class="fl">117</span>, <span class="fl">216</span>, <span class="fl">112</span>, <span class="fl">256</span>, <span class="fl">119</span>, <span class="fl">37</span>, <span class="fl">158</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>];</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>data_NIPPYO <span class="op">=</span> data[</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">in</span>(NIPPYOautoIDvec).(data[<span class="op">:</span>, <span class="op">:</span>NameID]), </span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>    [<span class="op">:</span>year, <span class="op">:</span>share, <span class="op">:</span>NameID, <span class="op">:</span>Sales, <span class="op">:</span>price, <span class="op">:</span>hppw, <span class="op">:</span>FuelEfficiency, <span class="op">:</span>size, <span class="op">:</span>Name]</span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>    ];</span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>data_NIPPYO[!, <span class="op">:</span>log_sales] <span class="op">=</span> <span class="fu">log</span>.(data_NIPPYO[<span class="op">:</span>, <span class="op">:</span>Sales]);</span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>data_NIPPYO[!, <span class="op">:</span>log_price] <span class="op">=</span> <span class="fu">log</span>.(data_NIPPYO[<span class="op">:</span>, <span class="op">:</span>price]);</span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>data_NIPPYO[!, <span class="op">:</span>log10_sales] <span class="op">=</span> <span class="fu">log10</span>.(data_NIPPYO[<span class="op">:</span>, <span class="op">:</span>Sales]);</span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a>data_NIPPYO[!, <span class="op">:</span>log10_price] <span class="op">=</span> <span class="fu">log10</span>.(data_NIPPYO[<span class="op">:</span>, <span class="op">:</span>price]);</span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a><span class="co">## 4.2</span></span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a>data[!, <span class="op">:</span>logit_share] <span class="op">=</span> <span class="fu">log</span>.(data[<span class="op">:</span>, <span class="op">:</span>share]) <span class="op">.-</span> <span class="fu">log</span>.(data[<span class="op">:</span>, <span class="op">:</span>share0]);</span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a>iv_GH_res <span class="op">=</span> <span class="fu">reg</span>(</span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a>    data, </span>
<span id="cb7-19"><a href="#cb7-19" aria-hidden="true" tabindex="-1"></a>    <span class="pp">@formula</span>(logit_share <span class="op">~</span> (</span>
<span id="cb7-20"><a href="#cb7-20" aria-hidden="true" tabindex="-1"></a>        price <span class="op">~</span> iv_GH_own_hppw <span class="op">+</span> iv_GH_own_FuelEfficiency <span class="op">+</span> iv_GH_own_size <span class="op">+</span> </span>
<span id="cb7-21"><a href="#cb7-21" aria-hidden="true" tabindex="-1"></a>            iv_GH_other_hppw <span class="op">+</span> iv_GH_other_FuelEfficiency <span class="op">+</span> iv_GH_other_size</span>
<span id="cb7-22"><a href="#cb7-22" aria-hidden="true" tabindex="-1"></a>    ) <span class="op">+</span> hppw <span class="op">+</span> FuelEfficiency <span class="op">+</span> size),</span>
<span id="cb7-23"><a href="#cb7-23" aria-hidden="true" tabindex="-1"></a>    Vcov.<span class="fu">robust</span>(),</span>
<span id="cb7-24"><a href="#cb7-24" aria-hidden="true" tabindex="-1"></a>    save <span class="op">=</span> <span class="cn">true</span></span>
<span id="cb7-25"><a href="#cb7-25" aria-hidden="true" tabindex="-1"></a>);</span>
<span id="cb7-26"><a href="#cb7-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-27"><a href="#cb7-27" aria-hidden="true" tabindex="-1"></a>dt_2016 <span class="op">=</span> data_NIPPYO[data_NIPPYO.year <span class="op">.==</span> <span class="fl">2016</span>, [<span class="op">:</span>price, <span class="op">:</span>share, <span class="op">:</span>NameID, <span class="op">:</span>Name]]</span>
<span id="cb7-28"><a href="#cb7-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-29"><a href="#cb7-29" aria-hidden="true" tabindex="-1"></a>price <span class="op">=</span> dt_2016.price</span>
<span id="cb7-30"><a href="#cb7-30" aria-hidden="true" tabindex="-1"></a>share <span class="op">=</span> dt_2016.share</span>
<span id="cb7-31"><a href="#cb7-31" aria-hidden="true" tabindex="-1"></a>NameID <span class="op">=</span> dt_2016.NameID</span>
<span id="cb7-32"><a href="#cb7-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-33"><a href="#cb7-33" aria-hidden="true" tabindex="-1"></a>own_elas <span class="op">=</span> iv_GH_res.coef[iv_GH_res.coefnames <span class="op">.==</span> <span class="st">"price"</span>][<span class="fl">1</span>] <span class="op">.*</span> price <span class="op">.*</span> (<span class="fl">1.0</span> <span class="op">.-</span> share);</span>
<span id="cb7-34"><a href="#cb7-34" aria-hidden="true" tabindex="-1"></a>cross_elas <span class="op">=</span> (<span class="op">-</span><span class="fl">1.0</span>) <span class="op">.*</span> iv_GH_res.coef[iv_GH_res.coefnames <span class="op">.==</span> <span class="st">"price"</span>][<span class="fl">1</span>] <span class="op">.*</span> price <span class="op">.*</span> share;</span>
<span id="cb7-35"><a href="#cb7-35" aria-hidden="true" tabindex="-1"></a>J <span class="op">=</span> <span class="fu">length</span>(own_elas);</span>
<span id="cb7-36"><a href="#cb7-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-37"><a href="#cb7-37" aria-hidden="true" tabindex="-1"></a>elas_mat <span class="op">=</span> <span class="fu">reduce</span>(hcat, [cross_elas for j <span class="op">=</span> <span class="fl">1</span><span class="op">:</span>J]);</span>
<span id="cb7-38"><a href="#cb7-38" aria-hidden="true" tabindex="-1"></a>elas_mat[<span class="fu">diagind</span>(elas_mat)] <span class="op">=</span> own_elas;</span>
<span id="cb7-39"><a href="#cb7-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-40"><a href="#cb7-40" aria-hidden="true" tabindex="-1"></a>elas_mat[[<span class="fl">12</span>, <span class="fl">13</span>, <span class="fl">10</span>, <span class="fl">1</span>], [<span class="fl">12</span>, <span class="fl">13</span>, <span class="fl">10</span>, <span class="fl">1</span>]]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="8">
<pre><code>4×4 Matrix{Float64}:
 -1.76455       0.00114929    0.00114929   0.00114929
  0.00122042   -0.818689      0.00122042   0.00122042
  0.000148175   0.000148175  -0.959449     0.000148175
  0.00184509    0.00184509    0.00184509  -0.67175</code></pre>
</div>
</div>
</section>
<section id="section-1" class="level2" data-number="3.2">
<h2 data-number="3.2" class="anchored" data-anchor-id="section-1"><span class="header-section-number">3.2</span> 5</h2>
<div class="cell" data-execution_count="8">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">transform!</span>(</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">groupby</span>(data, [<span class="op">:</span>year, <span class="op">:</span>Maker, <span class="op">:</span><span class="dt">Type</span>]),</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>    [<span class="op">:</span>hppw, <span class="op">:</span>FuelEfficiency, <span class="op">:</span>size] <span class="op">.=&gt;</span> sum <span class="op">.=&gt;</span> [<span class="op">:</span>hppw_sum_own, <span class="op">:</span>FuelEfficiency_sum_own, <span class="op">:</span>size_sum_own],</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>    [<span class="op">:</span>hppw, <span class="op">:</span>FuelEfficiency, <span class="op">:</span>size] <span class="op">.=&gt;</span> (x <span class="op">-&gt;</span> <span class="fu">sum</span>(x<span class="op">.^</span><span class="fl">2</span>)) <span class="op">.=&gt;</span> [<span class="op">:</span>hppw_sqr_sum_own, <span class="op">:</span>FuelEfficiency_sqr_sum_own, <span class="op">:</span>size_sqr_sum_own],</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>    nrow <span class="op">=&gt;</span> <span class="st">"group_n"</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>);</span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a><span class="fu">transform!</span>(</span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">groupby</span>(data, [<span class="op">:</span>year, <span class="op">:</span><span class="dt">Type</span>]),</span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>    [<span class="op">:</span>hppw, <span class="op">:</span>FuelEfficiency, <span class="op">:</span>size] <span class="op">.=&gt;</span> sum <span class="op">.=&gt;</span> [<span class="op">:</span>hppw_sum_mkt, <span class="op">:</span>FuelEfficiency_sum_mkt, <span class="op">:</span>size_sum_mkt],</span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>    [<span class="op">:</span>hppw, <span class="op">:</span>FuelEfficiency, <span class="op">:</span>size] <span class="op">.=&gt;</span> (x <span class="op">-&gt;</span> <span class="fu">sum</span>(x<span class="op">.^</span><span class="fl">2</span>)) <span class="op">.=&gt;</span> [<span class="op">:</span>hppw_sqr_sum_mkt, <span class="op">:</span>FuelEfficiency_sqr_sum_mkt, <span class="op">:</span>size_sqr_sum_mkt],</span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>    nrow <span class="op">=&gt;</span> <span class="st">"mkt_n"</span></span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a>);</span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a>data[!, <span class="op">:</span>iv_BLP_own_hppw_nest]             <span class="op">=</span> data[<span class="op">:</span>, <span class="op">:</span>hppw_sum_own]           <span class="op">.-</span> data[<span class="op">:</span>, <span class="op">:</span>hppw];</span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a>data[!, <span class="op">:</span>iv_BLP_own_FuelEfficiency_nest]   <span class="op">=</span> data[<span class="op">:</span>, <span class="op">:</span>FuelEfficiency_sum_own] <span class="op">.-</span> data[<span class="op">:</span>, <span class="op">:</span>FuelEfficiency];</span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a>data[!, <span class="op">:</span>iv_BLP_own_size_nest]             <span class="op">=</span> data[<span class="op">:</span>, <span class="op">:</span>size_sum_own]           <span class="op">.-</span> data[<span class="op">:</span>, <span class="op">:</span>size];</span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a>data[!, <span class="op">:</span>iv_BLP_own_num_nest]              <span class="op">=</span> data[<span class="op">:</span>, <span class="op">:</span>group_n]                <span class="op">.-</span> <span class="fl">1</span>;</span>
<span id="cb9-18"><a href="#cb9-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-19"><a href="#cb9-19" aria-hidden="true" tabindex="-1"></a>data[!, <span class="op">:</span>iv_BLP_other_hppw_nest]           <span class="op">=</span> data[<span class="op">:</span>, <span class="op">:</span>hppw_sum_mkt]           <span class="op">.-</span> data[<span class="op">:</span>, <span class="op">:</span>hppw_sum_own];</span>
<span id="cb9-20"><a href="#cb9-20" aria-hidden="true" tabindex="-1"></a>data[!, <span class="op">:</span>iv_BLP_other_FuelEfficiency_nest] <span class="op">=</span> data[<span class="op">:</span>, <span class="op">:</span>FuelEfficiency_sum_mkt] <span class="op">.-</span> data[<span class="op">:</span>, <span class="op">:</span>FuelEfficiency_sum_own];</span>
<span id="cb9-21"><a href="#cb9-21" aria-hidden="true" tabindex="-1"></a>data[!, <span class="op">:</span>iv_BLP_other_size_nest]           <span class="op">=</span> data[<span class="op">:</span>, <span class="op">:</span>size_sum_mkt]           <span class="op">.-</span> data[<span class="op">:</span>, <span class="op">:</span>size_sum_own];</span>
<span id="cb9-22"><a href="#cb9-22" aria-hidden="true" tabindex="-1"></a>data[!, <span class="op">:</span>iv_BLP_other_num_nest]            <span class="op">=</span> data[<span class="op">:</span>, <span class="op">:</span>mkt_n]                  <span class="op">.-</span> data[<span class="op">:</span>, <span class="op">:</span>group_n];</span>
<span id="cb9-23"><a href="#cb9-23" aria-hidden="true" tabindex="-1"></a>data[!, <span class="op">:</span>iv_GH_own_hppw_nest]             <span class="op">=</span> (</span>
<span id="cb9-24"><a href="#cb9-24" aria-hidden="true" tabindex="-1"></a>    (data[<span class="op">:</span>, <span class="op">:</span>group_n] <span class="op">.-</span> <span class="fl">1</span>) <span class="op">.*</span> data[<span class="op">:</span>, <span class="op">:</span>hppw]<span class="op">.^</span><span class="fl">2</span> <span class="op">.+</span> </span>
<span id="cb9-25"><a href="#cb9-25" aria-hidden="true" tabindex="-1"></a>    (data[<span class="op">:</span>, <span class="op">:</span>hppw_sqr_sum_own] <span class="op">.-</span> data[<span class="op">:</span>, <span class="op">:</span>hppw]<span class="op">.^</span><span class="fl">2</span>) <span class="op">.-</span> </span>
<span id="cb9-26"><a href="#cb9-26" aria-hidden="true" tabindex="-1"></a>    <span class="fl">2</span> <span class="op">.*</span> data[<span class="op">:</span>, <span class="op">:</span>hppw] <span class="op">.*</span> (data[<span class="op">:</span>, <span class="op">:</span>hppw_sum_own] <span class="op">.-</span> data[<span class="op">:</span>, <span class="op">:</span>hppw])</span>
<span id="cb9-27"><a href="#cb9-27" aria-hidden="true" tabindex="-1"></a>);</span>
<span id="cb9-28"><a href="#cb9-28" aria-hidden="true" tabindex="-1"></a>data[!, <span class="op">:</span>iv_GH_own_FuelEfficiency_nest]   <span class="op">=</span> (</span>
<span id="cb9-29"><a href="#cb9-29" aria-hidden="true" tabindex="-1"></a>    (data[<span class="op">:</span>, <span class="op">:</span>group_n] <span class="op">.-</span> <span class="fl">1</span>) <span class="op">.*</span> data[<span class="op">:</span>, <span class="op">:</span>FuelEfficiency]<span class="op">.^</span><span class="fl">2</span> <span class="op">.+</span> </span>
<span id="cb9-30"><a href="#cb9-30" aria-hidden="true" tabindex="-1"></a>    (data[<span class="op">:</span>, <span class="op">:</span>FuelEfficiency_sqr_sum_own] <span class="op">.-</span> data[<span class="op">:</span>, <span class="op">:</span>FuelEfficiency]<span class="op">.^</span><span class="fl">2</span>) <span class="op">.-</span> </span>
<span id="cb9-31"><a href="#cb9-31" aria-hidden="true" tabindex="-1"></a>    <span class="fl">2</span> <span class="op">.*</span> data[<span class="op">:</span>, <span class="op">:</span>FuelEfficiency] <span class="op">.*</span> (data[<span class="op">:</span>, <span class="op">:</span>FuelEfficiency_sum_own] <span class="op">.-</span> data[<span class="op">:</span>, <span class="op">:</span>FuelEfficiency])</span>
<span id="cb9-32"><a href="#cb9-32" aria-hidden="true" tabindex="-1"></a>);</span>
<span id="cb9-33"><a href="#cb9-33" aria-hidden="true" tabindex="-1"></a>data[!, <span class="op">:</span>iv_GH_own_size_nest]             <span class="op">=</span> (</span>
<span id="cb9-34"><a href="#cb9-34" aria-hidden="true" tabindex="-1"></a>    (data[<span class="op">:</span>, <span class="op">:</span>group_n] <span class="op">.-</span> <span class="fl">1</span>) <span class="op">.*</span> data[<span class="op">:</span>, <span class="op">:</span>size]<span class="op">.^</span><span class="fl">2</span> <span class="op">.+</span> </span>
<span id="cb9-35"><a href="#cb9-35" aria-hidden="true" tabindex="-1"></a>    (data[<span class="op">:</span>, <span class="op">:</span>size_sqr_sum_own] <span class="op">.-</span> data[<span class="op">:</span>, <span class="op">:</span>size]<span class="op">.^</span><span class="fl">2</span>) <span class="op">.-</span> </span>
<span id="cb9-36"><a href="#cb9-36" aria-hidden="true" tabindex="-1"></a>    <span class="fl">2</span> <span class="op">.*</span> data[<span class="op">:</span>, <span class="op">:</span>size] <span class="op">.*</span> (data[<span class="op">:</span>, <span class="op">:</span>size_sum_own] <span class="op">.-</span> data[<span class="op">:</span>, <span class="op">:</span>size])</span>
<span id="cb9-37"><a href="#cb9-37" aria-hidden="true" tabindex="-1"></a>);</span>
<span id="cb9-38"><a href="#cb9-38" aria-hidden="true" tabindex="-1"></a>data[!, <span class="op">:</span>iv_GH_other_hppw_nest]           <span class="op">=</span> (</span>
<span id="cb9-39"><a href="#cb9-39" aria-hidden="true" tabindex="-1"></a>    (data[<span class="op">:</span>, <span class="op">:</span>mkt_n] <span class="op">.-</span> data[<span class="op">:</span>, <span class="op">:</span>group_n]) <span class="op">.*</span> data[<span class="op">:</span>, <span class="op">:</span>hppw]<span class="op">.^</span><span class="fl">2</span> <span class="op">.+</span> </span>
<span id="cb9-40"><a href="#cb9-40" aria-hidden="true" tabindex="-1"></a>    (data[<span class="op">:</span>, <span class="op">:</span>hppw_sqr_sum_mkt] <span class="op">.-</span> data[<span class="op">:</span>, <span class="op">:</span>hppw_sqr_sum_own]) <span class="op">.-</span> </span>
<span id="cb9-41"><a href="#cb9-41" aria-hidden="true" tabindex="-1"></a>    <span class="fl">2</span> <span class="op">.*</span> data[<span class="op">:</span>, <span class="op">:</span>hppw] <span class="op">.*</span> (data[<span class="op">:</span>, <span class="op">:</span>hppw_sum_mkt] <span class="op">.-</span> data[<span class="op">:</span>, <span class="op">:</span>hppw_sum_own])</span>
<span id="cb9-42"><a href="#cb9-42" aria-hidden="true" tabindex="-1"></a>);</span>
<span id="cb9-43"><a href="#cb9-43" aria-hidden="true" tabindex="-1"></a>data[!, <span class="op">:</span>iv_GH_other_FuelEfficiency_nest] <span class="op">=</span> (</span>
<span id="cb9-44"><a href="#cb9-44" aria-hidden="true" tabindex="-1"></a>    (data[<span class="op">:</span>, <span class="op">:</span>mkt_n] <span class="op">.-</span> data[<span class="op">:</span>, <span class="op">:</span>group_n]) <span class="op">.*</span> data[<span class="op">:</span>, <span class="op">:</span>FuelEfficiency]<span class="op">.^</span><span class="fl">2</span> <span class="op">.+</span> </span>
<span id="cb9-45"><a href="#cb9-45" aria-hidden="true" tabindex="-1"></a>    (data[<span class="op">:</span>, <span class="op">:</span>FuelEfficiency_sqr_sum_mkt] <span class="op">.-</span> data[<span class="op">:</span>, <span class="op">:</span>FuelEfficiency_sqr_sum_own]) <span class="op">.-</span> </span>
<span id="cb9-46"><a href="#cb9-46" aria-hidden="true" tabindex="-1"></a>    <span class="fl">2</span> <span class="op">.*</span> data[<span class="op">:</span>, <span class="op">:</span>FuelEfficiency] <span class="op">.*</span> (data[<span class="op">:</span>, <span class="op">:</span>FuelEfficiency_sum_mkt] <span class="op">.-</span> data[<span class="op">:</span>, <span class="op">:</span>FuelEfficiency_sum_own])</span>
<span id="cb9-47"><a href="#cb9-47" aria-hidden="true" tabindex="-1"></a>);</span>
<span id="cb9-48"><a href="#cb9-48" aria-hidden="true" tabindex="-1"></a>data[!, <span class="op">:</span>iv_GH_other_size_nest]           <span class="op">=</span> (</span>
<span id="cb9-49"><a href="#cb9-49" aria-hidden="true" tabindex="-1"></a>    (data[<span class="op">:</span>, <span class="op">:</span>mkt_n] <span class="op">.-</span> data[<span class="op">:</span>, <span class="op">:</span>group_n]) <span class="op">.*</span> data[<span class="op">:</span>, <span class="op">:</span>size]<span class="op">.^</span><span class="fl">2</span> <span class="op">.+</span> </span>
<span id="cb9-50"><a href="#cb9-50" aria-hidden="true" tabindex="-1"></a>    (data[<span class="op">:</span>, <span class="op">:</span>size_sqr_sum_mkt] <span class="op">.-</span> data[<span class="op">:</span>, <span class="op">:</span>size_sqr_sum_own]) <span class="op">.-</span> </span>
<span id="cb9-51"><a href="#cb9-51" aria-hidden="true" tabindex="-1"></a>    <span class="fl">2</span> <span class="op">.*</span> data[<span class="op">:</span>, <span class="op">:</span>size] <span class="op">.*</span> (data[<span class="op">:</span>, <span class="op">:</span>size_sum_mkt] <span class="op">.-</span> data[<span class="op">:</span>, <span class="op">:</span>size_sum_own])</span>
<span id="cb9-52"><a href="#cb9-52" aria-hidden="true" tabindex="-1"></a>);</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="section-2" class="level2" data-number="3.3">
<h2 data-number="3.3" class="anchored" data-anchor-id="section-2"><span class="header-section-number">3.3</span> 6</h2>
<div class="cell" data-execution_count="9">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> <span class="fu">transform</span>(</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">groupby</span>(data, [<span class="op">:</span>year, <span class="op">:</span><span class="dt">Type</span>]),</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>    <span class="op">:</span>Sales <span class="op">=&gt;</span> sum <span class="op">=&gt;</span> <span class="op">:</span>sum_year_body</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>);</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>data[!, <span class="op">:</span>inside_share] <span class="op">=</span> data.Sales <span class="op">./</span> data.sum_year_body;</span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>data[!, <span class="op">:</span>log_inside_share] <span class="op">=</span> <span class="fu">log</span>.(data.Sales <span class="op">./</span> data.sum_year_body);</span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>ols_res <span class="op">=</span> <span class="fu">reg</span>(data, <span class="pp">@formula</span>(logit_share <span class="op">~</span> price <span class="op">+</span> log_inside_share <span class="op">+</span> hppw <span class="op">+</span> FuelEfficiency <span class="op">+</span> size))</span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>iv_BLP2_res <span class="op">=</span> <span class="fu">reg</span>(</span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>    data, </span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a>    <span class="pp">@formula</span>(logit_share <span class="op">~</span> (</span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a>        price <span class="op">+</span> log_inside_share <span class="op">~</span> iv_BLP_own_hppw_nest <span class="op">+</span> iv_BLP_own_FuelEfficiency_nest <span class="op">+</span> iv_BLP_own_size_nest <span class="op">+</span> </span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a>            iv_BLP_other_hppw_nest <span class="op">+</span> iv_BLP_other_FuelEfficiency_nest <span class="op">+</span> iv_BLP_other_size_nest <span class="op">+</span></span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a>            iv_BLP_own_num_nest <span class="op">+</span> iv_BLP_other_num_nest</span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a>    ) <span class="op">+</span> hppw <span class="op">+</span> FuelEfficiency <span class="op">+</span> size),</span>
<span id="cb10-16"><a href="#cb10-16" aria-hidden="true" tabindex="-1"></a>    Vcov.<span class="fu">robust</span>()</span>
<span id="cb10-17"><a href="#cb10-17" aria-hidden="true" tabindex="-1"></a>);</span>
<span id="cb10-18"><a href="#cb10-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-19"><a href="#cb10-19" aria-hidden="true" tabindex="-1"></a><span class="fu">regtable</span>(ols_res, iv_BLP2_res)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="10">
<pre><code>
-----------------------------------------------
                               logit_share     
                          ---------------------
                                (1)         (2)
-----------------------------------------------
(Intercept)               -7.557***   -9.548***
                            (0.166)     (0.239)
price                     -0.307***   -0.654***
                            (0.013)     (0.053)
log_inside_share           0.782***    0.595***
                            (0.009)     (0.035)
hppw                      10.636***   18.925***
                            (0.657)     (1.965)
FuelEfficiency             0.055***    0.069***
                            (0.004)     (0.006)
size                       0.156***    0.227***
                            (0.008)     (0.012)
-----------------------------------------------
Estimator                       OLS          IV
-----------------------------------------------
N                             1,823       1,823
R2                            0.862       0.765
Within-R2                                      
First-stage F statistic                   1.667
-----------------------------------------------
</code></pre>
</div>
</div>
</section>
<section id="section-3" class="level2" data-number="3.4">
<h2 data-number="3.4" class="anchored" data-anchor-id="section-3"><span class="header-section-number">3.4</span> 6.1</h2>
<div class="cell" data-execution_count="10">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>alpha1 <span class="op">=</span> ols_res.coef[ols_res.coefnames <span class="op">.==</span> <span class="st">"price"</span>][<span class="fl">1</span>]</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>sigma1 <span class="op">=</span> ols_res.coef[ols_res.coefnames <span class="op">.==</span> <span class="st">"log_inside_share"</span>][<span class="fl">1</span>]</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>alpha2 <span class="op">=</span> iv_BLP2_res.coef[iv_BLP2_res.coefnames <span class="op">.==</span> <span class="st">"price"</span>][<span class="fl">1</span>]</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>sigma2 <span class="op">=</span> iv_BLP2_res.coef[iv_BLP2_res.coefnames <span class="op">.==</span> <span class="st">"log_inside_share"</span>][<span class="fl">1</span>]</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>data[!, <span class="op">:</span>own_elas_ols] <span class="op">=</span> alpha1 <span class="op">.*</span> data[<span class="op">:</span>, <span class="op">:</span>price] <span class="op">.*</span> (</span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>    <span class="fl">1.0</span> <span class="op">.-</span> sigma1 <span class="op">.*</span> data[<span class="op">:</span>, <span class="op">:</span>inside_share] <span class="op">.-</span> </span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>    (<span class="fl">1.0</span> <span class="op">.-</span> sigma1) <span class="op">.*</span> data[<span class="op">:</span>, <span class="op">:</span>share]</span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>) <span class="op">./</span> (<span class="fl">1.0</span> <span class="op">.-</span> sigma1);</span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a>data[!, <span class="op">:</span>own_elas_ivglp] <span class="op">=</span> alpha2 <span class="op">.*</span> data[<span class="op">:</span>, <span class="op">:</span>price] <span class="op">.*</span> (</span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a>    <span class="fl">1.0</span> <span class="op">.-</span> sigma2 <span class="op">.*</span> data[<span class="op">:</span>, <span class="op">:</span>inside_share] <span class="op">.-</span> </span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a>    (<span class="fl">1.0</span> <span class="op">.-</span> sigma2) <span class="op">.*</span> data[<span class="op">:</span>, <span class="op">:</span>share]</span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a>) <span class="op">./</span> (<span class="fl">1.0</span> <span class="op">.-</span> sigma2);</span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a><span class="fu">describe</span>(data[<span class="op">:</span>, <span class="st">r"^own_elas"</span>], <span class="op">:</span>mean, <span class="op">:</span>std, <span class="op">:</span>median, <span class="op">:</span>min, <span class="op">:</span>max)</span>
<span id="cb12-17"><a href="#cb12-17" aria-hidden="true" tabindex="-1"></a>data_NIPPYO <span class="op">=</span> data[</span>
<span id="cb12-18"><a href="#cb12-18" aria-hidden="true" tabindex="-1"></a>    <span class="fu">in</span>(NIPPYOautoIDvec).(data[<span class="op">:</span>, <span class="op">:</span>NameID]), </span>
<span id="cb12-19"><a href="#cb12-19" aria-hidden="true" tabindex="-1"></a>    [<span class="op">:</span>year, <span class="op">:</span>share, <span class="op">:</span><span class="dt">Type</span>, <span class="op">:</span>inside_share, <span class="op">:</span>NameID, <span class="op">:</span>Sales, <span class="op">:</span>price, <span class="op">:</span>hppw, <span class="op">:</span>FuelEfficiency, <span class="op">:</span>size, <span class="op">:</span>Name]</span>
<span id="cb12-20"><a href="#cb12-20" aria-hidden="true" tabindex="-1"></a>    ];</span>
<span id="cb12-21"><a href="#cb12-21" aria-hidden="true" tabindex="-1"></a>data_NIPPYO[!, <span class="op">:</span>log_sales] <span class="op">=</span> <span class="fu">log</span>.(data_NIPPYO[<span class="op">:</span>, <span class="op">:</span>Sales]);</span>
<span id="cb12-22"><a href="#cb12-22" aria-hidden="true" tabindex="-1"></a>data_NIPPYO[!, <span class="op">:</span>log_price] <span class="op">=</span> <span class="fu">log</span>.(data_NIPPYO[<span class="op">:</span>, <span class="op">:</span>price]);</span>
<span id="cb12-23"><a href="#cb12-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-24"><a href="#cb12-24" aria-hidden="true" tabindex="-1"></a>dt_2016 <span class="op">=</span> data_NIPPYO[data_NIPPYO.year <span class="op">.==</span> <span class="fl">2016</span>, [<span class="op">:</span>price, <span class="op">:</span><span class="dt">Type</span>, <span class="op">:</span>share, <span class="op">:</span>inside_share, <span class="op">:</span>NameID, <span class="op">:</span>Name]]</span>
<span id="cb12-25"><a href="#cb12-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-26"><a href="#cb12-26" aria-hidden="true" tabindex="-1"></a>price <span class="op">=</span> dt_2016.price;</span>
<span id="cb12-27"><a href="#cb12-27" aria-hidden="true" tabindex="-1"></a>share <span class="op">=</span> dt_2016.share;</span>
<span id="cb12-28"><a href="#cb12-28" aria-hidden="true" tabindex="-1"></a>NameID <span class="op">=</span> dt_2016.NameID;</span>
<span id="cb12-29"><a href="#cb12-29" aria-hidden="true" tabindex="-1"></a>inside_share <span class="op">=</span> dt_2016.inside_share;</span>
<span id="cb12-30"><a href="#cb12-30" aria-hidden="true" tabindex="-1"></a>group <span class="op">=</span> dt_2016.<span class="dt">Type</span>;</span>
<span id="cb12-31"><a href="#cb12-31" aria-hidden="true" tabindex="-1"></a>own_elas <span class="op">=</span> alpha2 <span class="op">.*</span> price <span class="op">.*</span> (<span class="fl">1.0</span> <span class="op">.-</span> sigma2 <span class="op">.*</span> inside_share <span class="op">.-</span> (<span class="fl">1.0</span> <span class="op">.-</span> sigma2) <span class="op">.*</span> share) <span class="op">./</span> (<span class="fl">1.0</span> <span class="op">.-</span> sigma2);</span>
<span id="cb12-32"><a href="#cb12-32" aria-hidden="true" tabindex="-1"></a>cross_elas_othergroup <span class="op">=</span> (<span class="op">-</span><span class="fl">1.0</span>) <span class="op">.*</span> alpha2 <span class="op">.*</span> price <span class="op">.*</span> share;</span>
<span id="cb12-33"><a href="#cb12-33" aria-hidden="true" tabindex="-1"></a>J <span class="op">=</span> <span class="fu">length</span>(own_elas);</span>
<span id="cb12-34"><a href="#cb12-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-35"><a href="#cb12-35" aria-hidden="true" tabindex="-1"></a>cross_elas_othergroup <span class="op">=</span> <span class="fu">reduce</span>(hcat, [cross_elas_othergroup for j <span class="op">=</span> <span class="fl">1</span><span class="op">:</span>J]);</span>
<span id="cb12-36"><a href="#cb12-36" aria-hidden="true" tabindex="-1"></a>elas_mat[<span class="fu">diagind</span>(elas_mat)] <span class="op">=</span> own_elas;</span>
<span id="cb12-37"><a href="#cb12-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-38"><a href="#cb12-38" aria-hidden="true" tabindex="-1"></a>price_1_mat       <span class="op">=</span> <span class="fu">reduce</span>(hcat, [price for j <span class="op">=</span> <span class="fl">1</span><span class="op">:</span>J]);</span>
<span id="cb12-39"><a href="#cb12-39" aria-hidden="true" tabindex="-1"></a>share_1_mat       <span class="op">=</span> <span class="fu">reduce</span>(hcat, [share for j <span class="op">=</span> <span class="fl">1</span><span class="op">:</span>J]);</span>
<span id="cb12-40"><a href="#cb12-40" aria-hidden="true" tabindex="-1"></a>insideshare_1_mat <span class="op">=</span> <span class="fu">reduce</span>(hcat, [inside_share for j <span class="op">=</span> <span class="fl">1</span><span class="op">:</span>J]);</span>
<span id="cb12-41"><a href="#cb12-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-42"><a href="#cb12-42" aria-hidden="true" tabindex="-1"></a>cross_elas_samegroup <span class="op">=</span> (<span class="op">-</span><span class="fl">1.0</span>) <span class="op">.*</span> alpha2 <span class="op">.*</span> price_1_mat <span class="op">.*</span> (</span>
<span id="cb12-43"><a href="#cb12-43" aria-hidden="true" tabindex="-1"></a>    sigma2 <span class="op">.*</span> insideshare_1_mat <span class="op">.+</span> (<span class="fl">1.0</span> <span class="op">.-</span> sigma2) <span class="op">.*</span> share_1_mat</span>
<span id="cb12-44"><a href="#cb12-44" aria-hidden="true" tabindex="-1"></a>) <span class="op">./</span> (<span class="fl">1.0</span> <span class="op">.-</span> sigma2);</span>
<span id="cb12-45"><a href="#cb12-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-46"><a href="#cb12-46" aria-hidden="true" tabindex="-1"></a>temp_mat1 <span class="op">=</span> <span class="fu">reduce</span>(hcat, [group for j <span class="op">=</span> <span class="fl">1</span><span class="op">:</span>J]);</span>
<span id="cb12-47"><a href="#cb12-47" aria-hidden="true" tabindex="-1"></a>temp_mat2 <span class="op">=</span> <span class="fu">permutedims</span>(temp_mat1);</span>
<span id="cb12-48"><a href="#cb12-48" aria-hidden="true" tabindex="-1"></a>ind_same_group  <span class="op">=</span> (temp_mat1 <span class="op">.==</span> temp_mat2);</span>
<span id="cb12-49"><a href="#cb12-49" aria-hidden="true" tabindex="-1"></a>ind_other_group <span class="op">=</span> (temp_mat1 <span class="op">.!==</span> temp_mat2);</span>
<span id="cb12-50"><a href="#cb12-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-51"><a href="#cb12-51" aria-hidden="true" tabindex="-1"></a>elas_mat_nl <span class="op">=</span> cross_elas_samegroup <span class="op">.*</span> ind_same_group <span class="op">.+</span> cross_elas_othergroup <span class="op">.*</span> ind_other_group;</span>
<span id="cb12-52"><a href="#cb12-52" aria-hidden="true" tabindex="-1"></a>elas_mat_nl[<span class="fu">diagind</span>(elas_mat_nl)] <span class="op">=</span> own_elas;</span>
<span id="cb12-53"><a href="#cb12-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-54"><a href="#cb12-54" aria-hidden="true" tabindex="-1"></a>elas_mat_nl[[<span class="fl">12</span>, <span class="fl">13</span>, <span class="fl">10</span>, <span class="fl">1</span>], [<span class="fl">12</span>, <span class="fl">13</span>, <span class="fl">10</span>, <span class="fl">1</span>]]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="11">
<pre><code>4×4 Matrix{Float64}:
 -5.1197       0.0477573    0.0477573    0.00136172
  0.050713    -2.34881      0.050713     0.001446
  0.00615725   0.00615725  -2.80217      0.000175564
  0.00218614   0.00218614   0.00218614  -1.83296</code></pre>
</div>
</div>
</section>
<section id="section-4" class="level2" data-number="3.5">
<h2 data-number="3.5" class="anchored" data-anchor-id="section-4"><span class="header-section-number">3.5</span> 7</h2>
<section id="step-1" class="level3" data-number="3.5.1">
<h3 data-number="3.5.1" class="anchored" data-anchor-id="step-1"><span class="header-section-number">3.5.1</span> Step 1</h3>
<div class="cell" data-execution_count="11">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sort!</span>(data, [<span class="op">:</span>year, <span class="op">:</span>NameID]);</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>N <span class="op">=</span> <span class="fu">nrow</span>(data);</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>T <span class="op">=</span> <span class="fu">length</span>(<span class="fu">unique</span>(data.year));</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>X1 <span class="op">=</span> <span class="fu">hcat</span>(<span class="fu">repeat</span>([<span class="fl">1</span>], N), <span class="fu">Matrix</span>(data[<span class="op">:</span>, [<span class="op">:</span>price, <span class="op">:</span>FuelEfficiency, <span class="op">:</span>hppw, <span class="op">:</span>size]]));</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>X2 <span class="op">=</span> <span class="fu">hcat</span>(data.price, <span class="fu">repeat</span>([<span class="fl">1</span>], N), data.size);</span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>Z <span class="op">=</span> <span class="fu">hcat</span>(</span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">repeat</span>([<span class="fl">1</span>], N),</span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">Matrix</span>(data[<span class="op">:</span>, [<span class="op">:</span>FuelEfficiency, <span class="op">:</span>hppw, <span class="op">:</span>size]]),</span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">Matrix</span>(data[<span class="op">:</span>, <span class="st">r"^iv_GH</span><span class="sc">.*</span><span class="ch">(?</span><span class="st">&lt;!nest</span><span class="ch">)</span><span class="sc">$</span><span class="st">"])</span></span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a><span class="st">    );</span></span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a>Random<span class="sc">.</span><span class="st">seed!</span><span class="ch">(</span><span class="st">123</span><span class="ch">)</span><span class="st">;</span></span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a>Nsim <span class="op">=</span> <span class="fl">500</span>;</span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-14"><a href="#cb14-14" aria-hidden="true" tabindex="-1"></a>draw_vec <span class="op">=</span> <span class="fu">reduce</span>(hcat, [<span class="fu">randn</span>(<span class="fu">size</span>(X2, <span class="fl">2</span>)) for j <span class="op">=</span><span class="fl">1</span><span class="op">:</span>Nsim]);</span>
<span id="cb14-15"><a href="#cb14-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-16"><a href="#cb14-16" aria-hidden="true" tabindex="-1"></a>theta2 <span class="op">=</span> [<span class="fl">0.001</span>, <span class="fl">0.001</span>, <span class="fl">0.001</span>];</span>
<span id="cb14-17"><a href="#cb14-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-18"><a href="#cb14-18" aria-hidden="true" tabindex="-1"></a>marketindex <span class="op">=</span> data.year;</span>
<span id="cb14-19"><a href="#cb14-19" aria-hidden="true" tabindex="-1"></a>uniquemarketindex <span class="op">=</span> <span class="fu">sort</span>(<span class="fu">unique</span>(data.year));</span>
<span id="cb14-20"><a href="#cb14-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-21"><a href="#cb14-21" aria-hidden="true" tabindex="-1"></a>temp1 <span class="op">=</span> <span class="fu">reduce</span>(hcat, [uniquemarketindex for j <span class="op">=</span> <span class="fl">1</span><span class="op">:</span>N])<span class="ch">';</span></span>
<span id="cb14-22"><a href="#cb14-22" aria-hidden="true" tabindex="-1"></a>temp2 <span class="op">=</span> <span class="fu">reduce</span>(hcat, [data.year for j <span class="op">=</span> <span class="fl">1</span><span class="op">:</span>T]);</span>
<span id="cb14-23"><a href="#cb14-23" aria-hidden="true" tabindex="-1"></a>tempmat <span class="op">=</span> (temp1 <span class="op">.==</span> temp2);</span>
<span id="cb14-24"><a href="#cb14-24" aria-hidden="true" tabindex="-1"></a><span class="kw">mutable struct</span> datalist_struct</span>
<span id="cb14-25"><a href="#cb14-25" aria-hidden="true" tabindex="-1"></a>    X1<span class="op">::</span><span class="dt">Array{Float64,2}</span>;</span>
<span id="cb14-26"><a href="#cb14-26" aria-hidden="true" tabindex="-1"></a>    X2<span class="op">::</span><span class="dt">Array{Float64,2}</span>;</span>
<span id="cb14-27"><a href="#cb14-27" aria-hidden="true" tabindex="-1"></a>    Z<span class="op">::</span><span class="dt">Array{Float64,2}</span>;</span>
<span id="cb14-28"><a href="#cb14-28" aria-hidden="true" tabindex="-1"></a>    ShareVec<span class="op">::</span><span class="dt">Vector{Float64}</span>;</span>
<span id="cb14-29"><a href="#cb14-29" aria-hidden="true" tabindex="-1"></a>    marketindex<span class="op">::</span><span class="dt">Vector{Int64}</span>;</span>
<span id="cb14-30"><a href="#cb14-30" aria-hidden="true" tabindex="-1"></a>    logitshare<span class="op">::</span><span class="dt">Vector{Float64}</span>;</span>
<span id="cb14-31"><a href="#cb14-31" aria-hidden="true" tabindex="-1"></a>    draw_vec<span class="op">::</span><span class="dt">Array{Float64,2}</span>;</span>
<span id="cb14-32"><a href="#cb14-32" aria-hidden="true" tabindex="-1"></a>    tempmat<span class="op">::</span><span class="dt">BitMatrix</span></span>
<span id="cb14-33"><a href="#cb14-33" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb14-34"><a href="#cb14-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-35"><a href="#cb14-35" aria-hidden="true" tabindex="-1"></a><span class="kw">mutable struct</span> parameter_struct</span>
<span id="cb14-36"><a href="#cb14-36" aria-hidden="true" tabindex="-1"></a>    Nsim<span class="op">::</span><span class="dt">Int</span>;</span>
<span id="cb14-37"><a href="#cb14-37" aria-hidden="true" tabindex="-1"></a>    T<span class="op">::</span><span class="dt">Int</span>;</span>
<span id="cb14-38"><a href="#cb14-38" aria-hidden="true" tabindex="-1"></a>    N<span class="op">::</span><span class="dt">Int</span>;</span>
<span id="cb14-39"><a href="#cb14-39" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb14-40"><a href="#cb14-40" aria-hidden="true" tabindex="-1"></a>datalist <span class="op">=</span> <span class="fu">datalist_struct</span>(X1, X2, Z, data.share, marketindex, data.logit_share, draw_vec, tempmat);</span>
<span id="cb14-41"><a href="#cb14-41" aria-hidden="true" tabindex="-1"></a>parameter <span class="op">=</span> <span class="fu">parameter_struct</span>(Nsim, T, N);</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="step-2" class="level3" data-number="3.5.2">
<h3 data-number="3.5.2" class="anchored" data-anchor-id="step-2"><span class="header-section-number">3.5.2</span> Step 2</h3>
<div class="cell" data-execution_count="12">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">f_mktshare</span>(</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>        theta2,</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>        datalist<span class="op">::</span><span class="dt">datalist_struct</span>,</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>        parameter<span class="op">::</span><span class="dt">parameter_struct</span>,</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>        delta</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>    mu <span class="op">=</span> datalist.X2 <span class="op">*</span> <span class="fu">Diagonal</span>(theta2) <span class="op">*</span> datalist.draw_vec;</span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a>    delta_mu <span class="op">=</span> delta <span class="op">.*</span> <span class="fu">ones</span>((<span class="fl">1</span>, parameter.Nsim)) <span class="op">.+</span> mu;</span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a>    exp_delta_mu <span class="op">=</span> <span class="fu">exp</span>.(delta_mu <span class="op">.-</span> <span class="fu">maximum</span>(delta_mu));</span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a>    denom_outside <span class="op">=</span> <span class="fu">exp</span>.(<span class="fu">-maximum</span>(delta_mu));</span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb15-14"><a href="#cb15-14" aria-hidden="true" tabindex="-1"></a>    denom_temp <span class="op">=</span> (exp_delta_mu<span class="op">'</span> <span class="op">*</span> datalist.tempmat)<span class="ch">' .+ denom_outside;</span></span>
<span id="cb15-15"><a href="#cb15-15" aria-hidden="true" tabindex="-1"></a>    denom <span class="op">=</span> datalist.tempmat <span class="op">*</span> denom_temp;</span>
<span id="cb15-16"><a href="#cb15-16" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb15-17"><a href="#cb15-17" aria-hidden="true" tabindex="-1"></a>    s_jt_i <span class="op">=</span> exp_delta_mu <span class="op">./</span> denom;</span>
<span id="cb15-18"><a href="#cb15-18" aria-hidden="true" tabindex="-1"></a>    s_jt <span class="op">=</span> <span class="fu">vec</span>(<span class="fu">mean</span>(s_jt_i, dims <span class="op">=</span> <span class="fl">2</span>));</span>
<span id="cb15-19"><a href="#cb15-19" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb15-20"><a href="#cb15-20" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> s_jt</span>
<span id="cb15-21"><a href="#cb15-21" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb15-22"><a href="#cb15-22" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb15-23"><a href="#cb15-23" aria-hidden="true" tabindex="-1"></a><span class="pp">@time</span> <span class="fu">f_mktshare</span>([<span class="fl">0.01</span>, <span class="fl">0.01</span>, <span class="fl">0.01</span>], datalist, parameter, data.logit_share);</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  0.661574 seconds (2.42 M allocations: 182.417 MiB, 10.59% gc time, 93.63% compilation time)</code></pre>
</div>
</div>
</section>
<section id="step-3" class="level3" data-number="3.5.3">
<h3 data-number="3.5.3" class="anchored" data-anchor-id="step-3"><span class="header-section-number">3.5.3</span> Step 3</h3>
<div class="cell" data-execution_count="13">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">f_contraction</span>(</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>        theta2,</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>        datalist<span class="op">::</span><span class="dt">datalist_struct</span>,</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>        parameter<span class="op">::</span><span class="dt">parameter_struct</span>,</span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>        delta_ini</span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a>    tol <span class="op">=</span> <span class="fl">1e-11</span>;</span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a>    norm <span class="op">=</span> <span class="fl">1e+10</span></span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a>    delta_old <span class="op">=</span> delta_ini;</span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a>    exp_delta_old <span class="op">=</span> <span class="fu">exp</span>.(delta_old);</span>
<span id="cb17-13"><a href="#cb17-13" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb17-14"><a href="#cb17-14" aria-hidden="true" tabindex="-1"></a>    iter <span class="op">=</span> <span class="fl">0</span>;</span>
<span id="cb17-15"><a href="#cb17-15" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb17-16"><a href="#cb17-16" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> ((norm <span class="op">&gt;</span> tol) <span class="op">&amp;</span> (iter <span class="op">&lt;</span> <span class="fl">1000</span>))</span>
<span id="cb17-17"><a href="#cb17-17" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb17-18"><a href="#cb17-18" aria-hidden="true" tabindex="-1"></a><span class="co">#         print(iter, "\n")</span></span>
<span id="cb17-19"><a href="#cb17-19" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb17-20"><a href="#cb17-20" aria-hidden="true" tabindex="-1"></a>        pred_mkt_share <span class="op">=</span> <span class="fu">f_mktshare</span>(theta2, datalist, parameter, delta_old);</span>
<span id="cb17-21"><a href="#cb17-21" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb17-22"><a href="#cb17-22" aria-hidden="true" tabindex="-1"></a>        exp_delta <span class="op">=</span> exp_delta_old <span class="op">.*</span> datalist.ShareVec <span class="op">./</span> pred_mkt_share;</span>
<span id="cb17-23"><a href="#cb17-23" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb17-24"><a href="#cb17-24" aria-hidden="true" tabindex="-1"></a>        norm <span class="op">=</span> <span class="fu">maximum</span>(<span class="fu">abs</span>.(exp_delta <span class="op">.-</span> exp_delta_old));</span>
<span id="cb17-25"><a href="#cb17-25" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb17-26"><a href="#cb17-26" aria-hidden="true" tabindex="-1"></a>        exp_delta_old <span class="op">=</span> exp_delta;</span>
<span id="cb17-27"><a href="#cb17-27" aria-hidden="true" tabindex="-1"></a>        delta_old <span class="op">=</span> <span class="fu">log</span>.(exp_delta);</span>
<span id="cb17-28"><a href="#cb17-28" aria-hidden="true" tabindex="-1"></a>        iter <span class="op">+=</span> <span class="fl">1</span>;</span>
<span id="cb17-29"><a href="#cb17-29" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb17-30"><a href="#cb17-30" aria-hidden="true" tabindex="-1"></a>    <span class="cf">end</span></span>
<span id="cb17-31"><a href="#cb17-31" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb17-32"><a href="#cb17-32" aria-hidden="true" tabindex="-1"></a><span class="co">#     print(iter, "\n")</span></span>
<span id="cb17-33"><a href="#cb17-33" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb17-34"><a href="#cb17-34" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> delta_old;</span>
<span id="cb17-35"><a href="#cb17-35" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb17-36"><a href="#cb17-36" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb17-37"><a href="#cb17-37" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb17-38"><a href="#cb17-38" aria-hidden="true" tabindex="-1"></a><span class="pp">@time</span> <span class="fu">f_contraction</span>([<span class="fl">0.1</span>, <span class="fl">0.01</span>, <span class="fl">0.01</span>], datalist, parameter, data.logit_share);</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  0.322260 seconds (209.48 k allocations: 293.674 MiB, 15.77% gc time, 23.48% compilation time)</code></pre>
</div>
</div>
</section>
<section id="step-4" class="level3" data-number="3.5.4">
<h3 data-number="3.5.4" class="anchored" data-anchor-id="step-4"><span class="header-section-number">3.5.4</span> Step 4</h3>
<div class="cell" data-execution_count="14">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">f_GMMobj</span>(</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>        theta2,</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>        parameter<span class="op">::</span><span class="dt">parameter_struct</span>,</span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>        datalist<span class="op">::</span><span class="dt">datalist_struct</span>,</span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>        delta_ini<span class="op">::</span><span class="dt">Vector{Float64}</span></span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a><span class="co">#     delta_ini = delta_global;</span></span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a><span class="co">#     delta_ini = datalist.logitshare;</span></span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a>    delta <span class="op">=</span> <span class="fu">f_contraction</span>(theta2, datalist, parameter, delta_ini);</span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a><span class="co">#     global delta_global = delta</span></span>
<span id="cb19-12"><a href="#cb19-12" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb19-13"><a href="#cb19-13" aria-hidden="true" tabindex="-1"></a><span class="co">#     if (datalist.weight_mat_option == "2SLS") </span></span>
<span id="cb19-14"><a href="#cb19-14" aria-hidden="true" tabindex="-1"></a>        W <span class="op">=</span> <span class="fu">inv</span>(datalist.Z<span class="op">'</span> <span class="op">*</span> datalist.Z);</span>
<span id="cb19-15"><a href="#cb19-15" aria-hidden="true" tabindex="-1"></a><span class="co">#     elseif (datalist.weight_mat_option == "Ident")</span></span>
<span id="cb19-16"><a href="#cb19-16" aria-hidden="true" tabindex="-1"></a><span class="co">#         W = I(size(datalist.Z, 2));</span></span>
<span id="cb19-17"><a href="#cb19-17" aria-hidden="true" tabindex="-1"></a><span class="co">#     end</span></span>
<span id="cb19-18"><a href="#cb19-18" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb19-19"><a href="#cb19-19" aria-hidden="true" tabindex="-1"></a>    beta_hat <span class="op">=</span> (datalist.X1<span class="op">'</span> <span class="op">*</span> datalist.Z <span class="op">*</span> W <span class="op">*</span> datalist.Z<span class="op">'</span> <span class="op">*</span> datalist.X1) <span class="op">\</span> (datalist.X1<span class="op">'</span> <span class="op">*</span> datalist.Z <span class="op">*</span> W <span class="op">*</span> datalist.Z<span class="op">'</span> <span class="op">*</span> delta);</span>
<span id="cb19-20"><a href="#cb19-20" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb19-21"><a href="#cb19-21" aria-hidden="true" tabindex="-1"></a>    Xi <span class="op">=</span> delta <span class="op">-</span> datalist.X1 <span class="op">*</span> beta_hat;</span>
<span id="cb19-22"><a href="#cb19-22" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb19-23"><a href="#cb19-23" aria-hidden="true" tabindex="-1"></a>    output <span class="op">=</span> Xi<span class="op">'</span> <span class="op">*</span> datalist.Z <span class="op">*</span> W <span class="op">*</span> datalist.Z<span class="op">'</span> <span class="op">*</span> Xi</span>
<span id="cb19-24"><a href="#cb19-24" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb19-25"><a href="#cb19-25" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> output</span>
<span id="cb19-26"><a href="#cb19-26" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb19-27"><a href="#cb19-27" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span>    </span>
<span id="cb19-28"><a href="#cb19-28" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb19-29"><a href="#cb19-29" aria-hidden="true" tabindex="-1"></a>initial_x <span class="op">=</span> [<span class="fl">0.1</span>, <span class="fl">1.0</span>, <span class="fl">0.1</span>];</span>
<span id="cb19-30"><a href="#cb19-30" aria-hidden="true" tabindex="-1"></a>delta_ini <span class="op">=</span> <span class="fu">f_contraction</span>(initial_x, datalist, parameter, datalist.logitshare);</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="15">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>objFunc_for_Optim <span class="op">=</span> <span class="fu">TwiceDifferentiable</span>(</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>    x <span class="op">-&gt;</span> <span class="fu">f_GMMobj</span>(x, parameter, datalist, delta_ini),</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>    initial_x;</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>    autodiff <span class="op">=</span> <span class="op">:</span>forward</span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>    );</span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a><span class="pp">@time</span> gmm_res <span class="op">=</span> <span class="fu">optimize</span>(</span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>    objFunc_for_Optim,</span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a><span class="co">#     x -&gt; f_GMMobj(x, parameter, datalist, delta_ini),</span></span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a>    [<span class="fl">0.0</span>, <span class="fl">0.00</span>, <span class="fl">0.00</span>],</span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a>    [<span class="cn">Inf</span>, <span class="cn">Inf</span>, <span class="cn">Inf</span>],</span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a>    initial_x,</span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true" tabindex="-1"></a>    Optim.<span class="fu">Options</span>(show_trace <span class="op">=</span> <span class="cn">true</span>)</span>
<span id="cb20-13"><a href="#cb20-13" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="17">
<div class="cell-output cell-output-display" data-execution_count="16">
<pre><code> * Status: success

 * Candidate solution
    Final objective value:     1.720392e+02

 * Found with
    Algorithm:     Interior Point Newton

 * Convergence measures
    |x - x'|               = 0.00e+00 ≤ 0.0e+00
    |x - x'|/|x'|          = 0.00e+00 ≤ 0.0e+00
    |f(x) - f(x')|         = 0.00e+00 ≤ 0.0e+00
    |f(x) - f(x')|/|f(x')| = 0.00e+00 ≤ 0.0e+00
    |g(x)|                 = 9.27e+00 ≰ 1.0e-08

 * Work counters
    Seconds run:   376  (vs limit Inf)
    Iterations:    24
    f(x) calls:    218
    ∇f(x) calls:   218</code></pre>
</div>
</div>
<div class="cell" data-execution_count="18">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>gmm_res.minimizer</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="17">
<pre><code>3-element Vector{Float64}:
  0.28734533108108296
 15.767041571288186
  0.07564921477989821</code></pre>
</div>
</div>
<div class="cell" data-execution_count="19">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>W <span class="op">=</span> <span class="fu">inv</span>(datalist.Z<span class="op">'</span> <span class="op">*</span> datalist.Z);    </span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>delta <span class="op">=</span> <span class="fu">f_contraction</span>(gmm_res.minimizer, datalist, parameter, delta_ini);</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>beta_hat <span class="op">=</span> (datalist.X1<span class="op">'</span> <span class="op">*</span> datalist.Z <span class="op">*</span> W <span class="op">*</span> datalist.Z<span class="op">'</span> <span class="op">*</span> datalist.X1) <span class="op">\</span> (datalist.X1<span class="op">'</span> <span class="op">*</span> datalist.Z <span class="op">*</span> W <span class="op">*</span> datalist.Z<span class="op">'</span> <span class="op">*</span> delta);</span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>beta_hat</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="18">
<pre><code>5-element Vector{Float64}:
 -30.94355607145988
  -0.9028865616490973
   0.11090678367437005
   9.193592802875408
   0.28736901935168374</code></pre>
</div>
</div>
</section>
<section id="step-5" class="level3" data-number="3.5.5">
<h3 data-number="3.5.5" class="anchored" data-anchor-id="step-5"><span class="header-section-number">3.5.5</span> Step 5</h3>
<div class="cell" data-execution_count="20">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>Xi <span class="op">=</span> delta <span class="op">-</span> X1 <span class="op">*</span> beta_hat;</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>Omega_hat <span class="op">=</span> <span class="fu">reduce</span>(<span class="op">+</span>, Z[i,<span class="op">:</span>] <span class="op">*</span> Z[i,<span class="op">:</span>]<span class="ch">' .* Xi[i]^2 ./ N for i = 1:N);</span></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>Ddelta <span class="op">=</span> ForwardDiff.<span class="fu">jacobian</span>(x <span class="op">-&gt;</span> delta_ini <span class="op">=</span> <span class="fu">f_contraction</span>(x, datalist, parameter, delta), gmm_res.minimizer);</span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>G <span class="op">=</span> Z<span class="op">'</span> <span class="op">*</span> <span class="fu">hcat</span>(<span class="op">-</span> X1, Ddelta) <span class="op">./</span> N;</span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>AsyVarMat <span class="op">=</span> (G<span class="op">'</span> <span class="op">*</span> W <span class="op">*</span> G) <span class="op">\</span> G<span class="op">'</span> <span class="op">*</span> W <span class="op">*</span> Omega_hat <span class="op">*</span> W <span class="op">*</span> G <span class="op">*</span> <span class="fu">inv</span>(G<span class="op">'</span> <span class="op">*</span> W <span class="op">*</span> G);</span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a>Ase <span class="op">=</span> <span class="fu">sqrt</span>.(<span class="fu">diag</span>(AsyVarMat) <span class="op">./</span> N);</span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a><span class="fu">DataFrame</span>(</span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a>    Var <span class="op">=</span> [<span class="st">"Const"</span>, <span class="st">"Price"</span>, <span class="st">"Fuel Efficiency"</span>, <span class="st">"hppw"</span>, <span class="st">"size"</span>, <span class="st">"random_price"</span>, <span class="st">"random_constant"</span>, <span class="st">"random_size"</span>],</span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true" tabindex="-1"></a>    Est <span class="op">=</span> <span class="fu">vcat</span>(beta_hat, gmm_res.minimizer),</span>
<span id="cb26-11"><a href="#cb26-11" aria-hidden="true" tabindex="-1"></a>    se <span class="op">=</span> Ase</span>
<span id="cb26-12"><a href="#cb26-12" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="19">

<div><div style="float: left;"><span>8×3 DataFrame</span></div><div style="clear: both;"></div></div><div class="data-frame" style="overflow-x: scroll;"><table class="data-frame table table-sm table-striped" style="margin-bottom: 6px;"><thead><tr class="header"><th class="rowNumber" style="font-weight: bold; text-align: right;">Row</th><th style="text-align: left;">Var</th><th style="text-align: left;">Est</th><th style="text-align: left;">se</th></tr><tr class="subheader headerLastRow"><th class="rowNumber" style="font-weight: bold; text-align: right;"></th><th title="String" style="text-align: left;">String</th><th title="Float64" style="text-align: left;">Float64</th><th title="Float64" style="text-align: left;">Float64</th></tr></thead><tbody><tr><td class="rowNumber" style="font-weight: bold; text-align: right;">1</td><td style="text-align: left;">Const</td><td style="text-align: right;">-30.9436</td><td style="text-align: right;">15.5138</td></tr><tr><td class="rowNumber" style="font-weight: bold; text-align: right;">2</td><td style="text-align: left;">Price</td><td style="text-align: right;">-0.902887</td><td style="text-align: right;">0.433062</td></tr><tr><td class="rowNumber" style="font-weight: bold; text-align: right;">3</td><td style="text-align: left;">Fuel Efficiency</td><td style="text-align: right;">0.110907</td><td style="text-align: right;">0.0110571</td></tr><tr><td class="rowNumber" style="font-weight: bold; text-align: right;">4</td><td style="text-align: left;">hppw</td><td style="text-align: right;">9.19359</td><td style="text-align: right;">3.11364</td></tr><tr><td class="rowNumber" style="font-weight: bold; text-align: right;">5</td><td style="text-align: left;">size</td><td style="text-align: right;">0.287369</td><td style="text-align: right;">0.0517199</td></tr><tr><td class="rowNumber" style="font-weight: bold; text-align: right;">6</td><td style="text-align: left;">random_price</td><td style="text-align: right;">0.287345</td><td style="text-align: right;">0.432457</td></tr><tr><td class="rowNumber" style="font-weight: bold; text-align: right;">7</td><td style="text-align: left;">random_constant</td><td style="text-align: right;">15.767</td><td style="text-align: right;">101.968</td></tr><tr><td class="rowNumber" style="font-weight: bold; text-align: right;">8</td><td style="text-align: left;">random_size</td><td style="text-align: right;">0.0756492</td><td style="text-align: right;">0.290593</td></tr></tbody></table></div>
</div>
</div>
</section>
</section>
<section id="section-5" class="level2" data-number="3.6">
<h2 data-number="3.6" class="anchored" data-anchor-id="section-5"><span class="header-section-number">3.6</span> 8</h2>
<div class="cell" data-execution_count="21">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>mu <span class="op">=</span> X2 <span class="op">*</span> <span class="fu">Diagonal</span>(gmm_res.minimizer) <span class="op">*</span> draw_vec;</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>delta_mu <span class="op">=</span> delta <span class="op">.+</span> mu;</span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>exp_delta_mu <span class="op">=</span> <span class="fu">exp</span>.(delta_mu);</span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>denom_outside <span class="op">=</span> <span class="fu">exp</span>.(<span class="fl">0.0</span>);</span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>denom_temp <span class="op">=</span> (exp_delta_mu<span class="op">'</span> <span class="op">*</span> tempmat)<span class="ch">' .+ denom_outside;</span></span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a>denom <span class="op">=</span> tempmat <span class="op">*</span> denom_temp;</span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a>s_jt_i <span class="op">=</span> exp_delta_mu <span class="op">./</span> denom;</span>
<span id="cb27-9"><a href="#cb27-9" aria-hidden="true" tabindex="-1"></a>draw_for_price <span class="op">=</span> draw_vec[<span class="fl">1</span>,<span class="op">:</span>];</span>
<span id="cb27-10"><a href="#cb27-10" aria-hidden="true" tabindex="-1"></a>alpha_i <span class="op">=</span> beta_hat[<span class="fl">2</span>] <span class="op">.+</span> gmm_res.minimizer[<span class="fl">1</span>] <span class="op">.*</span> draw_for_price;</span>
<span id="cb27-11"><a href="#cb27-11" aria-hidden="true" tabindex="-1"></a>year <span class="op">=</span> <span class="fl">2016</span></span>
<span id="cb27-12"><a href="#cb27-12" aria-hidden="true" tabindex="-1"></a>J_t <span class="op">=</span> <span class="fu">sum</span>(data.year <span class="op">.==</span> year);</span>
<span id="cb27-13"><a href="#cb27-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-14"><a href="#cb27-14" aria-hidden="true" tabindex="-1"></a>ag_model_s_i <span class="op">=</span> s_jt_i[data.year <span class="op">.==</span> year, <span class="op">:</span>]</span>
<span id="cb27-15"><a href="#cb27-15" aria-hidden="true" tabindex="-1"></a>ag_model_s <span class="op">=</span> <span class="fu">mean</span>(ag_model_s_i, dims <span class="op">=</span> <span class="fl">2</span>);</span>
<span id="cb27-16"><a href="#cb27-16" aria-hidden="true" tabindex="-1"></a>price_t <span class="op">=</span> data.price[data.year <span class="op">.==</span> year];</span>
<span id="cb27-17"><a href="#cb27-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-18"><a href="#cb27-18" aria-hidden="true" tabindex="-1"></a>elasmat <span class="op">=</span> <span class="fu">zeros</span>((J_t, J_t));</span>
<span id="cb27-19"><a href="#cb27-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-20"><a href="#cb27-20" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> k <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span>J_t, j <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span>J_t</span>
<span id="cb27-21"><a href="#cb27-21" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (k <span class="op">!=</span> j)</span>
<span id="cb27-22"><a href="#cb27-22" aria-hidden="true" tabindex="-1"></a>        elasmat[k, j] <span class="op">=</span> (<span class="op">-</span><span class="fl">1.0</span>) <span class="op">.*</span> price_t[k] <span class="op">./</span> ag_model_s[j] <span class="op">*</span> <span class="fu">mean</span>(alpha_i <span class="op">.*</span> ag_model_s_i[j, <span class="op">:</span>] <span class="op">.*</span> ag_model_s_i[k, <span class="op">:</span>])</span>
<span id="cb27-23"><a href="#cb27-23" aria-hidden="true" tabindex="-1"></a>    <span class="cf">elseif</span> (k <span class="op">==</span> j)</span>
<span id="cb27-24"><a href="#cb27-24" aria-hidden="true" tabindex="-1"></a>        elasmat[k, j] <span class="op">=</span> price_t[j] <span class="op">./</span> ag_model_s[j] <span class="op">*</span> <span class="fu">mean</span>(alpha_i <span class="op">.*</span> ag_model_s_i[j, <span class="op">:</span>] <span class="op">.*</span> (<span class="fl">1.0</span> <span class="op">.-</span> ag_model_s_i[j, <span class="op">:</span>]))</span>
<span id="cb27-25"><a href="#cb27-25" aria-hidden="true" tabindex="-1"></a>    <span class="cf">end</span></span>
<span id="cb27-26"><a href="#cb27-26" aria-hidden="true" tabindex="-1"></a><span class="cf">end</span></span>
<span id="cb27-27"><a href="#cb27-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-28"><a href="#cb27-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-29"><a href="#cb27-29" aria-hidden="true" tabindex="-1"></a>elasmat[[<span class="fl">12</span>, <span class="fl">13</span>, <span class="fl">10</span>, <span class="fl">1</span>], [<span class="fl">12</span>, <span class="fl">13</span>, <span class="fl">10</span>, <span class="fl">1</span>]]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="20">
<pre><code>4×4 Matrix{Float64}:
 -1.10253      0.0451789    0.0435272    0.0324128
  0.0153236   -0.832714     0.0153759    0.0109914
  0.0184981    0.0192656   -1.12275      0.0138002
  0.00450168   0.00450075   0.00450998  -2.50034</code></pre>
</div>
</div>
</section>
<section id="section-6" class="level2" data-number="3.7">
<h2 data-number="3.7" class="anchored" data-anchor-id="section-6"><span class="header-section-number">3.7</span> 9</h2>
<div class="cell" data-execution_count="22">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">f_revenue</span>(</span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>        price_cand,</span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>        data,</span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>        datalist,</span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a>        parameter,</span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a>        delta,</span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a>        beta_hat,</span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a>        theta2,</span>
<span id="cb29-9"><a href="#cb29-9" aria-hidden="true" tabindex="-1"></a>        option</span>
<span id="cb29-10"><a href="#cb29-10" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb29-11"><a href="#cb29-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-12"><a href="#cb29-12" aria-hidden="true" tabindex="-1"></a>    mc_betado <span class="op">=</span> <span class="fl">3.198</span> <span class="op">*</span> (<span class="fl">1.0</span> <span class="op">-</span> <span class="fl">1.0</span> <span class="op">/</span> <span class="fu">abs</span>(<span class="op">-</span><span class="fl">2.16720791</span>));</span>
<span id="cb29-13"><a href="#cb29-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-14"><a href="#cb29-14" aria-hidden="true" tabindex="-1"></a>    tempprice <span class="op">=</span> data.price[<span class="op">:</span>];</span>
<span id="cb29-15"><a href="#cb29-15" aria-hidden="true" tabindex="-1"></a>    tempprice[(data.NameID <span class="op">.==</span> <span class="fl">197</span>) <span class="op">.&amp;</span> (data.year <span class="op">.==</span> <span class="fl">2016</span>)] <span class="op">.=</span> price_cand;</span>
<span id="cb29-16"><a href="#cb29-16" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb29-17"><a href="#cb29-17" aria-hidden="true" tabindex="-1"></a>    X1_new <span class="op">=</span> datalist.X1[<span class="op">:</span>,<span class="op">:</span>];</span>
<span id="cb29-18"><a href="#cb29-18" aria-hidden="true" tabindex="-1"></a>    X2_new <span class="op">=</span> datalist.X2[<span class="op">:</span>,<span class="op">:</span>];</span>
<span id="cb29-19"><a href="#cb29-19" aria-hidden="true" tabindex="-1"></a>    X1_new[<span class="op">:</span>, <span class="fl">2</span>] <span class="op">=</span> tempprice;</span>
<span id="cb29-20"><a href="#cb29-20" aria-hidden="true" tabindex="-1"></a>    X2_new[<span class="op">:</span>, <span class="fl">1</span>] <span class="op">=</span> tempprice;</span>
<span id="cb29-21"><a href="#cb29-21" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb29-22"><a href="#cb29-22" aria-hidden="true" tabindex="-1"></a>    org_xi <span class="op">=</span> delta <span class="op">.-</span> datalist.X1 <span class="op">*</span> beta_hat;</span>
<span id="cb29-23"><a href="#cb29-23" aria-hidden="true" tabindex="-1"></a>    new_delta <span class="op">=</span> X1_new <span class="op">*</span> beta_hat <span class="op">.+</span> org_xi;</span>
<span id="cb29-24"><a href="#cb29-24" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb29-25"><a href="#cb29-25" aria-hidden="true" tabindex="-1"></a>    datalist_temp <span class="op">=</span> <span class="fu">datalist_struct</span>(</span>
<span id="cb29-26"><a href="#cb29-26" aria-hidden="true" tabindex="-1"></a>        X1_new, X2_new, datalist.Z, data.share, datalist.marketindex, </span>
<span id="cb29-27"><a href="#cb29-27" aria-hidden="true" tabindex="-1"></a>        data.logit_share, datalist.draw_vec, datalist.tempmat</span>
<span id="cb29-28"><a href="#cb29-28" aria-hidden="true" tabindex="-1"></a>        );</span>
<span id="cb29-29"><a href="#cb29-29" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb29-30"><a href="#cb29-30" aria-hidden="true" tabindex="-1"></a>    mktshare <span class="op">=</span> <span class="fu">f_mktshare</span>(theta2, datalist_temp, parameter, new_delta);</span>
<span id="cb29-31"><a href="#cb29-31" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb29-32"><a href="#cb29-32" aria-hidden="true" tabindex="-1"></a>    quant <span class="op">=</span> mktshare <span class="op">.*</span> data.HH;</span>
<span id="cb29-33"><a href="#cb29-33" aria-hidden="true" tabindex="-1"></a>    revenue <span class="op">=</span> tempprice <span class="op">.*</span> quant;</span>
<span id="cb29-34"><a href="#cb29-34" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb29-35"><a href="#cb29-35" aria-hidden="true" tabindex="-1"></a>    revenuevec  <span class="op">=</span> revenue[(data.NameID <span class="op">.==</span> <span class="fl">197</span>) <span class="op">.&amp;</span> (data.year <span class="op">.==</span> <span class="fl">2016</span>)];</span>
<span id="cb29-36"><a href="#cb29-36" aria-hidden="true" tabindex="-1"></a>    revenuevec2 <span class="op">=</span> <span class="fu">sum</span>(revenue[<span class="fu">in</span>(NIPPYOautoIDvec).(data[<span class="op">:</span>, <span class="op">:</span>NameID]) <span class="op">.&amp;</span> (data.year <span class="op">.==</span> <span class="fl">2016</span>)]);</span>
<span id="cb29-37"><a href="#cb29-37" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb29-38"><a href="#cb29-38" aria-hidden="true" tabindex="-1"></a>    pivec  <span class="op">=</span> revenuevec  <span class="op">.-</span> mc_betado <span class="op">.*</span> quant[(data.NameID <span class="op">.==</span> <span class="fl">197</span>) <span class="op">.&amp;</span> (data.year <span class="op">.==</span> <span class="fl">2016</span>)];</span>
<span id="cb29-39"><a href="#cb29-39" aria-hidden="true" tabindex="-1"></a>    pivec2 <span class="op">=</span> revenuevec2 <span class="op">.-</span> mc_betado <span class="op">.*</span> quant[(data.NameID <span class="op">.==</span> <span class="fl">197</span>) <span class="op">.&amp;</span> (data.year <span class="op">.==</span> <span class="fl">2016</span>)];</span>
<span id="cb29-40"><a href="#cb29-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-41"><a href="#cb29-41" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> option <span class="op">==</span> <span class="st">"own"</span></span>
<span id="cb29-42"><a href="#cb29-42" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span>(revenuevec[<span class="fl">1</span>])</span>
<span id="cb29-43"><a href="#cb29-43" aria-hidden="true" tabindex="-1"></a>    <span class="cf">elseif</span> option <span class="op">==</span> <span class="st">"total"</span></span>
<span id="cb29-44"><a href="#cb29-44" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span>(revenuevec2[<span class="fl">1</span>])</span>
<span id="cb29-45"><a href="#cb29-45" aria-hidden="true" tabindex="-1"></a>    <span class="cf">elseif</span> option <span class="op">==</span> <span class="st">"ownpi"</span></span>
<span id="cb29-46"><a href="#cb29-46" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span>(pivec[<span class="fl">1</span>])</span>
<span id="cb29-47"><a href="#cb29-47" aria-hidden="true" tabindex="-1"></a>    <span class="cf">elseif</span> option <span class="op">==</span> <span class="st">"totalpi"</span></span>
<span id="cb29-48"><a href="#cb29-48" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span>(pivec2[<span class="fl">1</span>])</span>
<span id="cb29-49"><a href="#cb29-49" aria-hidden="true" tabindex="-1"></a>    <span class="cf">end</span></span>
<span id="cb29-50"><a href="#cb29-50" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb29-51"><a href="#cb29-51" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb29-52"><a href="#cb29-52" aria-hidden="true" tabindex="-1"></a>price_range <span class="op">=</span> <span class="fu">range</span>(<span class="fl">1.8</span>, <span class="fl">4.0</span>, step <span class="op">=</span> <span class="fl">0.05</span>);</span>
<span id="cb29-53"><a href="#cb29-53" aria-hidden="true" tabindex="-1"></a>ownpi_res <span class="op">=</span> <span class="fu">f_revenue</span>.(</span>
<span id="cb29-54"><a href="#cb29-54" aria-hidden="true" tabindex="-1"></a>    price_range, </span>
<span id="cb29-55"><a href="#cb29-55" aria-hidden="true" tabindex="-1"></a>    <span class="fu">Ref</span>(data), <span class="fu">Ref</span>(datalist), <span class="fu">Ref</span>(parameter), <span class="fu">Ref</span>(delta), <span class="fu">Ref</span>(beta_hat), <span class="fu">Ref</span>(gmm_res.minimizer),</span>
<span id="cb29-56"><a href="#cb29-56" aria-hidden="true" tabindex="-1"></a>    <span class="st">"ownpi"</span></span>
<span id="cb29-57"><a href="#cb29-57" aria-hidden="true" tabindex="-1"></a>);</span>
<span id="cb29-58"><a href="#cb29-58" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(price_range, ownpi_res, legend <span class="op">=</span> <span class="cn">false</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="21">
<!--?xml version="1.0" encoding="utf-8"?-->
<svg xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" width="672" height="480" viewbox="0 0 2688 1920">
<defs>
  <clippath id="clip640">
    <rect x="0" y="0" width="2688" height="1920"></rect>
  </clippath>
</defs>
<path clip-path="url(#clip640)" d="M0 1920 L2688 1920 L2688 0 L0 0  Z" fill="#ffffff" fill-rule="evenodd" fill-opacity="1"></path>
<defs>
  <clippath id="clip641">
    <rect x="537" y="0" width="1883" height="1883"></rect>
  </clippath>
</defs>
<path clip-path="url(#clip640)" d="M280.311 1800.78 L2640.76 1800.78 L2640.76 47.2441 L280.311 47.2441  Z" fill="#ffffff" fill-rule="evenodd" fill-opacity="1"></path>
<defs>
  <clippath id="clip642">
    <rect x="280" y="47" width="2361" height="1755"></rect>
  </clippath>
</defs>
<polyline clip-path="url(#clip642)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="549.556,1800.78 549.556,47.2441 "></polyline>
<polyline clip-path="url(#clip642)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="1055.65,1800.78 1055.65,47.2441 "></polyline>
<polyline clip-path="url(#clip642)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="1561.75,1800.78 1561.75,47.2441 "></polyline>
<polyline clip-path="url(#clip642)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="2067.85,1800.78 2067.85,47.2441 "></polyline>
<polyline clip-path="url(#clip642)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="2573.95,1800.78 2573.95,47.2441 "></polyline>
<polyline clip-path="url(#clip640)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="280.311,1800.78 2640.76,1800.78 "></polyline>
<polyline clip-path="url(#clip640)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="549.556,1800.78 549.556,1781.88 "></polyline>
<polyline clip-path="url(#clip640)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="1055.65,1800.78 1055.65,1781.88 "></polyline>
<polyline clip-path="url(#clip640)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="1561.75,1800.78 1561.75,1781.88 "></polyline>
<polyline clip-path="url(#clip640)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="2067.85,1800.78 2067.85,1781.88 "></polyline>
<polyline clip-path="url(#clip640)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="2573.95,1800.78 2573.95,1781.88 "></polyline>
<path clip-path="url(#clip640)" d="M520.794 1861.55 L537.113 1861.55 L537.113 1865.48 L515.169 1865.48 L515.169 1861.55 Q517.831 1858.79 522.414 1854.16 Q527.021 1849.51 528.201 1848.17 Q530.447 1845.65 531.326 1843.91 Q532.229 1842.15 532.229 1840.46 Q532.229 1837.71 530.285 1835.97 Q528.363 1834.23 525.262 1834.23 Q523.063 1834.23 520.609 1835 Q518.178 1835.76 515.401 1837.31 L515.401 1832.59 Q518.225 1831.46 520.678 1830.88 Q523.132 1830.3 525.169 1830.3 Q530.539 1830.3 533.734 1832.98 Q536.928 1835.67 536.928 1840.16 Q536.928 1842.29 536.118 1844.21 Q535.331 1846.11 533.225 1848.7 Q532.646 1849.37 529.544 1852.59 Q526.442 1855.78 520.794 1861.55 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip640)" d="M546.928 1859.6 L551.812 1859.6 L551.812 1865.48 L546.928 1865.48 L546.928 1859.6 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip640)" d="M571.998 1834 Q568.386 1834 566.558 1837.57 Q564.752 1841.11 564.752 1848.24 Q564.752 1855.34 566.558 1858.91 Q568.386 1862.45 571.998 1862.45 Q575.632 1862.45 577.437 1858.91 Q579.266 1855.34 579.266 1848.24 Q579.266 1841.11 577.437 1837.57 Q575.632 1834 571.998 1834 M571.998 1830.3 Q577.808 1830.3 580.863 1834.9 Q583.942 1839.49 583.942 1848.24 Q583.942 1856.96 580.863 1861.57 Q577.808 1866.15 571.998 1866.15 Q566.187 1866.15 563.109 1861.57 Q560.053 1856.96 560.053 1848.24 Q560.053 1839.49 563.109 1834.9 Q566.187 1830.3 571.998 1830.3 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip640)" d="M1027.39 1861.55 L1043.71 1861.55 L1043.71 1865.48 L1021.77 1865.48 L1021.77 1861.55 Q1024.43 1858.79 1029.01 1854.16 Q1033.62 1849.51 1034.8 1848.17 Q1037.04 1845.65 1037.92 1843.91 Q1038.83 1842.15 1038.83 1840.46 Q1038.83 1837.71 1036.88 1835.97 Q1034.96 1834.23 1031.86 1834.23 Q1029.66 1834.23 1027.21 1835 Q1024.77 1835.76 1022 1837.31 L1022 1832.59 Q1024.82 1831.46 1027.27 1830.88 Q1029.73 1830.3 1031.77 1830.3 Q1037.14 1830.3 1040.33 1832.98 Q1043.52 1835.67 1043.52 1840.16 Q1043.52 1842.29 1042.71 1844.21 Q1041.93 1846.11 1039.82 1848.7 Q1039.24 1849.37 1036.14 1852.59 Q1033.04 1855.78 1027.39 1861.55 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip640)" d="M1053.52 1859.6 L1058.41 1859.6 L1058.41 1865.48 L1053.52 1865.48 L1053.52 1859.6 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip640)" d="M1068.64 1830.92 L1087 1830.92 L1087 1834.86 L1072.92 1834.86 L1072.92 1843.33 Q1073.94 1842.98 1074.96 1842.82 Q1075.98 1842.64 1077 1842.64 Q1082.78 1842.64 1086.16 1845.81 Q1089.54 1848.98 1089.54 1854.4 Q1089.54 1859.97 1086.07 1863.08 Q1082.6 1866.15 1076.28 1866.15 Q1074.1 1866.15 1071.83 1865.78 Q1069.59 1865.41 1067.18 1864.67 L1067.18 1859.97 Q1069.27 1861.11 1071.49 1861.66 Q1073.71 1862.22 1076.19 1862.22 Q1080.19 1862.22 1082.53 1860.11 Q1084.87 1858.01 1084.87 1854.4 Q1084.87 1850.78 1082.53 1848.68 Q1080.19 1846.57 1076.19 1846.57 Q1074.31 1846.57 1072.44 1846.99 Q1070.58 1847.4 1068.64 1848.28 L1068.64 1830.92 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip640)" d="M1543.06 1846.85 Q1546.42 1847.57 1548.29 1849.84 Q1550.19 1852.1 1550.19 1855.44 Q1550.19 1860.55 1546.67 1863.35 Q1543.15 1866.15 1536.67 1866.15 Q1534.5 1866.15 1532.18 1865.71 Q1529.89 1865.3 1527.44 1864.44 L1527.44 1859.93 Q1529.38 1861.06 1531.7 1861.64 Q1534.01 1862.22 1536.53 1862.22 Q1540.93 1862.22 1543.22 1860.48 Q1545.54 1858.75 1545.54 1855.44 Q1545.54 1852.38 1543.39 1850.67 Q1541.26 1848.93 1537.44 1848.93 L1533.41 1848.93 L1533.41 1845.09 L1537.62 1845.09 Q1541.07 1845.09 1542.9 1843.72 Q1544.73 1842.34 1544.73 1839.74 Q1544.73 1837.08 1542.83 1835.67 Q1540.95 1834.23 1537.44 1834.23 Q1535.51 1834.23 1533.32 1834.65 Q1531.12 1835.07 1528.48 1835.95 L1528.48 1831.78 Q1531.14 1831.04 1533.45 1830.67 Q1535.79 1830.3 1537.85 1830.3 Q1543.18 1830.3 1546.28 1832.73 Q1549.38 1835.14 1549.38 1839.26 Q1549.38 1842.13 1547.74 1844.12 Q1546.09 1846.09 1543.06 1846.85 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip640)" d="M1559.06 1859.6 L1563.94 1859.6 L1563.94 1865.48 L1559.06 1865.48 L1559.06 1859.6 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip640)" d="M1584.13 1834 Q1580.51 1834 1578.69 1837.57 Q1576.88 1841.11 1576.88 1848.24 Q1576.88 1855.34 1578.69 1858.91 Q1580.51 1862.45 1584.13 1862.45 Q1587.76 1862.45 1589.57 1858.91 Q1591.39 1855.34 1591.39 1848.24 Q1591.39 1841.11 1589.57 1837.57 Q1587.76 1834 1584.13 1834 M1584.13 1830.3 Q1589.94 1830.3 1592.99 1834.9 Q1596.07 1839.49 1596.07 1848.24 Q1596.07 1856.96 1592.99 1861.57 Q1589.94 1866.15 1584.13 1866.15 Q1578.32 1866.15 1575.24 1861.57 Q1572.18 1856.96 1572.18 1848.24 Q1572.18 1839.49 1575.24 1834.9 Q1578.32 1830.3 1584.13 1830.3 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip640)" d="M2049.66 1846.85 Q2053.01 1847.57 2054.89 1849.84 Q2056.79 1852.1 2056.79 1855.44 Q2056.79 1860.55 2053.27 1863.35 Q2049.75 1866.15 2043.27 1866.15 Q2041.09 1866.15 2038.78 1865.71 Q2036.49 1865.3 2034.03 1864.44 L2034.03 1859.93 Q2035.98 1861.06 2038.29 1861.64 Q2040.61 1862.22 2043.13 1862.22 Q2047.53 1862.22 2049.82 1860.48 Q2052.13 1858.75 2052.13 1855.44 Q2052.13 1852.38 2049.98 1850.67 Q2047.85 1848.93 2044.03 1848.93 L2040 1848.93 L2040 1845.09 L2044.22 1845.09 Q2047.67 1845.09 2049.5 1843.72 Q2051.32 1842.34 2051.32 1839.74 Q2051.32 1837.08 2049.43 1835.67 Q2047.55 1834.23 2044.03 1834.23 Q2042.11 1834.23 2039.91 1834.65 Q2037.71 1835.07 2035.07 1835.95 L2035.07 1831.78 Q2037.74 1831.04 2040.05 1830.67 Q2042.39 1830.3 2044.45 1830.3 Q2049.77 1830.3 2052.88 1832.73 Q2055.98 1835.14 2055.98 1839.26 Q2055.98 1842.13 2054.33 1844.12 Q2052.69 1846.09 2049.66 1846.85 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip640)" d="M2065.65 1859.6 L2070.54 1859.6 L2070.54 1865.48 L2065.65 1865.48 L2065.65 1859.6 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip640)" d="M2080.77 1830.92 L2099.13 1830.92 L2099.13 1834.86 L2085.05 1834.86 L2085.05 1843.33 Q2086.07 1842.98 2087.09 1842.82 Q2088.11 1842.64 2089.13 1842.64 Q2094.91 1842.64 2098.29 1845.81 Q2101.67 1848.98 2101.67 1854.4 Q2101.67 1859.97 2098.2 1863.08 Q2094.73 1866.15 2088.41 1866.15 Q2086.23 1866.15 2083.96 1865.78 Q2081.72 1865.41 2079.31 1864.67 L2079.31 1859.97 Q2081.39 1861.11 2083.62 1861.66 Q2085.84 1862.22 2088.31 1862.22 Q2092.32 1862.22 2094.66 1860.11 Q2097 1858.01 2097 1854.4 Q2097 1850.78 2094.66 1848.68 Q2092.32 1846.57 2088.31 1846.57 Q2086.44 1846.57 2084.56 1846.99 Q2082.71 1847.4 2080.77 1848.28 L2080.77 1830.92 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip640)" d="M2554.59 1835 L2542.78 1853.45 L2554.59 1853.45 L2554.59 1835 M2553.36 1830.92 L2559.24 1830.92 L2559.24 1853.45 L2564.17 1853.45 L2564.17 1857.34 L2559.24 1857.34 L2559.24 1865.48 L2554.59 1865.48 L2554.59 1857.34 L2538.99 1857.34 L2538.99 1852.82 L2553.36 1830.92 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip640)" d="M2571.9 1859.6 L2576.79 1859.6 L2576.79 1865.48 L2571.9 1865.48 L2571.9 1859.6 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip640)" d="M2596.97 1834 Q2593.36 1834 2591.53 1837.57 Q2589.73 1841.11 2589.73 1848.24 Q2589.73 1855.34 2591.53 1858.91 Q2593.36 1862.45 2596.97 1862.45 Q2600.61 1862.45 2602.41 1858.91 Q2604.24 1855.34 2604.24 1848.24 Q2604.24 1841.11 2602.41 1837.57 Q2600.61 1834 2596.97 1834 M2596.97 1830.3 Q2602.78 1830.3 2605.84 1834.9 Q2608.92 1839.49 2608.92 1848.24 Q2608.92 1856.96 2605.84 1861.57 Q2602.78 1866.15 2596.97 1866.15 Q2591.16 1866.15 2588.08 1861.57 Q2585.03 1856.96 2585.03 1848.24 Q2585.03 1839.49 2588.08 1834.9 Q2591.16 1830.3 2596.97 1830.3 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><polyline clip-path="url(#clip642)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="280.311,1748.22 2640.76,1748.22 "></polyline>
<polyline clip-path="url(#clip642)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="280.311,1409.41 2640.76,1409.41 "></polyline>
<polyline clip-path="url(#clip642)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="280.311,1070.6 2640.76,1070.6 "></polyline>
<polyline clip-path="url(#clip642)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="280.311,731.793 2640.76,731.793 "></polyline>
<polyline clip-path="url(#clip642)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="280.311,392.983 2640.76,392.983 "></polyline>
<polyline clip-path="url(#clip642)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="280.311,54.1726 2640.76,54.1726 "></polyline>
<polyline clip-path="url(#clip640)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="280.311,1800.78 280.311,47.2441 "></polyline>
<polyline clip-path="url(#clip640)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="280.311,1748.22 299.209,1748.22 "></polyline>
<polyline clip-path="url(#clip640)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="280.311,1409.41 299.209,1409.41 "></polyline>
<polyline clip-path="url(#clip640)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="280.311,1070.6 299.209,1070.6 "></polyline>
<polyline clip-path="url(#clip640)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="280.311,731.793 299.209,731.793 "></polyline>
<polyline clip-path="url(#clip640)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="280.311,392.983 299.209,392.983 "></polyline>
<polyline clip-path="url(#clip640)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="280.311,54.1726 299.209,54.1726 "></polyline>
<path clip-path="url(#clip640)" d="M53.1169 1768.01 L60.7558 1768.01 L60.7558 1741.65 L52.4456 1743.32 L52.4456 1739.06 L60.7095 1737.39 L65.3854 1737.39 L65.3854 1768.01 L73.0242 1768.01 L73.0242 1771.95 L53.1169 1771.95 L53.1169 1768.01 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip640)" d="M82.4686 1766.07 L87.3528 1766.07 L87.3528 1771.95 L82.4686 1771.95 L82.4686 1766.07 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip640)" d="M107.538 1740.47 Q103.927 1740.47 102.098 1744.03 Q100.293 1747.58 100.293 1754.7 Q100.293 1761.81 102.098 1765.38 Q103.927 1768.92 107.538 1768.92 Q111.172 1768.92 112.978 1765.38 Q114.806 1761.81 114.806 1754.7 Q114.806 1747.58 112.978 1744.03 Q111.172 1740.47 107.538 1740.47 M107.538 1736.77 Q113.348 1736.77 116.404 1741.37 Q119.482 1745.95 119.482 1754.7 Q119.482 1763.43 116.404 1768.04 Q113.348 1772.62 107.538 1772.62 Q101.728 1772.62 98.6491 1768.04 Q95.5935 1763.43 95.5935 1754.7 Q95.5935 1745.95 98.6491 1741.37 Q101.728 1736.77 107.538 1736.77 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip640)" d="M155.871 1746.49 L145.292 1757.11 L155.871 1767.69 L153.116 1770.49 L142.491 1759.87 L131.866 1770.49 L129.135 1767.69 L139.691 1757.11 L129.135 1746.49 L131.866 1743.69 L142.491 1754.31 L153.116 1743.69 L155.871 1746.49 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip640)" d="M168.232 1768.01 L175.871 1768.01 L175.871 1741.65 L167.561 1743.32 L167.561 1739.06 L175.825 1737.39 L180.5 1737.39 L180.5 1768.01 L188.139 1768.01 L188.139 1771.95 L168.232 1771.95 L168.232 1768.01 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip640)" d="M207.584 1740.47 Q203.973 1740.47 202.144 1744.03 Q200.338 1747.58 200.338 1754.7 Q200.338 1761.81 202.144 1765.38 Q203.973 1768.92 207.584 1768.92 Q211.218 1768.92 213.023 1765.38 Q214.852 1761.81 214.852 1754.7 Q214.852 1747.58 213.023 1744.03 Q211.218 1740.47 207.584 1740.47 M207.584 1736.77 Q213.394 1736.77 216.449 1741.37 Q219.528 1745.95 219.528 1754.7 Q219.528 1763.43 216.449 1768.04 Q213.394 1772.62 207.584 1772.62 Q201.774 1772.62 198.695 1768.04 Q195.639 1763.43 195.639 1754.7 Q195.639 1745.95 198.695 1741.37 Q201.774 1736.77 207.584 1736.77 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip640)" d="M232.205 1719.77 L222.613 1734.76 L232.205 1734.76 L232.205 1719.77 M231.208 1716.46 L235.985 1716.46 L235.985 1734.76 L239.991 1734.76 L239.991 1737.92 L235.985 1737.92 L235.985 1744.54 L232.205 1744.54 L232.205 1737.92 L219.528 1737.92 L219.528 1734.25 L231.208 1716.46 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip640)" d="M56.3345 1429.2 L72.6539 1429.2 L72.6539 1433.14 L50.7095 1433.14 L50.7095 1429.2 Q53.3715 1426.45 57.9549 1421.82 Q62.5613 1417.17 63.7419 1415.83 Q65.9872 1413.3 66.8668 1411.57 Q67.7696 1409.81 67.7696 1408.12 Q67.7696 1405.36 65.8252 1403.63 Q63.9039 1401.89 60.8021 1401.89 Q58.603 1401.89 56.1493 1402.65 Q53.7188 1403.42 50.941 1404.97 L50.941 1400.25 Q53.7651 1399.11 56.2188 1398.53 Q58.6724 1397.96 60.7095 1397.96 Q66.0798 1397.96 69.2742 1400.64 Q72.4687 1403.33 72.4687 1407.82 Q72.4687 1409.95 71.6585 1411.87 Q70.8715 1413.77 68.765 1416.36 Q68.1863 1417.03 65.0845 1420.25 Q61.9826 1423.44 56.3345 1429.2 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip640)" d="M82.4686 1427.26 L87.3528 1427.26 L87.3528 1433.14 L82.4686 1433.14 L82.4686 1427.26 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip640)" d="M107.538 1401.66 Q103.927 1401.66 102.098 1405.22 Q100.293 1408.77 100.293 1415.89 Q100.293 1423 102.098 1426.57 Q103.927 1430.11 107.538 1430.11 Q111.172 1430.11 112.978 1426.57 Q114.806 1423 114.806 1415.89 Q114.806 1408.77 112.978 1405.22 Q111.172 1401.66 107.538 1401.66 M107.538 1397.96 Q113.348 1397.96 116.404 1402.56 Q119.482 1407.14 119.482 1415.89 Q119.482 1424.62 116.404 1429.23 Q113.348 1433.81 107.538 1433.81 Q101.728 1433.81 98.6491 1429.23 Q95.5935 1424.62 95.5935 1415.89 Q95.5935 1407.14 98.6491 1402.56 Q101.728 1397.96 107.538 1397.96 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip640)" d="M155.871 1407.68 L145.292 1418.3 L155.871 1428.88 L153.116 1431.68 L142.491 1421.06 L131.866 1431.68 L129.135 1428.88 L139.691 1418.3 L129.135 1407.68 L131.866 1404.88 L142.491 1415.5 L153.116 1404.88 L155.871 1407.68 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip640)" d="M168.232 1429.2 L175.871 1429.2 L175.871 1402.84 L167.561 1404.51 L167.561 1400.25 L175.825 1398.58 L180.5 1398.58 L180.5 1429.2 L188.139 1429.2 L188.139 1433.14 L168.232 1433.14 L168.232 1429.2 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip640)" d="M207.584 1401.66 Q203.973 1401.66 202.144 1405.22 Q200.338 1408.77 200.338 1415.89 Q200.338 1423 202.144 1426.57 Q203.973 1430.11 207.584 1430.11 Q211.218 1430.11 213.023 1426.57 Q214.852 1423 214.852 1415.89 Q214.852 1408.77 213.023 1405.22 Q211.218 1401.66 207.584 1401.66 M207.584 1397.96 Q213.394 1397.96 216.449 1402.56 Q219.528 1407.14 219.528 1415.89 Q219.528 1424.62 216.449 1429.23 Q213.394 1433.81 207.584 1433.81 Q201.774 1433.81 198.695 1429.23 Q195.639 1424.62 195.639 1415.89 Q195.639 1407.14 198.695 1402.56 Q201.774 1397.96 207.584 1397.96 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip640)" d="M232.205 1380.96 L222.613 1395.95 L232.205 1395.95 L232.205 1380.96 M231.208 1377.65 L235.985 1377.65 L235.985 1395.95 L239.991 1395.95 L239.991 1399.11 L235.985 1399.11 L235.985 1405.73 L232.205 1405.73 L232.205 1399.11 L219.528 1399.11 L219.528 1395.44 L231.208 1377.65 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip640)" d="M66.4733 1075.7 Q69.8298 1076.41 71.7048 1078.68 Q73.6029 1080.95 73.6029 1084.28 Q73.6029 1089.4 70.0844 1092.2 Q66.5659 1095 60.0845 1095 Q57.9086 1095 55.5938 1094.56 Q53.3021 1094.14 50.8484 1093.29 L50.8484 1088.77 Q52.7928 1089.91 55.1077 1090.49 Q57.4225 1091.07 59.9456 1091.07 Q64.3437 1091.07 66.6354 1089.33 Q68.9502 1087.59 68.9502 1084.28 Q68.9502 1081.23 66.7974 1079.52 Q64.6678 1077.78 60.8484 1077.78 L56.8206 1077.78 L56.8206 1073.94 L61.0335 1073.94 Q64.4826 1073.94 66.3113 1072.57 Q68.14 1071.18 68.14 1068.59 Q68.14 1065.93 66.2419 1064.52 Q64.3669 1063.08 60.8484 1063.08 Q58.9271 1063.08 56.728 1063.5 Q54.529 1063.91 51.8901 1064.79 L51.8901 1060.63 Q54.5521 1059.89 56.8669 1059.52 Q59.2049 1059.15 61.265 1059.15 Q66.5891 1059.15 69.6909 1061.58 Q72.7927 1063.98 72.7927 1068.1 Q72.7927 1070.97 71.1492 1072.96 Q69.5057 1074.93 66.4733 1075.7 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip640)" d="M82.4686 1088.45 L87.3528 1088.45 L87.3528 1094.33 L82.4686 1094.33 L82.4686 1088.45 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip640)" d="M107.538 1062.85 Q103.927 1062.85 102.098 1066.41 Q100.293 1069.96 100.293 1077.08 Q100.293 1084.19 102.098 1087.76 Q103.927 1091.3 107.538 1091.3 Q111.172 1091.3 112.978 1087.76 Q114.806 1084.19 114.806 1077.08 Q114.806 1069.96 112.978 1066.41 Q111.172 1062.85 107.538 1062.85 M107.538 1059.15 Q113.348 1059.15 116.404 1063.75 Q119.482 1068.33 119.482 1077.08 Q119.482 1085.81 116.404 1090.42 Q113.348 1095 107.538 1095 Q101.728 1095 98.6491 1090.42 Q95.5935 1085.81 95.5935 1077.08 Q95.5935 1068.33 98.6491 1063.75 Q101.728 1059.15 107.538 1059.15 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip640)" d="M155.871 1068.87 L145.292 1079.49 L155.871 1090.07 L153.116 1092.87 L142.491 1082.25 L131.866 1092.87 L129.135 1090.07 L139.691 1079.49 L129.135 1068.87 L131.866 1066.07 L142.491 1076.69 L153.116 1066.07 L155.871 1068.87 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip640)" d="M168.232 1090.39 L175.871 1090.39 L175.871 1064.03 L167.561 1065.7 L167.561 1061.44 L175.825 1059.77 L180.5 1059.77 L180.5 1090.39 L188.139 1090.39 L188.139 1094.33 L168.232 1094.33 L168.232 1090.39 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip640)" d="M207.584 1062.85 Q203.973 1062.85 202.144 1066.41 Q200.338 1069.96 200.338 1077.08 Q200.338 1084.19 202.144 1087.76 Q203.973 1091.3 207.584 1091.3 Q211.218 1091.3 213.023 1087.76 Q214.852 1084.19 214.852 1077.08 Q214.852 1069.96 213.023 1066.41 Q211.218 1062.85 207.584 1062.85 M207.584 1059.15 Q213.394 1059.15 216.449 1063.75 Q219.528 1068.33 219.528 1077.08 Q219.528 1085.81 216.449 1090.42 Q213.394 1095 207.584 1095 Q201.774 1095 198.695 1090.42 Q195.639 1085.81 195.639 1077.08 Q195.639 1068.33 198.695 1063.75 Q201.774 1059.15 207.584 1059.15 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip640)" d="M232.205 1042.15 L222.613 1057.14 L232.205 1057.14 L232.205 1042.15 M231.208 1038.84 L235.985 1038.84 L235.985 1057.14 L239.991 1057.14 L239.991 1060.3 L235.985 1060.3 L235.985 1066.92 L232.205 1066.92 L232.205 1060.3 L219.528 1060.3 L219.528 1056.63 L231.208 1038.84 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip640)" d="M65.1539 725.034 L53.3484 743.483 L65.1539 743.483 L65.1539 725.034 M63.927 720.96 L69.8066 720.96 L69.8066 743.483 L74.7372 743.483 L74.7372 747.372 L69.8066 747.372 L69.8066 755.52 L65.1539 755.52 L65.1539 747.372 L49.5521 747.372 L49.5521 742.858 L63.927 720.96 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip640)" d="M82.4686 749.641 L87.3528 749.641 L87.3528 755.52 L82.4686 755.52 L82.4686 749.641 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip640)" d="M107.538 724.039 Q103.927 724.039 102.098 727.604 Q100.293 731.145 100.293 738.275 Q100.293 745.381 102.098 748.946 Q103.927 752.488 107.538 752.488 Q111.172 752.488 112.978 748.946 Q114.806 745.381 114.806 738.275 Q114.806 731.145 112.978 727.604 Q111.172 724.039 107.538 724.039 M107.538 720.335 Q113.348 720.335 116.404 724.942 Q119.482 729.525 119.482 738.275 Q119.482 747.002 116.404 751.608 Q113.348 756.191 107.538 756.191 Q101.728 756.191 98.6491 751.608 Q95.5935 747.002 95.5935 738.275 Q95.5935 729.525 98.6491 724.942 Q101.728 720.335 107.538 720.335 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip640)" d="M155.871 730.057 L145.292 740.682 L155.871 751.261 L153.116 754.062 L142.491 743.437 L131.866 754.062 L129.135 751.261 L139.691 740.682 L129.135 730.057 L131.866 727.256 L142.491 737.881 L153.116 727.256 L155.871 730.057 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip640)" d="M168.232 751.585 L175.871 751.585 L175.871 725.219 L167.561 726.886 L167.561 722.627 L175.825 720.96 L180.5 720.96 L180.5 751.585 L188.139 751.585 L188.139 755.52 L168.232 755.52 L168.232 751.585 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip640)" d="M207.584 724.039 Q203.973 724.039 202.144 727.604 Q200.338 731.145 200.338 738.275 Q200.338 745.381 202.144 748.946 Q203.973 752.488 207.584 752.488 Q211.218 752.488 213.023 748.946 Q214.852 745.381 214.852 738.275 Q214.852 731.145 213.023 727.604 Q211.218 724.039 207.584 724.039 M207.584 720.335 Q213.394 720.335 216.449 724.942 Q219.528 729.525 219.528 738.275 Q219.528 747.002 216.449 751.608 Q213.394 756.191 207.584 756.191 Q201.774 756.191 198.695 751.608 Q195.639 747.002 195.639 738.275 Q195.639 729.525 198.695 724.942 Q201.774 720.335 207.584 720.335 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip640)" d="M232.205 703.34 L222.613 718.33 L232.205 718.33 L232.205 703.34 M231.208 700.03 L235.985 700.03 L235.985 718.33 L239.991 718.33 L239.991 721.489 L235.985 721.489 L235.985 728.11 L232.205 728.11 L232.205 721.489 L219.528 721.489 L219.528 717.822 L231.208 700.03 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip640)" d="M52.353 382.15 L70.7094 382.15 L70.7094 386.085 L56.6354 386.085 L56.6354 394.557 Q57.6539 394.21 58.6724 394.048 Q59.691 393.863 60.7095 393.863 Q66.4965 393.863 69.8761 397.034 Q73.2557 400.206 73.2557 405.622 Q73.2557 411.201 69.7835 414.303 Q66.3113 417.381 59.9919 417.381 Q57.816 417.381 55.5475 417.011 Q53.3021 416.641 50.8947 415.9 L50.8947 411.201 Q52.978 412.335 55.2002 412.891 Q57.4225 413.446 59.8993 413.446 Q63.9039 413.446 66.2419 411.34 Q68.5798 409.233 68.5798 405.622 Q68.5798 402.011 66.2419 399.905 Q63.9039 397.798 59.8993 397.798 Q58.0243 397.798 56.1493 398.215 Q54.2975 398.632 52.353 399.511 L52.353 382.15 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip640)" d="M82.4686 410.831 L87.3528 410.831 L87.3528 416.71 L82.4686 416.71 L82.4686 410.831 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip640)" d="M107.538 385.229 Q103.927 385.229 102.098 388.794 Q100.293 392.335 100.293 399.465 Q100.293 406.571 102.098 410.136 Q103.927 413.678 107.538 413.678 Q111.172 413.678 112.978 410.136 Q114.806 406.571 114.806 399.465 Q114.806 392.335 112.978 388.794 Q111.172 385.229 107.538 385.229 M107.538 381.525 Q113.348 381.525 116.404 386.132 Q119.482 390.715 119.482 399.465 Q119.482 408.192 116.404 412.798 Q113.348 417.381 107.538 417.381 Q101.728 417.381 98.6491 412.798 Q95.5935 408.192 95.5935 399.465 Q95.5935 390.715 98.6491 386.132 Q101.728 381.525 107.538 381.525 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip640)" d="M155.871 391.247 L145.292 401.872 L155.871 412.451 L153.116 415.252 L142.491 404.627 L131.866 415.252 L129.135 412.451 L139.691 401.872 L129.135 391.247 L131.866 388.446 L142.491 399.071 L153.116 388.446 L155.871 391.247 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip640)" d="M168.232 412.775 L175.871 412.775 L175.871 386.409 L167.561 388.076 L167.561 383.817 L175.825 382.15 L180.5 382.15 L180.5 412.775 L188.139 412.775 L188.139 416.71 L168.232 416.71 L168.232 412.775 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip640)" d="M207.584 385.229 Q203.973 385.229 202.144 388.794 Q200.338 392.335 200.338 399.465 Q200.338 406.571 202.144 410.136 Q203.973 413.678 207.584 413.678 Q211.218 413.678 213.023 410.136 Q214.852 406.571 214.852 399.465 Q214.852 392.335 213.023 388.794 Q211.218 385.229 207.584 385.229 M207.584 381.525 Q213.394 381.525 216.449 386.132 Q219.528 390.715 219.528 399.465 Q219.528 408.192 216.449 412.798 Q213.394 417.381 207.584 417.381 Q201.774 417.381 198.695 412.798 Q195.639 408.192 195.639 399.465 Q195.639 390.715 198.695 386.132 Q201.774 381.525 207.584 381.525 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip640)" d="M232.205 364.53 L222.613 379.52 L232.205 379.52 L232.205 364.53 M231.208 361.22 L235.985 361.22 L235.985 379.52 L239.991 379.52 L239.991 382.679 L235.985 382.679 L235.985 389.3 L232.205 389.3 L232.205 382.679 L219.528 382.679 L219.528 379.012 L231.208 361.22 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip640)" d="M62.8854 58.7567 Q59.7373 58.7567 57.8854 60.9095 Q56.0567 63.0623 56.0567 66.8123 Q56.0567 70.5391 57.8854 72.715 Q59.7373 74.8678 62.8854 74.8678 Q66.0335 74.8678 67.8622 72.715 Q69.7141 70.5391 69.7141 66.8123 Q69.7141 63.0623 67.8622 60.9095 Q66.0335 58.7567 62.8854 58.7567 M72.1677 44.104 L72.1677 48.3633 Q70.4085 47.5299 68.6029 47.0901 Q66.8206 46.6503 65.0613 46.6503 Q60.4317 46.6503 57.978 49.7753 Q55.5475 52.9003 55.2002 59.2197 Q56.566 57.2058 58.6262 56.141 Q60.6863 55.0531 63.1632 55.0531 Q68.3715 55.0531 71.3807 58.2243 Q74.4131 61.3725 74.4131 66.8123 Q74.4131 72.1363 71.265 75.3539 Q68.1168 78.5714 62.8854 78.5714 Q56.89 78.5714 53.7188 73.9881 Q50.5475 69.3817 50.5475 60.6549 Q50.5475 52.4605 54.4364 47.5994 Q58.3252 42.7152 64.8761 42.7152 Q66.6354 42.7152 68.4178 43.0624 Q70.2233 43.4096 72.1677 44.104 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip640)" d="M82.4686 72.0206 L87.3528 72.0206 L87.3528 77.9002 L82.4686 77.9002 L82.4686 72.0206 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip640)" d="M107.538 46.4188 Q103.927 46.4188 102.098 49.9836 Q100.293 53.5253 100.293 60.6549 Q100.293 67.7613 102.098 71.3261 Q103.927 74.8678 107.538 74.8678 Q111.172 74.8678 112.978 71.3261 Q114.806 67.7613 114.806 60.6549 Q114.806 53.5253 112.978 49.9836 Q111.172 46.4188 107.538 46.4188 M107.538 42.7152 Q113.348 42.7152 116.404 47.3216 Q119.482 51.9049 119.482 60.6549 Q119.482 69.3817 116.404 73.9881 Q113.348 78.5714 107.538 78.5714 Q101.728 78.5714 98.6491 73.9881 Q95.5935 69.3817 95.5935 60.6549 Q95.5935 51.9049 98.6491 47.3216 Q101.728 42.7152 107.538 42.7152 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip640)" d="M155.871 52.4373 L145.292 63.0623 L155.871 73.6409 L153.116 76.4418 L142.491 65.8169 L131.866 76.4418 L129.135 73.6409 L139.691 63.0623 L129.135 52.4373 L131.866 49.6364 L142.491 60.2614 L153.116 49.6364 L155.871 52.4373 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip640)" d="M168.232 73.965 L175.871 73.965 L175.871 47.5994 L167.561 49.266 L167.561 45.0068 L175.825 43.3402 L180.5 43.3402 L180.5 73.965 L188.139 73.965 L188.139 77.9002 L168.232 77.9002 L168.232 73.965 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip640)" d="M207.584 46.4188 Q203.973 46.4188 202.144 49.9836 Q200.338 53.5253 200.338 60.6549 Q200.338 67.7613 202.144 71.3261 Q203.973 74.8678 207.584 74.8678 Q211.218 74.8678 213.023 71.3261 Q214.852 67.7613 214.852 60.6549 Q214.852 53.5253 213.023 49.9836 Q211.218 46.4188 207.584 46.4188 M207.584 42.7152 Q213.394 42.7152 216.449 47.3216 Q219.528 51.9049 219.528 60.6549 Q219.528 69.3817 216.449 73.9881 Q213.394 78.5714 207.584 78.5714 Q201.774 78.5714 198.695 73.9881 Q195.639 69.3817 195.639 60.6549 Q195.639 51.9049 198.695 47.3216 Q201.774 42.7152 207.584 42.7152 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip640)" d="M232.205 25.7199 L222.613 40.7097 L232.205 40.7097 L232.205 25.7199 M231.208 22.4098 L235.985 22.4098 L235.985 40.7097 L239.991 40.7097 L239.991 43.8694 L235.985 43.8694 L235.985 50.4898 L232.205 50.4898 L232.205 43.8694 L219.528 43.8694 L219.528 40.2019 L231.208 22.4098 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><polyline clip-path="url(#clip642)" style="stroke:#009af9; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="347.116,1751.15 397.726,1558.92 448.336,1384.02 498.946,1225.21 549.556,1081.35 600.165,951.361 650.775,834.237 701.385,729.032 751.995,634.864 802.605,550.908 853.215,476.391 903.825,410.595 954.435,352.848 1005.04,302.523 1055.65,259.036 1106.26,221.842 1156.87,190.436 1207.48,164.344 1258.09,143.128 1308.7,126.38 1359.31,113.721 1409.92,104.797 1460.53,99.2825 1511.14,96.8724 1561.75,97.2855 1612.36,100.26 1662.97,105.555 1713.58,112.945 1764.19,122.223 1814.8,133.197 1865.41,145.69 1916.02,159.537 1966.63,174.587 2017.24,190.7 2067.85,207.748 2118.46,225.612 2169.07,244.182 2219.68,263.359 2270.29,283.049 2320.9,303.169 2371.51,323.64 2422.12,344.391 2472.73,365.357 2523.34,386.479 2573.95,407.702 "></polyline>
</svg>
</div>
</div>
<div class="cell" data-execution_count="23">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>price_range <span class="op">=</span> <span class="fu">range</span>(<span class="fl">1.8</span>, <span class="fl">4.0</span>, step <span class="op">=</span> <span class="fl">0.05</span>);</span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>totalpi_res <span class="op">=</span> <span class="fu">f_revenue</span>.(</span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>    price_range, </span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">Ref</span>(data), <span class="fu">Ref</span>(datalist), <span class="fu">Ref</span>(parameter), <span class="fu">Ref</span>(delta), <span class="fu">Ref</span>(beta_hat), <span class="fu">Ref</span>(gmm_res.minimizer),</span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">"totalpi"</span></span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a>);</span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(price_range, totalpi_res, legend <span class="op">=</span> <span class="cn">false</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="22">
<!--?xml version="1.0" encoding="utf-8"?-->
<svg xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" width="672" height="480" viewbox="0 0 2688 1920">
<defs>
  <clippath id="clip730">
    <rect x="0" y="0" width="2688" height="1920"></rect>
  </clippath>
</defs>
<path clip-path="url(#clip730)" d="M0 1920 L2688 1920 L2688 0 L0 0  Z" fill="#ffffff" fill-rule="evenodd" fill-opacity="1"></path>
<defs>
  <clippath id="clip731">
    <rect x="537" y="0" width="1883" height="1883"></rect>
  </clippath>
</defs>
<path clip-path="url(#clip730)" d="M306.604 1800.78 L2640.76 1800.78 L2640.76 47.2441 L306.604 47.2441  Z" fill="#ffffff" fill-rule="evenodd" fill-opacity="1"></path>
<defs>
  <clippath id="clip732">
    <rect x="306" y="47" width="2335" height="1755"></rect>
  </clippath>
</defs>
<polyline clip-path="url(#clip732)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="572.85,1800.78 572.85,47.2441 "></polyline>
<polyline clip-path="url(#clip732)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="1073.31,1800.78 1073.31,47.2441 "></polyline>
<polyline clip-path="url(#clip732)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="1573.77,1800.78 1573.77,47.2441 "></polyline>
<polyline clip-path="url(#clip732)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="2074.23,1800.78 2074.23,47.2441 "></polyline>
<polyline clip-path="url(#clip732)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="2574.7,1800.78 2574.7,47.2441 "></polyline>
<polyline clip-path="url(#clip730)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="306.604,1800.78 2640.76,1800.78 "></polyline>
<polyline clip-path="url(#clip730)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="572.85,1800.78 572.85,1781.88 "></polyline>
<polyline clip-path="url(#clip730)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="1073.31,1800.78 1073.31,1781.88 "></polyline>
<polyline clip-path="url(#clip730)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="1573.77,1800.78 1573.77,1781.88 "></polyline>
<polyline clip-path="url(#clip730)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="2074.23,1800.78 2074.23,1781.88 "></polyline>
<polyline clip-path="url(#clip730)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="2574.7,1800.78 2574.7,1781.88 "></polyline>
<path clip-path="url(#clip730)" d="M544.088 1861.55 L560.408 1861.55 L560.408 1865.48 L538.463 1865.48 L538.463 1861.55 Q541.125 1858.79 545.709 1854.16 Q550.315 1849.51 551.496 1848.17 Q553.741 1845.65 554.621 1843.91 Q555.523 1842.15 555.523 1840.46 Q555.523 1837.71 553.579 1835.97 Q551.658 1834.23 548.556 1834.23 Q546.357 1834.23 543.903 1835 Q541.472 1835.76 538.695 1837.31 L538.695 1832.59 Q541.519 1831.46 543.972 1830.88 Q546.426 1830.3 548.463 1830.3 Q553.834 1830.3 557.028 1832.98 Q560.222 1835.67 560.222 1840.16 Q560.222 1842.29 559.412 1844.21 Q558.625 1846.11 556.519 1848.7 Q555.94 1849.37 552.838 1852.59 Q549.736 1855.78 544.088 1861.55 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip730)" d="M570.222 1859.6 L575.107 1859.6 L575.107 1865.48 L570.222 1865.48 L570.222 1859.6 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip730)" d="M595.292 1834 Q591.681 1834 589.852 1837.57 Q588.046 1841.11 588.046 1848.24 Q588.046 1855.34 589.852 1858.91 Q591.681 1862.45 595.292 1862.45 Q598.926 1862.45 600.731 1858.91 Q602.56 1855.34 602.56 1848.24 Q602.56 1841.11 600.731 1837.57 Q598.926 1834 595.292 1834 M595.292 1830.3 Q601.102 1830.3 604.157 1834.9 Q607.236 1839.49 607.236 1848.24 Q607.236 1856.96 604.157 1861.57 Q601.102 1866.15 595.292 1866.15 Q589.481 1866.15 586.403 1861.57 Q583.347 1856.96 583.347 1848.24 Q583.347 1839.49 586.403 1834.9 Q589.481 1830.3 595.292 1830.3 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip730)" d="M1045.05 1861.55 L1061.37 1861.55 L1061.37 1865.48 L1039.42 1865.48 L1039.42 1861.55 Q1042.08 1858.79 1046.67 1854.16 Q1051.27 1849.51 1052.45 1848.17 Q1054.7 1845.65 1055.58 1843.91 Q1056.48 1842.15 1056.48 1840.46 Q1056.48 1837.71 1054.54 1835.97 Q1052.62 1834.23 1049.51 1834.23 Q1047.32 1834.23 1044.86 1835 Q1042.43 1835.76 1039.65 1837.31 L1039.65 1832.59 Q1042.48 1831.46 1044.93 1830.88 Q1047.39 1830.3 1049.42 1830.3 Q1054.79 1830.3 1057.99 1832.98 Q1061.18 1835.67 1061.18 1840.16 Q1061.18 1842.29 1060.37 1844.21 Q1059.58 1846.11 1057.48 1848.7 Q1056.9 1849.37 1053.8 1852.59 Q1050.7 1855.78 1045.05 1861.55 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip730)" d="M1071.18 1859.6 L1076.07 1859.6 L1076.07 1865.48 L1071.18 1865.48 L1071.18 1859.6 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip730)" d="M1086.3 1830.92 L1104.65 1830.92 L1104.65 1834.86 L1090.58 1834.86 L1090.58 1843.33 Q1091.6 1842.98 1092.62 1842.82 Q1093.63 1842.64 1094.65 1842.64 Q1100.44 1842.64 1103.82 1845.81 Q1107.2 1848.98 1107.2 1854.4 Q1107.2 1859.97 1103.73 1863.08 Q1100.26 1866.15 1093.94 1866.15 Q1091.76 1866.15 1089.49 1865.78 Q1087.25 1865.41 1084.84 1864.67 L1084.84 1859.97 Q1086.92 1861.11 1089.14 1861.66 Q1091.37 1862.22 1093.84 1862.22 Q1097.85 1862.22 1100.19 1860.11 Q1102.52 1858.01 1102.52 1854.4 Q1102.52 1850.78 1100.19 1848.68 Q1097.85 1846.57 1093.84 1846.57 Q1091.97 1846.57 1090.09 1846.99 Q1088.24 1847.4 1086.3 1848.28 L1086.3 1830.92 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip730)" d="M1555.08 1846.85 Q1558.44 1847.57 1560.31 1849.84 Q1562.21 1852.1 1562.21 1855.44 Q1562.21 1860.55 1558.69 1863.35 Q1555.17 1866.15 1548.69 1866.15 Q1546.52 1866.15 1544.2 1865.71 Q1541.91 1865.3 1539.46 1864.44 L1539.46 1859.93 Q1541.4 1861.06 1543.71 1861.64 Q1546.03 1862.22 1548.55 1862.22 Q1552.95 1862.22 1555.24 1860.48 Q1557.56 1858.75 1557.56 1855.44 Q1557.56 1852.38 1555.4 1850.67 Q1553.27 1848.93 1549.46 1848.93 L1545.43 1848.93 L1545.43 1845.09 L1549.64 1845.09 Q1553.09 1845.09 1554.92 1843.72 Q1556.75 1842.34 1556.75 1839.74 Q1556.75 1837.08 1554.85 1835.67 Q1552.97 1834.23 1549.46 1834.23 Q1547.53 1834.23 1545.33 1834.65 Q1543.14 1835.07 1540.5 1835.95 L1540.5 1831.78 Q1543.16 1831.04 1545.47 1830.67 Q1547.81 1830.3 1549.87 1830.3 Q1555.2 1830.3 1558.3 1832.73 Q1561.4 1835.14 1561.4 1839.26 Q1561.4 1842.13 1559.76 1844.12 Q1558.11 1846.09 1555.08 1846.85 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip730)" d="M1571.08 1859.6 L1575.96 1859.6 L1575.96 1865.48 L1571.08 1865.48 L1571.08 1859.6 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip730)" d="M1596.14 1834 Q1592.53 1834 1590.71 1837.57 Q1588.9 1841.11 1588.9 1848.24 Q1588.9 1855.34 1590.71 1858.91 Q1592.53 1862.45 1596.14 1862.45 Q1599.78 1862.45 1601.58 1858.91 Q1603.41 1855.34 1603.41 1848.24 Q1603.41 1841.11 1601.58 1837.57 Q1599.78 1834 1596.14 1834 M1596.14 1830.3 Q1601.96 1830.3 1605.01 1834.9 Q1608.09 1839.49 1608.09 1848.24 Q1608.09 1856.96 1605.01 1861.57 Q1601.96 1866.15 1596.14 1866.15 Q1590.33 1866.15 1587.26 1861.57 Q1584.2 1856.96 1584.2 1848.24 Q1584.2 1839.49 1587.26 1834.9 Q1590.33 1830.3 1596.14 1830.3 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip730)" d="M2056.04 1846.85 Q2059.4 1847.57 2061.27 1849.84 Q2063.17 1852.1 2063.17 1855.44 Q2063.17 1860.55 2059.65 1863.35 Q2056.13 1866.15 2049.65 1866.15 Q2047.47 1866.15 2045.16 1865.71 Q2042.87 1865.3 2040.41 1864.44 L2040.41 1859.93 Q2042.36 1861.06 2044.67 1861.64 Q2046.99 1862.22 2049.51 1862.22 Q2053.91 1862.22 2056.2 1860.48 Q2058.52 1858.75 2058.52 1855.44 Q2058.52 1852.38 2056.36 1850.67 Q2054.23 1848.93 2050.41 1848.93 L2046.39 1848.93 L2046.39 1845.09 L2050.6 1845.09 Q2054.05 1845.09 2055.88 1843.72 Q2057.71 1842.34 2057.71 1839.74 Q2057.71 1837.08 2055.81 1835.67 Q2053.93 1834.23 2050.41 1834.23 Q2048.49 1834.23 2046.29 1834.65 Q2044.09 1835.07 2041.46 1835.95 L2041.46 1831.78 Q2044.12 1831.04 2046.43 1830.67 Q2048.77 1830.3 2050.83 1830.3 Q2056.16 1830.3 2059.26 1832.73 Q2062.36 1835.14 2062.36 1839.26 Q2062.36 1842.13 2060.72 1844.12 Q2059.07 1846.09 2056.04 1846.85 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip730)" d="M2072.03 1859.6 L2076.92 1859.6 L2076.92 1865.48 L2072.03 1865.48 L2072.03 1859.6 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip730)" d="M2087.15 1830.92 L2105.51 1830.92 L2105.51 1834.86 L2091.43 1834.86 L2091.43 1843.33 Q2092.45 1842.98 2093.47 1842.82 Q2094.49 1842.64 2095.51 1842.64 Q2101.29 1842.64 2104.67 1845.81 Q2108.05 1848.98 2108.05 1854.4 Q2108.05 1859.97 2104.58 1863.08 Q2101.11 1866.15 2094.79 1866.15 Q2092.61 1866.15 2090.34 1865.78 Q2088.1 1865.41 2085.69 1864.67 L2085.69 1859.97 Q2087.78 1861.11 2090 1861.66 Q2092.22 1862.22 2094.7 1862.22 Q2098.7 1862.22 2101.04 1860.11 Q2103.38 1858.01 2103.38 1854.4 Q2103.38 1850.78 2101.04 1848.68 Q2098.7 1846.57 2094.7 1846.57 Q2092.82 1846.57 2090.95 1846.99 Q2089.09 1847.4 2087.15 1848.28 L2087.15 1830.92 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip730)" d="M2555.33 1835 L2543.53 1853.45 L2555.33 1853.45 L2555.33 1835 M2554.1 1830.92 L2559.98 1830.92 L2559.98 1853.45 L2564.91 1853.45 L2564.91 1857.34 L2559.98 1857.34 L2559.98 1865.48 L2555.33 1865.48 L2555.33 1857.34 L2539.73 1857.34 L2539.73 1852.82 L2554.1 1830.92 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip730)" d="M2572.65 1859.6 L2577.53 1859.6 L2577.53 1865.48 L2572.65 1865.48 L2572.65 1859.6 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip730)" d="M2597.72 1834 Q2594.1 1834 2592.28 1837.57 Q2590.47 1841.11 2590.47 1848.24 Q2590.47 1855.34 2592.28 1858.91 Q2594.1 1862.45 2597.72 1862.45 Q2601.35 1862.45 2603.16 1858.91 Q2604.98 1855.34 2604.98 1848.24 Q2604.98 1841.11 2603.16 1837.57 Q2601.35 1834 2597.72 1834 M2597.72 1830.3 Q2603.53 1830.3 2606.58 1834.9 Q2609.66 1839.49 2609.66 1848.24 Q2609.66 1856.96 2606.58 1861.57 Q2603.53 1866.15 2597.72 1866.15 Q2591.91 1866.15 2588.83 1861.57 Q2585.77 1856.96 2585.77 1848.24 Q2585.77 1839.49 2588.83 1834.9 Q2591.91 1830.3 2597.72 1830.3 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><polyline clip-path="url(#clip732)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="306.604,1663.71 2640.76,1663.71 "></polyline>
<polyline clip-path="url(#clip732)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="306.604,1391.44 2640.76,1391.44 "></polyline>
<polyline clip-path="url(#clip732)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="306.604,1119.18 2640.76,1119.18 "></polyline>
<polyline clip-path="url(#clip732)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="306.604,846.912 2640.76,846.912 "></polyline>
<polyline clip-path="url(#clip732)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="306.604,574.646 2640.76,574.646 "></polyline>
<polyline clip-path="url(#clip732)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="306.604,302.38 2640.76,302.38 "></polyline>
<polyline clip-path="url(#clip730)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="306.604,1800.78 306.604,47.2441 "></polyline>
<polyline clip-path="url(#clip730)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="306.604,1663.71 325.502,1663.71 "></polyline>
<polyline clip-path="url(#clip730)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="306.604,1391.44 325.502,1391.44 "></polyline>
<polyline clip-path="url(#clip730)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="306.604,1119.18 325.502,1119.18 "></polyline>
<polyline clip-path="url(#clip730)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="306.604,846.912 325.502,846.912 "></polyline>
<polyline clip-path="url(#clip730)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="306.604,574.646 325.502,574.646 "></polyline>
<polyline clip-path="url(#clip730)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="306.604,302.38 325.502,302.38 "></polyline>
<path clip-path="url(#clip730)" d="M49.5521 1652.88 L71.7742 1652.88 L71.7742 1654.87 L59.228 1687.44 L54.3438 1687.44 L66.1493 1656.81 L49.5521 1656.81 L49.5521 1652.88 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip730)" d="M80.8946 1681.56 L85.7788 1681.56 L85.7788 1687.44 L80.8946 1687.44 L80.8946 1681.56 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip730)" d="M110.131 1668.8 Q113.487 1669.52 115.362 1671.79 Q117.26 1674.06 117.26 1677.39 Q117.26 1682.51 113.742 1685.31 Q110.223 1688.11 103.742 1688.11 Q101.566 1688.11 99.2509 1687.67 Q96.9593 1687.25 94.5056 1686.4 L94.5056 1681.88 Q96.45 1683.02 98.7648 1683.59 Q101.08 1684.17 103.603 1684.17 Q108.001 1684.17 110.293 1682.44 Q112.607 1680.7 112.607 1677.39 Q112.607 1674.34 110.455 1672.62 Q108.325 1670.89 104.506 1670.89 L100.478 1670.89 L100.478 1667.04 L104.691 1667.04 Q108.14 1667.04 109.968 1665.68 Q111.797 1664.29 111.797 1661.7 Q111.797 1659.03 109.899 1657.62 Q108.024 1656.19 104.506 1656.19 Q102.584 1656.19 100.385 1656.6 Q98.1861 1657.02 95.5472 1657.9 L95.5472 1653.73 Q98.2093 1652.99 100.524 1652.62 Q102.862 1652.25 104.922 1652.25 Q110.246 1652.25 113.348 1654.68 Q116.45 1657.09 116.45 1661.21 Q116.45 1664.08 114.806 1666.07 Q113.163 1668.04 110.131 1668.8 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip730)" d="M136.126 1655.96 Q132.515 1655.96 130.686 1659.52 Q128.88 1663.06 128.88 1670.19 Q128.88 1677.3 130.686 1680.86 Q132.515 1684.41 136.126 1684.41 Q139.76 1684.41 141.566 1680.86 Q143.394 1677.3 143.394 1670.19 Q143.394 1663.06 141.566 1659.52 Q139.76 1655.96 136.126 1655.96 M136.126 1652.25 Q141.936 1652.25 144.991 1656.86 Q148.07 1661.44 148.07 1670.19 Q148.07 1678.92 144.991 1683.53 Q141.936 1688.11 136.126 1688.11 Q130.316 1688.11 127.237 1683.53 Q124.181 1678.92 124.181 1670.19 Q124.181 1661.44 127.237 1656.86 Q130.316 1652.25 136.126 1652.25 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip730)" d="M184.459 1661.97 L173.88 1672.6 L184.459 1683.18 L181.704 1685.98 L171.079 1675.35 L160.454 1685.98 L157.723 1683.18 L168.278 1672.6 L157.723 1661.97 L160.454 1659.17 L171.079 1669.8 L181.704 1659.17 L184.459 1661.97 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip730)" d="M196.82 1683.5 L204.459 1683.5 L204.459 1657.14 L196.149 1658.8 L196.149 1654.54 L204.412 1652.88 L209.088 1652.88 L209.088 1683.5 L216.727 1683.5 L216.727 1687.44 L196.82 1687.44 L196.82 1683.5 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip730)" d="M236.171 1655.96 Q232.56 1655.96 230.732 1659.52 Q228.926 1663.06 228.926 1670.19 Q228.926 1677.3 230.732 1680.86 Q232.56 1684.41 236.171 1684.41 Q239.806 1684.41 241.611 1680.86 Q243.44 1677.3 243.44 1670.19 Q243.44 1663.06 241.611 1659.52 Q239.806 1655.96 236.171 1655.96 M236.171 1652.25 Q241.982 1652.25 245.037 1656.86 Q248.116 1661.44 248.116 1670.19 Q248.116 1678.92 245.037 1683.53 Q241.982 1688.11 236.171 1688.11 Q230.361 1688.11 227.283 1683.53 Q224.227 1678.92 224.227 1670.19 Q224.227 1661.44 227.283 1656.86 Q230.361 1652.25 236.171 1652.25 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip730)" d="M249.301 1631.95 L264.215 1631.95 L264.215 1635.14 L252.78 1635.14 L252.78 1642.03 Q253.608 1641.75 254.435 1641.61 Q255.263 1641.46 256.09 1641.46 Q260.792 1641.46 263.538 1644.04 Q266.284 1646.62 266.284 1651.02 Q266.284 1655.55 263.463 1658.07 Q260.642 1660.57 255.507 1660.57 Q253.739 1660.57 251.896 1660.27 Q250.072 1659.97 248.116 1659.37 L248.116 1655.55 Q249.809 1656.47 251.614 1656.92 Q253.42 1657.38 255.432 1657.38 Q258.686 1657.38 260.585 1655.66 Q262.485 1653.95 262.485 1651.02 Q262.485 1648.08 260.585 1646.37 Q258.686 1644.66 255.432 1644.66 Q253.909 1644.66 252.385 1645 Q250.881 1645.34 249.301 1646.05 L249.301 1631.95 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip730)" d="M49.5521 1380.61 L71.7742 1380.61 L71.7742 1382.6 L59.228 1415.17 L54.3438 1415.17 L66.1493 1384.55 L49.5521 1384.55 L49.5521 1380.61 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip730)" d="M80.8946 1409.29 L85.7788 1409.29 L85.7788 1415.17 L80.8946 1415.17 L80.8946 1409.29 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip730)" d="M108.811 1384.69 L97.0056 1403.13 L108.811 1403.13 L108.811 1384.69 M107.584 1380.61 L113.464 1380.61 L113.464 1403.13 L118.394 1403.13 L118.394 1407.02 L113.464 1407.02 L113.464 1415.17 L108.811 1415.17 L108.811 1407.02 L93.2093 1407.02 L93.2093 1402.51 L107.584 1380.61 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip730)" d="M136.126 1383.69 Q132.515 1383.69 130.686 1387.25 Q128.88 1390.8 128.88 1397.93 Q128.88 1405.03 130.686 1408.6 Q132.515 1412.14 136.126 1412.14 Q139.76 1412.14 141.566 1408.6 Q143.394 1405.03 143.394 1397.93 Q143.394 1390.8 141.566 1387.25 Q139.76 1383.69 136.126 1383.69 M136.126 1379.99 Q141.936 1379.99 144.991 1384.59 Q148.07 1389.18 148.07 1397.93 Q148.07 1406.65 144.991 1411.26 Q141.936 1415.84 136.126 1415.84 Q130.316 1415.84 127.237 1411.26 Q124.181 1406.65 124.181 1397.93 Q124.181 1389.18 127.237 1384.59 Q130.316 1379.99 136.126 1379.99 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip730)" d="M184.459 1389.71 L173.88 1400.33 L184.459 1410.91 L181.704 1413.71 L171.079 1403.09 L160.454 1413.71 L157.723 1410.91 L168.278 1400.33 L157.723 1389.71 L160.454 1386.91 L171.079 1397.53 L181.704 1386.91 L184.459 1389.71 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip730)" d="M196.82 1411.24 L204.459 1411.24 L204.459 1384.87 L196.149 1386.54 L196.149 1382.28 L204.412 1380.61 L209.088 1380.61 L209.088 1411.24 L216.727 1411.24 L216.727 1415.17 L196.82 1415.17 L196.82 1411.24 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip730)" d="M236.171 1383.69 Q232.56 1383.69 230.732 1387.25 Q228.926 1390.8 228.926 1397.93 Q228.926 1405.03 230.732 1408.6 Q232.56 1412.14 236.171 1412.14 Q239.806 1412.14 241.611 1408.6 Q243.44 1405.03 243.44 1397.93 Q243.44 1390.8 241.611 1387.25 Q239.806 1383.69 236.171 1383.69 M236.171 1379.99 Q241.982 1379.99 245.037 1384.59 Q248.116 1389.18 248.116 1397.93 Q248.116 1406.65 245.037 1411.26 Q241.982 1415.84 236.171 1415.84 Q230.361 1415.84 227.283 1411.26 Q224.227 1406.65 224.227 1397.93 Q224.227 1389.18 227.283 1384.59 Q230.361 1379.99 236.171 1379.99 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip730)" d="M249.301 1359.68 L264.215 1359.68 L264.215 1362.88 L252.78 1362.88 L252.78 1369.76 Q253.608 1369.48 254.435 1369.35 Q255.263 1369.2 256.09 1369.2 Q260.792 1369.2 263.538 1371.77 Q266.284 1374.35 266.284 1378.75 Q266.284 1383.28 263.463 1385.81 Q260.642 1388.31 255.507 1388.31 Q253.739 1388.31 251.896 1388.01 Q250.072 1387.7 248.116 1387.1 L248.116 1383.28 Q249.809 1384.21 251.614 1384.66 Q253.42 1385.11 255.432 1385.11 Q258.686 1385.11 260.585 1383.4 Q262.485 1381.69 262.485 1378.75 Q262.485 1375.82 260.585 1374.11 Q258.686 1372.4 255.432 1372.4 Q253.909 1372.4 252.385 1372.73 Q250.881 1373.07 249.301 1373.79 L249.301 1359.68 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip730)" d="M49.5521 1108.35 L71.7742 1108.35 L71.7742 1110.34 L59.228 1142.91 L54.3438 1142.91 L66.1493 1112.28 L49.5521 1112.28 L49.5521 1108.35 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip730)" d="M80.8946 1137.03 L85.7788 1137.03 L85.7788 1142.91 L80.8946 1142.91 L80.8946 1137.03 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip730)" d="M96.0102 1108.35 L114.367 1108.35 L114.367 1112.28 L100.293 1112.28 L100.293 1120.75 Q101.311 1120.41 102.33 1120.24 Q103.348 1120.06 104.367 1120.06 Q110.154 1120.06 113.533 1123.23 Q116.913 1126.4 116.913 1131.82 Q116.913 1137.4 113.441 1140.5 Q109.968 1143.58 103.649 1143.58 Q101.473 1143.58 99.2046 1143.21 Q96.9593 1142.84 94.5519 1142.1 L94.5519 1137.4 Q96.6352 1138.53 98.8574 1139.09 Q101.08 1139.64 103.556 1139.64 Q107.561 1139.64 109.899 1137.54 Q112.237 1135.43 112.237 1131.82 Q112.237 1128.21 109.899 1126.1 Q107.561 1123.99 103.556 1123.99 Q101.681 1123.99 99.8065 1124.41 Q97.9546 1124.83 96.0102 1125.71 L96.0102 1108.35 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip730)" d="M136.126 1111.42 Q132.515 1111.42 130.686 1114.99 Q128.88 1118.53 128.88 1125.66 Q128.88 1132.77 130.686 1136.33 Q132.515 1139.87 136.126 1139.87 Q139.76 1139.87 141.566 1136.33 Q143.394 1132.77 143.394 1125.66 Q143.394 1118.53 141.566 1114.99 Q139.76 1111.42 136.126 1111.42 M136.126 1107.72 Q141.936 1107.72 144.991 1112.33 Q148.07 1116.91 148.07 1125.66 Q148.07 1134.39 144.991 1138.99 Q141.936 1143.58 136.126 1143.58 Q130.316 1143.58 127.237 1138.99 Q124.181 1134.39 124.181 1125.66 Q124.181 1116.91 127.237 1112.33 Q130.316 1107.72 136.126 1107.72 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip730)" d="M184.459 1117.44 L173.88 1128.07 L184.459 1138.65 L181.704 1141.45 L171.079 1130.82 L160.454 1141.45 L157.723 1138.65 L168.278 1128.07 L157.723 1117.44 L160.454 1114.64 L171.079 1125.27 L181.704 1114.64 L184.459 1117.44 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip730)" d="M196.82 1138.97 L204.459 1138.97 L204.459 1112.6 L196.149 1114.27 L196.149 1110.01 L204.412 1108.35 L209.088 1108.35 L209.088 1138.97 L216.727 1138.97 L216.727 1142.91 L196.82 1142.91 L196.82 1138.97 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip730)" d="M236.171 1111.42 Q232.56 1111.42 230.732 1114.99 Q228.926 1118.53 228.926 1125.66 Q228.926 1132.77 230.732 1136.33 Q232.56 1139.87 236.171 1139.87 Q239.806 1139.87 241.611 1136.33 Q243.44 1132.77 243.44 1125.66 Q243.44 1118.53 241.611 1114.99 Q239.806 1111.42 236.171 1111.42 M236.171 1107.72 Q241.982 1107.72 245.037 1112.33 Q248.116 1116.91 248.116 1125.66 Q248.116 1134.39 245.037 1138.99 Q241.982 1143.58 236.171 1143.58 Q230.361 1143.58 227.283 1138.99 Q224.227 1134.39 224.227 1125.66 Q224.227 1116.91 227.283 1112.33 Q230.361 1107.72 236.171 1107.72 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip730)" d="M249.301 1087.42 L264.215 1087.42 L264.215 1090.61 L252.78 1090.61 L252.78 1097.5 Q253.608 1097.21 254.435 1097.08 Q255.263 1096.93 256.09 1096.93 Q260.792 1096.93 263.538 1099.51 Q266.284 1102.09 266.284 1106.49 Q266.284 1111.02 263.463 1113.54 Q260.642 1116.04 255.507 1116.04 Q253.739 1116.04 251.896 1115.74 Q250.072 1115.44 248.116 1114.84 L248.116 1111.02 Q249.809 1111.94 251.614 1112.39 Q253.42 1112.84 255.432 1112.84 Q258.686 1112.84 260.585 1111.13 Q262.485 1109.42 262.485 1106.49 Q262.485 1103.55 260.585 1101.84 Q258.686 1100.13 255.432 1100.13 Q253.909 1100.13 252.385 1100.47 Q250.881 1100.81 249.301 1101.52 L249.301 1087.42 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip730)" d="M49.5521 836.079 L71.7742 836.079 L71.7742 838.07 L59.228 870.639 L54.3438 870.639 L66.1493 840.015 L49.5521 840.015 L49.5521 836.079 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip730)" d="M80.8946 864.76 L85.7788 864.76 L85.7788 870.639 L80.8946 870.639 L80.8946 864.76 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip730)" d="M106.543 851.496 Q103.394 851.496 101.543 853.649 Q99.7139 855.801 99.7139 859.551 Q99.7139 863.278 101.543 865.454 Q103.394 867.607 106.543 867.607 Q109.691 867.607 111.519 865.454 Q113.371 863.278 113.371 859.551 Q113.371 855.801 111.519 853.649 Q109.691 851.496 106.543 851.496 M115.825 836.843 L115.825 841.102 Q114.066 840.269 112.26 839.829 Q110.478 839.39 108.718 839.39 Q104.089 839.39 101.635 842.515 Q99.2046 845.64 98.8574 851.959 Q100.223 849.945 102.283 848.88 Q104.343 847.792 106.82 847.792 Q112.029 847.792 115.038 850.964 Q118.07 854.112 118.07 859.551 Q118.07 864.876 114.922 868.093 Q111.774 871.311 106.543 871.311 Q100.547 871.311 97.3759 866.727 Q94.2047 862.121 94.2047 853.394 Q94.2047 845.2 98.0935 840.339 Q101.982 835.454 108.533 835.454 Q110.293 835.454 112.075 835.802 Q113.88 836.149 115.825 836.843 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip730)" d="M136.126 839.158 Q132.515 839.158 130.686 842.723 Q128.88 846.264 128.88 853.394 Q128.88 860.501 130.686 864.065 Q132.515 867.607 136.126 867.607 Q139.76 867.607 141.566 864.065 Q143.394 860.501 143.394 853.394 Q143.394 846.264 141.566 842.723 Q139.76 839.158 136.126 839.158 M136.126 835.454 Q141.936 835.454 144.991 840.061 Q148.07 844.644 148.07 853.394 Q148.07 862.121 144.991 866.727 Q141.936 871.311 136.126 871.311 Q130.316 871.311 127.237 866.727 Q124.181 862.121 124.181 853.394 Q124.181 844.644 127.237 840.061 Q130.316 835.454 136.126 835.454 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip730)" d="M184.459 845.177 L173.88 855.801 L184.459 866.38 L181.704 869.181 L171.079 858.556 L160.454 869.181 L157.723 866.38 L168.278 855.801 L157.723 845.177 L160.454 842.376 L171.079 853.001 L181.704 842.376 L184.459 845.177 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip730)" d="M196.82 866.704 L204.459 866.704 L204.459 840.339 L196.149 842.005 L196.149 837.746 L204.412 836.079 L209.088 836.079 L209.088 866.704 L216.727 866.704 L216.727 870.639 L196.82 870.639 L196.82 866.704 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip730)" d="M236.171 839.158 Q232.56 839.158 230.732 842.723 Q228.926 846.264 228.926 853.394 Q228.926 860.501 230.732 864.065 Q232.56 867.607 236.171 867.607 Q239.806 867.607 241.611 864.065 Q243.44 860.501 243.44 853.394 Q243.44 846.264 241.611 842.723 Q239.806 839.158 236.171 839.158 M236.171 835.454 Q241.982 835.454 245.037 840.061 Q248.116 844.644 248.116 853.394 Q248.116 862.121 245.037 866.727 Q241.982 871.311 236.171 871.311 Q230.361 871.311 227.283 866.727 Q224.227 862.121 224.227 853.394 Q224.227 844.644 227.283 840.061 Q230.361 835.454 236.171 835.454 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip730)" d="M249.301 815.149 L264.215 815.149 L264.215 818.346 L252.78 818.346 L252.78 825.23 Q253.608 824.948 254.435 824.816 Q255.263 824.666 256.09 824.666 Q260.792 824.666 263.538 827.242 Q266.284 829.819 266.284 834.22 Q266.284 838.753 263.463 841.273 Q260.642 843.774 255.507 843.774 Q253.739 843.774 251.896 843.473 Q250.072 843.173 248.116 842.571 L248.116 838.753 Q249.809 839.674 251.614 840.126 Q253.42 840.577 255.432 840.577 Q258.686 840.577 260.585 838.866 Q262.485 837.154 262.485 834.22 Q262.485 831.286 260.585 829.575 Q258.686 827.863 255.432 827.863 Q253.909 827.863 252.385 828.202 Q250.881 828.54 249.301 829.255 L249.301 815.149 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip730)" d="M49.5521 563.813 L71.7742 563.813 L71.7742 565.804 L59.228 598.373 L54.3438 598.373 L66.1493 567.748 L49.5521 567.748 L49.5521 563.813 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip730)" d="M80.8946 592.494 L85.7788 592.494 L85.7788 598.373 L80.8946 598.373 L80.8946 592.494 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip730)" d="M94.7834 563.813 L117.005 563.813 L117.005 565.804 L104.459 598.373 L99.575 598.373 L111.38 567.748 L94.7834 567.748 L94.7834 563.813 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip730)" d="M136.126 566.892 Q132.515 566.892 130.686 570.457 Q128.88 573.998 128.88 581.128 Q128.88 588.234 130.686 591.799 Q132.515 595.341 136.126 595.341 Q139.76 595.341 141.566 591.799 Q143.394 588.234 143.394 581.128 Q143.394 573.998 141.566 570.457 Q139.76 566.892 136.126 566.892 M136.126 563.188 Q141.936 563.188 144.991 567.795 Q148.07 572.378 148.07 581.128 Q148.07 589.855 144.991 594.461 Q141.936 599.045 136.126 599.045 Q130.316 599.045 127.237 594.461 Q124.181 589.855 124.181 581.128 Q124.181 572.378 127.237 567.795 Q130.316 563.188 136.126 563.188 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip730)" d="M184.459 572.911 L173.88 583.535 L184.459 594.114 L181.704 596.915 L171.079 586.29 L160.454 596.915 L157.723 594.114 L168.278 583.535 L157.723 572.911 L160.454 570.11 L171.079 580.735 L181.704 570.11 L184.459 572.911 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip730)" d="M196.82 594.438 L204.459 594.438 L204.459 568.073 L196.149 569.739 L196.149 565.48 L204.412 563.813 L209.088 563.813 L209.088 594.438 L216.727 594.438 L216.727 598.373 L196.82 598.373 L196.82 594.438 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip730)" d="M236.171 566.892 Q232.56 566.892 230.732 570.457 Q228.926 573.998 228.926 581.128 Q228.926 588.234 230.732 591.799 Q232.56 595.341 236.171 595.341 Q239.806 595.341 241.611 591.799 Q243.44 588.234 243.44 581.128 Q243.44 573.998 241.611 570.457 Q239.806 566.892 236.171 566.892 M236.171 563.188 Q241.982 563.188 245.037 567.795 Q248.116 572.378 248.116 581.128 Q248.116 589.855 245.037 594.461 Q241.982 599.045 236.171 599.045 Q230.361 599.045 227.283 594.461 Q224.227 589.855 224.227 581.128 Q224.227 572.378 227.283 567.795 Q230.361 563.188 236.171 563.188 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip730)" d="M249.301 542.883 L264.215 542.883 L264.215 546.08 L252.78 546.08 L252.78 552.964 Q253.608 552.682 254.435 552.55 Q255.263 552.4 256.09 552.4 Q260.792 552.4 263.538 554.976 Q266.284 557.553 266.284 561.954 Q266.284 566.487 263.463 569.007 Q260.642 571.508 255.507 571.508 Q253.739 571.508 251.896 571.207 Q250.072 570.907 248.116 570.305 L248.116 566.487 Q249.809 567.408 251.614 567.86 Q253.42 568.311 255.432 568.311 Q258.686 568.311 260.585 566.6 Q262.485 564.888 262.485 561.954 Q262.485 559.02 260.585 557.308 Q258.686 555.597 255.432 555.597 Q253.909 555.597 252.385 555.936 Q250.881 556.274 249.301 556.989 L249.301 542.883 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip730)" d="M49.5521 291.547 L71.7742 291.547 L71.7742 293.538 L59.228 326.107 L54.3438 326.107 L66.1493 295.482 L49.5521 295.482 L49.5521 291.547 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip730)" d="M80.8946 320.228 L85.7788 320.228 L85.7788 326.107 L80.8946 326.107 L80.8946 320.228 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip730)" d="M105.964 309.695 Q102.631 309.695 100.709 311.478 Q98.8111 313.26 98.8111 316.385 Q98.8111 319.51 100.709 321.292 Q102.631 323.075 105.964 323.075 Q109.297 323.075 111.218 321.292 Q113.14 319.487 113.14 316.385 Q113.14 313.26 111.218 311.478 Q109.32 309.695 105.964 309.695 M101.288 307.705 Q98.2787 306.964 96.5889 304.904 Q94.9223 302.844 94.9223 299.881 Q94.9223 295.737 97.8621 293.33 Q100.825 290.922 105.964 290.922 Q111.126 290.922 114.066 293.33 Q117.005 295.737 117.005 299.881 Q117.005 302.844 115.316 304.904 Q113.649 306.964 110.663 307.705 Q114.043 308.492 115.918 310.783 Q117.816 313.075 117.816 316.385 Q117.816 321.408 114.737 324.093 Q111.681 326.779 105.964 326.779 Q100.246 326.779 97.1676 324.093 Q94.1121 321.408 94.1121 316.385 Q94.1121 313.075 96.0102 310.783 Q97.9083 308.492 101.288 307.705 M99.575 300.32 Q99.575 303.006 101.242 304.51 Q102.931 306.015 105.964 306.015 Q108.973 306.015 110.663 304.51 Q112.376 303.006 112.376 300.32 Q112.376 297.635 110.663 296.131 Q108.973 294.626 105.964 294.626 Q102.931 294.626 101.242 296.131 Q99.575 297.635 99.575 300.32 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip730)" d="M136.126 294.626 Q132.515 294.626 130.686 298.191 Q128.88 301.732 128.88 308.862 Q128.88 315.968 130.686 319.533 Q132.515 323.075 136.126 323.075 Q139.76 323.075 141.566 319.533 Q143.394 315.968 143.394 308.862 Q143.394 301.732 141.566 298.191 Q139.76 294.626 136.126 294.626 M136.126 290.922 Q141.936 290.922 144.991 295.529 Q148.07 300.112 148.07 308.862 Q148.07 317.589 144.991 322.195 Q141.936 326.779 136.126 326.779 Q130.316 326.779 127.237 322.195 Q124.181 317.589 124.181 308.862 Q124.181 300.112 127.237 295.529 Q130.316 290.922 136.126 290.922 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip730)" d="M184.459 300.644 L173.88 311.269 L184.459 321.848 L181.704 324.649 L171.079 314.024 L160.454 324.649 L157.723 321.848 L168.278 311.269 L157.723 300.644 L160.454 297.844 L171.079 308.468 L181.704 297.844 L184.459 300.644 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip730)" d="M196.82 322.172 L204.459 322.172 L204.459 295.807 L196.149 297.473 L196.149 293.214 L204.412 291.547 L209.088 291.547 L209.088 322.172 L216.727 322.172 L216.727 326.107 L196.82 326.107 L196.82 322.172 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip730)" d="M236.171 294.626 Q232.56 294.626 230.732 298.191 Q228.926 301.732 228.926 308.862 Q228.926 315.968 230.732 319.533 Q232.56 323.075 236.171 323.075 Q239.806 323.075 241.611 319.533 Q243.44 315.968 243.44 308.862 Q243.44 301.732 241.611 298.191 Q239.806 294.626 236.171 294.626 M236.171 290.922 Q241.982 290.922 245.037 295.529 Q248.116 300.112 248.116 308.862 Q248.116 317.589 245.037 322.195 Q241.982 326.779 236.171 326.779 Q230.361 326.779 227.283 322.195 Q224.227 317.589 224.227 308.862 Q224.227 300.112 227.283 295.529 Q230.361 290.922 236.171 290.922 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip730)" d="M249.301 270.617 L264.215 270.617 L264.215 273.814 L252.78 273.814 L252.78 280.698 Q253.608 280.416 254.435 280.284 Q255.263 280.134 256.09 280.134 Q260.792 280.134 263.538 282.71 Q266.284 285.287 266.284 289.688 Q266.284 294.221 263.463 296.741 Q260.642 299.242 255.507 299.242 Q253.739 299.242 251.896 298.941 Q250.072 298.64 248.116 298.039 L248.116 294.221 Q249.809 295.142 251.614 295.594 Q253.42 296.045 255.432 296.045 Q258.686 296.045 260.585 294.333 Q262.485 292.622 262.485 289.688 Q262.485 286.754 260.585 285.042 Q258.686 283.331 255.432 283.331 Q253.909 283.331 252.385 283.669 Q250.881 284.008 249.301 284.723 L249.301 270.617 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><polyline clip-path="url(#clip732)" style="stroke:#009af9; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="372.665,1751.15 422.711,1574.96 472.757,1413.7 522.803,1266.35 572.85,1131.93 622.896,1009.54 672.942,898.326 722.988,797.489 773.034,706.283 823.08,624.007 873.126,550.009 923.173,483.676 973.219,424.437 1023.26,371.759 1073.31,325.143 1123.36,284.125 1173.4,248.272 1223.45,217.18 1273.5,190.472 1323.54,167.797 1373.59,148.83 1423.63,133.267 1473.68,120.825 1523.73,111.242 1573.77,104.274 1623.82,99.6942 1673.86,97.2921 1723.91,96.8724 1773.96,98.2542 1824,101.269 1874.05,105.763 1924.1,111.589 1974.14,118.616 2024.19,126.721 2074.23,135.787 2124.28,145.712 2174.33,156.396 2224.37,167.75 2274.42,179.692 2324.46,192.145 2374.51,205.039 2424.56,218.309 2474.6,231.895 2524.65,245.744 2574.7,259.805 "></polyline>
</svg>
</div>
</div>
<div class="cell" data-execution_count="24">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>ownpi_optim_res <span class="op">=</span> <span class="fu">optimize</span>(</span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>    x <span class="op">-&gt;</span> <span class="op">-</span> <span class="fu">f_revenue</span>(x[<span class="fl">1</span>], data, datalist, parameter, delta, beta_hat, gmm_res.minimizer, <span class="st">"ownpi"</span>),</span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>    [<span class="fl">3.0</span>]</span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a>ownpi_optim_res.minimizer</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="23">
<pre><code>1-element Vector{Float64}:
 2.967175245285034</code></pre>
</div>
</div>
<div class="cell" data-execution_count="25">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>totalpi_optim_res <span class="op">=</span> <span class="fu">optimize</span>(</span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>    x <span class="op">-&gt;</span> <span class="op">-</span> <span class="fu">f_revenue</span>(x[<span class="fl">1</span>], data, datalist, parameter, delta, beta_hat, gmm_res.minimizer, <span class="st">"totalpi"</span>),</span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>    [<span class="fl">3.0</span>]</span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a>totalpi_optim_res.minimizer</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="24">
<pre><code>1-element Vector{Float64}:
 3.136022758483887</code></pre>
</div>
</div>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./demand_estimation_1.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">需要モデルの推定（基礎編 1）</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./demand_estimation_merger.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">需要モデルの推定（応用編）</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>