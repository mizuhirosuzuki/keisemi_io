<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.280">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>【非公式】実証ビジネス・エコノミクス Juliaでの実装 - 4&nbsp; 応用編</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./entry_exit_basic.html" rel="next">
<link href="./demand_estimation_2.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script>
<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>


</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
    <div class="container-fluid d-flex justify-content-between">
      <h1 class="quarto-secondary-nav-title"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">応用編</span></h1>
      <button type="button" class="quarto-btn-toggle btn" aria-label="Show secondary navigation">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">【非公式】実証ビジネス・エコノミクス Juliaでの実装</a> 
    </div>
      </div>
      <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
      </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">はじめに</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">消費者需要モデルの推定</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./demand_estimation_1.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">基礎編 1</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./demand_estimation_2.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">基礎編 2</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./demand_estimation_merger.html" class="sidebar-item-text sidebar-link active"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">応用編</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">参入ゲームの推定</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./entry_exit_basic.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">基礎編</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./entry_exit_application.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">応用編</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">シングルエージェント動学モデルの推定</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./single_agent_dynamic_basic.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">基礎編</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./single_agent_dynamic_application.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">応用編</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true">動学ゲームの推定</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./dynamic_game_data.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">疑似データの生成</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./dynamic_game_estimation_1.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">推定 1</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#data-cleaning" id="toc-data-cleaning" class="nav-link active" data-scroll-target="#data-cleaning"><span class="toc-section-number">4.1</span>  Data cleaning</a></li>
  <li><a href="#section" id="toc-section" class="nav-link" data-scroll-target="#section"><span class="toc-section-number">4.2</span>  4.2</a></li>
  <li><a href="#section-1" id="toc-section-1" class="nav-link" data-scroll-target="#section-1"><span class="toc-section-number">4.3</span>  4.3</a></li>
  <li><a href="#section-2" id="toc-section-2" class="nav-link" data-scroll-target="#section-2"><span class="toc-section-number">4.4</span>  5</a></li>
  <li><a href="#section-3" id="toc-section-3" class="nav-link" data-scroll-target="#section-3"><span class="toc-section-number">4.5</span>  6</a></li>
  <li><a href="#section-4" id="toc-section-4" class="nav-link" data-scroll-target="#section-4"><span class="toc-section-number">4.6</span>  6.4</a></li>
  <li><a href="#section-5" id="toc-section-5" class="nav-link" data-scroll-target="#section-5"><span class="toc-section-number">4.7</span>  6.5</a></li>
  <li><a href="#section-6" id="toc-section-6" class="nav-link" data-scroll-target="#section-6"><span class="toc-section-number">4.8</span>  7</a></li>
  <li><a href="#section-7" id="toc-section-7" class="nav-link" data-scroll-target="#section-7"><span class="toc-section-number">4.9</span>  7.1</a></li>
  <li><a href="#section-8" id="toc-section-8" class="nav-link" data-scroll-target="#section-8"><span class="toc-section-number">4.10</span>  7.2</a></li>
  <li><a href="#section-9" id="toc-section-9" class="nav-link" data-scroll-target="#section-9"><span class="toc-section-number">4.11</span>  7.4</a></li>
  <li><a href="#section-10" id="toc-section-10" class="nav-link" data-scroll-target="#section-10"><span class="toc-section-number">4.12</span>  8</a></li>
  <li><a href="#section-11" id="toc-section-11" class="nav-link" data-scroll-target="#section-11"><span class="toc-section-number">4.13</span>  8.2</a></li>
  <li><a href="#section-12" id="toc-section-12" class="nav-link" data-scroll-target="#section-12"><span class="toc-section-number">4.14</span>  8.3</a></li>
  <li><a href="#section-13" id="toc-section-13" class="nav-link" data-scroll-target="#section-13"><span class="toc-section-number">4.15</span>  8.5</a></li>
  <li><a href="#section-14" id="toc-section-14" class="nav-link" data-scroll-target="#section-14"><span class="toc-section-number">4.16</span>  8.6</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title d-none d-lg-block"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">応用編</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<div class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">CSV</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">DataFrames</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">StringEncodings</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">FixedEffectModels</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">RegressionTables</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">Plots</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">LinearAlgebra</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">Statistics</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">Optim</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">Printf</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">ForwardDiff</span></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">Random</span></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">GLM</span></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">Serialization</span></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">Roots</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="2">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="kw">mutable struct</span> datalist_struct</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>    X1<span class="op">::</span><span class="dt">Array{Float64,2}</span>;</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>    X2<span class="op">::</span><span class="dt">Array{Float64,2}</span>;</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>    Z<span class="op">::</span><span class="dt">Array{Float64,2}</span>;</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>    ShareVec<span class="op">::</span><span class="dt">Vector{Float64}</span>;</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>    marketIndex<span class="op">::</span><span class="dt">Vector{Int64}</span>;</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>    logitshare<span class="op">::</span><span class="dt">Vector{Float64}</span>;</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>    randomDrawMat<span class="op">::</span><span class="dt">Array{Float64,2}</span>;</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>    marketIndexMat<span class="op">::</span><span class="dt">BitMatrix</span></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a><span class="kw">mutable struct</span> parameter_struct</span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>    Nsim<span class="op">::</span><span class="dt">Int</span>;</span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>    T<span class="op">::</span><span class="dt">Int</span>;</span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>    N<span class="op">::</span><span class="dt">Int</span>;</span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="3">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> file <span class="kw">in</span> <span class="fu">readdir</span>(<span class="st">"functions/demand_estimation"</span>)</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">include</span>(<span class="st">"functions/demand_estimation/"</span> <span class="op">*</span> file)</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="cf">end</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="4">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> CSV.<span class="fu">read</span>(<span class="st">"data/demand_estimation_merger/chap3_data.csv"</span>, DataFrame);</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="fu">first</span>(data, <span class="fl">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="5">

<div><div style="float: left;"><span>5×61 DataFrame</span></div><div style="clear: both;"></div></div><div class="data-frame" style="overflow-x: scroll;"><table class="data-frame table table-sm table-striped" style="margin-bottom: 6px;"><thead><tr class="header"><th class="rowNumber" style="font-weight: bold; text-align: right;">Row</th><th style="text-align: left;">NameID</th><th style="text-align: left;">year</th><th style="text-align: left;">Maker</th><th style="text-align: left;">Type</th><th style="text-align: left;">Name</th><th style="text-align: left;">Sales</th><th style="text-align: left;">Model</th><th style="text-align: left;">price</th><th style="text-align: left;">kata</th><th style="text-align: left;">FuelEfficiency</th><th style="text-align: left;">capacity</th><th style="text-align: left;">FuelType</th><th style="text-align: left;">HH</th><th style="text-align: left;">size</th><th style="text-align: left;">hppw</th><th style="text-align: left;">share</th><th style="text-align: left;">share0</th><th style="text-align: left;">hppw_sum_own</th><th style="text-align: left;">FuelEfficiency_sum_own</th><th style="text-align: left;">size_sum_own</th><th style="text-align: left;">hppw_sqr_sum_own</th><th style="text-align: left;">FuelEfficiency_sqr_sum_own</th><th style="text-align: left;">size_sqr_sum_own</th><th style="text-align: left;">hppw_sum_mkt</th><th style="text-align: left;">FuelEfficiency_sum_mkt</th><th style="text-align: left;">size_sum_mkt</th><th style="text-align: left;">hppw_sqr_sum_mkt</th><th style="text-align: left;">FuelEfficiency_sqr_sum_mkt</th><th style="text-align: left;">size_sqr_sum_mkt</th><th style="text-align: left;">iv_BLP_own_hppw</th><th style="text-align: left;">iv_BLP_own_FuelEfficiency</th><th style="text-align: left;">iv_BLP_own_size</th><th style="text-align: left;">iv_BLP_other_hppw</th><th style="text-align: left;">iv_BLP_other_FuelEfficiency</th><th style="text-align: left;">iv_BLP_other_size</th><th style="text-align: left;">iv_BLP_own_num</th><th style="text-align: left;">iv_BLP_other_num</th><th style="text-align: left;">iv_GH_own_hppw</th><th style="text-align: left;">iv_GH_own_FuelEfficiency</th><th style="text-align: left;">iv_GH_own_size</th><th style="text-align: left;">iv_GH_other_hppw</th><th style="text-align: left;">iv_GH_other_FuelEfficiency</th><th style="text-align: left;">iv_GH_other_size</th><th style="text-align: left;">logit_share</th><th style="text-align: left;">iv_BLP_own_hppw_nest</th><th style="text-align: left;">iv_BLP_own_FuelEfficiency_nest</th><th style="text-align: left;">iv_BLP_own_size_nest</th><th style="text-align: left;">iv_BLP_other_hppw_nest</th><th style="text-align: left;">iv_BLP_other_FuelEfficiency_nest</th><th style="text-align: left;">iv_BLP_other_size_nest</th><th style="text-align: left;">iv_BLP_own_num_nest</th><th style="text-align: left;">iv_BLP_other_num_nest</th><th style="text-align: left;">iv_GH_own_hppw_nest</th><th style="text-align: left;">iv_GH_own_FuelEfficiency_nest</th><th style="text-align: left;">iv_GH_own_size_nest</th><th style="text-align: left;">iv_GH_other_hppw_nest</th><th style="text-align: left;">iv_GH_other_FuelEfficiency_nest</th><th style="text-align: left;">iv_GH_other_size_nest</th><th style="text-align: left;">sum_year_body</th><th style="text-align: left;">inside_share</th><th style="text-align: left;">log_inside_share</th></tr><tr class="subheader headerLastRow"><th class="rowNumber" style="font-weight: bold; text-align: right;"></th><th title="Int64" style="text-align: left;">Int64</th><th title="Int64" style="text-align: left;">Int64</th><th title="String15" style="text-align: left;">String15</th><th title="String7" style="text-align: left;">String7</th><th title="String31" style="text-align: left;">String31</th><th title="Int64" style="text-align: left;">Int64</th><th title="String" style="text-align: left;">String</th><th title="Float64" style="text-align: left;">Float64</th><th title="String15" style="text-align: left;">String15</th><th title="Float64" style="text-align: left;">Float64</th><th title="Int64" style="text-align: left;">Int64</th><th title="String15" style="text-align: left;">String15</th><th title="Int64" style="text-align: left;">Int64</th><th title="Float64" style="text-align: left;">Float64</th><th title="Float64" style="text-align: left;">Float64</th><th title="Float64" style="text-align: left;">Float64</th><th title="Float64" style="text-align: left;">Float64</th><th title="Float64" style="text-align: left;">Float64</th><th title="Float64" style="text-align: left;">Float64</th><th title="Float64" style="text-align: left;">Float64</th><th title="Float64" style="text-align: left;">Float64</th><th title="Float64" style="text-align: left;">Float64</th><th title="Float64" style="text-align: left;">Float64</th><th title="Float64" style="text-align: left;">Float64</th><th title="Float64" style="text-align: left;">Float64</th><th title="Float64" style="text-align: left;">Float64</th><th title="Float64" style="text-align: left;">Float64</th><th title="Float64" style="text-align: left;">Float64</th><th title="Float64" style="text-align: left;">Float64</th><th title="Float64" style="text-align: left;">Float64</th><th title="Float64" style="text-align: left;">Float64</th><th title="Float64" style="text-align: left;">Float64</th><th title="Float64" style="text-align: left;">Float64</th><th title="Float64" style="text-align: left;">Float64</th><th title="Float64" style="text-align: left;">Float64</th><th title="Int64" style="text-align: left;">Int64</th><th title="Int64" style="text-align: left;">Int64</th><th title="Float64" style="text-align: left;">Float64</th><th title="Float64" style="text-align: left;">Float64</th><th title="Float64" style="text-align: left;">Float64</th><th title="Float64" style="text-align: left;">Float64</th><th title="Float64" style="text-align: left;">Float64</th><th title="Float64" style="text-align: left;">Float64</th><th title="Float64" style="text-align: left;">Float64</th><th title="Float64" style="text-align: left;">Float64</th><th title="Float64" style="text-align: left;">Float64</th><th title="Float64" style="text-align: left;">Float64</th><th title="Float64" style="text-align: left;">Float64</th><th title="Float64" style="text-align: left;">Float64</th><th title="Float64" style="text-align: left;">Float64</th><th title="Int64" style="text-align: left;">Int64</th><th title="Int64" style="text-align: left;">Int64</th><th title="Float64" style="text-align: left;">Float64</th><th title="Float64" style="text-align: left;">Float64</th><th title="Float64" style="text-align: left;">Float64</th><th title="Float64" style="text-align: left;">Float64</th><th title="Float64" style="text-align: left;">Float64</th><th title="Float64" style="text-align: left;">Float64</th><th title="Int64" style="text-align: left;">Int64</th><th title="Float64" style="text-align: left;">Float64</th><th title="Float64" style="text-align: left;">Float64</th></tr></thead><tbody><tr><td class="rowNumber" style="font-weight: bold; text-align: right;">1</td><td style="text-align: right;">14</td><td style="text-align: right;">2011</td><td style="text-align: left;">Audi</td><td style="text-align: left;">Foreign</td><td style="text-align: left;">A1シリーズ</td><td style="text-align: right;">4206</td><td style="text-align: left;">1.4 TFSI</td><td style="text-align: right;">2.99804</td><td style="text-align: left;">DBA-8XCAX</td><td style="text-align: right;">19.4</td><td style="text-align: right;">4</td><td style="text-align: left;">ハイオク</td><td style="text-align: right;">53783435</td><td style="text-align: right;">9.94723</td><td style="text-align: right;">0.102521</td><td style="text-align: right;">7.82025e-5</td><td style="text-align: right;">0.938981</td><td style="text-align: right;">0.299061</td><td style="text-align: right;">49.4</td><td style="text-align: right;">33.1397</td><td style="text-align: right;">0.0299428</td><td style="text-align: right;">831.48</td><td style="text-align: right;">369.074</td><td style="text-align: right;">1.93875</td><td style="text-align: right;">276.2</td><td style="text-align: right;">218.564</td><td style="text-align: right;">0.207044</td><td style="text-align: right;">4206.04</td><td style="text-align: right;">2550.97</td><td style="text-align: right;">0.19654</td><td style="text-align: right;">30.0</td><td style="text-align: right;">23.1925</td><td style="text-align: right;">15.7229</td><td style="text-align: right;">2464.5</td><td style="text-align: right;">1811.61</td><td style="text-align: right;">2</td><td style="text-align: right;">157</td><td style="text-align: right;">0.000154423</td><td style="text-align: right;">43.84</td><td style="text-align: right;">6.61965</td><td style="text-align: right;">0.216315</td><td style="text-align: right;">5703.33</td><td style="text-align: right;">1332.33</td><td style="text-align: right;">-9.39325</td><td style="text-align: right;">0.19654</td><td style="text-align: right;">30.0</td><td style="text-align: right;">23.1925</td><td style="text-align: right;">1.63969</td><td style="text-align: right;">226.8</td><td style="text-align: right;">185.424</td><td style="text-align: right;">2</td><td style="text-align: right;">16</td><td style="text-align: right;">0.000154423</td><td style="text-align: right;">43.84</td><td style="text-align: right;">6.61965</td><td style="text-align: right;">0.00906462</td><td style="text-align: right;">596.48</td><td style="text-align: right;">76.1391</td><td style="text-align: right;">143357</td><td style="text-align: right;">0.0293393</td><td style="text-align: right;">-3.52883</td></tr><tr><td class="rowNumber" style="font-weight: bold; text-align: right;">2</td><td style="text-align: right;">14</td><td style="text-align: right;">2012</td><td style="text-align: left;">Audi</td><td style="text-align: left;">Foreign</td><td style="text-align: left;">A1シリーズ</td><td style="text-align: right;">4502</td><td style="text-align: left;">1.4 TFSI</td><td style="text-align: right;">2.835</td><td style="text-align: left;">DBA-8XCAX</td><td style="text-align: right;">19.4</td><td style="text-align: right;">4</td><td style="text-align: left;">ハイオク</td><td style="text-align: right;">54171475</td><td style="text-align: right;">9.94723</td><td style="text-align: right;">0.102521</td><td style="text-align: right;">8.31065e-5</td><td style="text-align: right;">0.919762</td><td style="text-align: right;">0.309984</td><td style="text-align: right;">49.8</td><td style="text-align: right;">33.1791</td><td style="text-align: right;">0.0323769</td><td style="text-align: right;">842.36</td><td style="text-align: right;">370.051</td><td style="text-align: right;">1.83969</td><td style="text-align: right;">298.3</td><td style="text-align: right;">215.509</td><td style="text-align: right;">0.182524</td><td style="text-align: right;">4896.57</td><td style="text-align: right;">2484.02</td><td style="text-align: right;">0.207463</td><td style="text-align: right;">30.4</td><td style="text-align: right;">23.2319</td><td style="text-align: right;">16.1851</td><td style="text-align: right;">2659.3</td><td style="text-align: right;">1891.36</td><td style="text-align: right;">2</td><td style="text-align: right;">164</td><td style="text-align: right;">0.000348865</td><td style="text-align: right;">39.2</td><td style="text-align: right;">6.8118</td><td style="text-align: right;">0.22062</td><td style="text-align: right;">6457.49</td><td style="text-align: right;">1428.51</td><td style="text-align: right;">-9.31175</td><td style="text-align: right;">0.207463</td><td style="text-align: right;">30.4</td><td style="text-align: right;">23.2319</td><td style="text-align: right;">1.5297</td><td style="text-align: right;">248.5</td><td style="text-align: right;">182.33</td><td style="text-align: right;">2</td><td style="text-align: right;">16</td><td style="text-align: right;">0.000348865</td><td style="text-align: right;">39.2</td><td style="text-align: right;">6.8118</td><td style="text-align: right;">0.00466326</td><td style="text-align: right;">434.17</td><td style="text-align: right;">69.7742</td><td style="text-align: right;">159210</td><td style="text-align: right;">0.0282771</td><td style="text-align: right;">-3.5657</td></tr><tr><td class="rowNumber" style="font-weight: bold; text-align: right;">3</td><td style="text-align: right;">14</td><td style="text-align: right;">2013</td><td style="text-align: left;">Audi</td><td style="text-align: left;">Foreign</td><td style="text-align: left;">A1シリーズ</td><td style="text-align: right;">5071</td><td style="text-align: left;">1.4 TFSI</td><td style="text-align: right;">2.82326</td><td style="text-align: left;">DBA-8XCAX</td><td style="text-align: right;">19.4</td><td style="text-align: right;">4</td><td style="text-align: left;">ハイオク</td><td style="text-align: right;">54594744</td><td style="text-align: right;">9.94723</td><td style="text-align: right;">0.102521</td><td style="text-align: right;">9.28844e-5</td><td style="text-align: right;">0.919563</td><td style="text-align: right;">0.311828</td><td style="text-align: right;">52.7</td><td style="text-align: right;">33.5456</td><td style="text-align: right;">0.0327145</td><td style="text-align: right;">947.05</td><td style="text-align: right;">378.12</td><td style="text-align: right;">1.95986</td><td style="text-align: right;">334.4</td><td style="text-align: right;">228.399</td><td style="text-align: right;">0.196626</td><td style="text-align: right;">5760.2</td><td style="text-align: right;">2656.1</td><td style="text-align: right;">0.209307</td><td style="text-align: right;">33.3</td><td style="text-align: right;">23.5983</td><td style="text-align: right;">15.5385</td><td style="text-align: right;">2762.2</td><td style="text-align: right;">1857.63</td><td style="text-align: right;">2</td><td style="text-align: right;">161</td><td style="text-align: right;">0.000308215</td><td style="text-align: right;">31.37</td><td style="text-align: right;">7.59138</td><td style="text-align: right;">0.201628</td><td style="text-align: right;">6612.26</td><td style="text-align: right;">1400.56</td><td style="text-align: right;">-9.2003</td><td style="text-align: right;">0.209307</td><td style="text-align: right;">33.3</td><td style="text-align: right;">23.5983</td><td style="text-align: right;">1.64803</td><td style="text-align: right;">281.7</td><td style="text-align: right;">194.853</td><td style="text-align: right;">2</td><td style="text-align: right;">17</td><td style="text-align: right;">0.000308215</td><td style="text-align: right;">31.37</td><td style="text-align: right;">7.59138</td><td style="text-align: right;">0.00467482</td><td style="text-align: right;">281.31</td><td style="text-align: right;">83.5873</td><td style="text-align: right;">191874</td><td style="text-align: right;">0.0264288</td><td style="text-align: right;">-3.6333</td></tr><tr><td class="rowNumber" style="font-weight: bold; text-align: right;">4</td><td style="text-align: right;">15</td><td style="text-align: right;">2006</td><td style="text-align: left;">Audi</td><td style="text-align: left;">Foreign</td><td style="text-align: left;">A3シリーズ</td><td style="text-align: right;">4830</td><td style="text-align: left;">アトラクション</td><td style="text-align: right;">2.91889</td><td style="text-align: left;">GH-8PBSE</td><td style="text-align: right;">12.2</td><td style="text-align: right;">5</td><td style="text-align: left;">ハイオク</td><td style="text-align: right;">51102005</td><td style="text-align: right;">10.8151</td><td style="text-align: right;">0.075</td><td style="text-align: right;">9.45168e-5</td><td style="text-align: right;">0.915228</td><td style="text-align: right;">0.163435</td><td style="text-align: right;">23.4</td><td style="text-align: right;">22.4202</td><td style="text-align: right;">0.0134458</td><td style="text-align: right;">274.28</td><td style="text-align: right;">251.645</td><td style="text-align: right;">1.97874</td><td style="text-align: right;">224.8</td><td style="text-align: right;">231.473</td><td style="text-align: right;">0.207998</td><td style="text-align: right;">2577.22</td><td style="text-align: right;">2715.96</td><td style="text-align: right;">0.0884354</td><td style="text-align: right;">11.2</td><td style="text-align: right;">11.6051</td><td style="text-align: right;">16.1609</td><td style="text-align: right;">2391.0</td><td style="text-align: right;">1840.9</td><td style="text-align: right;">1</td><td style="text-align: right;">163</td><td style="text-align: right;">0.000180509</td><td style="text-align: right;">1.0</td><td style="text-align: right;">0.624049</td><td style="text-align: right;">0.255313</td><td style="text-align: right;">4557.36</td><td style="text-align: right;">1004.29</td><td style="text-align: right;">-9.17815</td><td style="text-align: right;">0.0884354</td><td style="text-align: right;">11.2</td><td style="text-align: right;">11.6051</td><td style="text-align: right;">1.81531</td><td style="text-align: right;">201.4</td><td style="text-align: right;">209.053</td><td style="text-align: right;">1</td><td style="text-align: right;">18</td><td style="text-align: right;">0.000180509</td><td style="text-align: right;">1.0</td><td style="text-align: right;">0.624049</td><td style="text-align: right;">0.023506</td><td style="text-align: right;">67.9</td><td style="text-align: right;">47.8497</td><td style="text-align: right;">169488</td><td style="text-align: right;">0.0284976</td><td style="text-align: right;">-3.55794</td></tr><tr><td class="rowNumber" style="font-weight: bold; text-align: right;">5</td><td style="text-align: right;">15</td><td style="text-align: right;">2007</td><td style="text-align: left;">Audi</td><td style="text-align: left;">Foreign</td><td style="text-align: left;">A3シリーズ</td><td style="text-align: right;">3874</td><td style="text-align: left;">アトラクション</td><td style="text-align: right;">2.93944</td><td style="text-align: left;">GH-8PBSE</td><td style="text-align: right;">12.2</td><td style="text-align: right;">5</td><td style="text-align: left;">ハイオク</td><td style="text-align: right;">51713048</td><td style="text-align: right;">10.8151</td><td style="text-align: right;">0.075</td><td style="text-align: right;">7.49134e-5</td><td style="text-align: right;">0.920174</td><td style="text-align: right;">0.312689</td><td style="text-align: right;">35.4</td><td style="text-align: right;">33.111</td><td style="text-align: right;">0.0357225</td><td style="text-align: right;">418.28</td><td style="text-align: right;">365.938</td><td style="text-align: right;">2.08997</td><td style="text-align: right;">225.1</td><td style="text-align: right;">232.358</td><td style="text-align: right;">0.230908</td><td style="text-align: right;">2583.73</td><td style="text-align: right;">2733.06</td><td style="text-align: right;">0.237689</td><td style="text-align: right;">23.2</td><td style="text-align: right;">22.2959</td><td style="text-align: right;">16.0534</td><td style="text-align: right;">2382.0</td><td style="text-align: right;">1839.16</td><td style="text-align: right;">2</td><td style="text-align: right;">162</td><td style="text-align: right;">0.00569413</td><td style="text-align: right;">1.04</td><td style="text-align: right;">0.639514</td><td style="text-align: right;">0.252811</td><td style="text-align: right;">4335.92</td><td style="text-align: right;">1039.11</td><td style="text-align: right;">-9.41599</td><td style="text-align: right;">0.237689</td><td style="text-align: right;">23.2</td><td style="text-align: right;">22.2959</td><td style="text-align: right;">1.77728</td><td style="text-align: right;">189.7</td><td style="text-align: right;">199.247</td><td style="text-align: right;">2</td><td style="text-align: right;">17</td><td style="text-align: right;">0.00569413</td><td style="text-align: right;">1.04</td><td style="text-align: right;">0.639514</td><td style="text-align: right;">0.0242194</td><td style="text-align: right;">67.05</td><td style="text-align: right;">45.7941</td><td style="text-align: right;">162015</td><td style="text-align: right;">0.0239114</td><td style="text-align: right;">-3.7334</td></tr></tbody></table></div>
</div>
</div>
<section id="data-cleaning" class="level2" data-number="4.1">
<h2 data-number="4.1" class="anchored" data-anchor-id="data-cleaning"><span class="header-section-number">4.1</span> Data cleaning</h2>
<div class="cell" data-execution_count="5">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>data[!, <span class="op">:</span>Foreign_d] <span class="op">=</span> data[<span class="op">:</span>, <span class="op">:</span><span class="dt">Type</span>] <span class="op">.==</span> <span class="st">"Foreign"</span>;</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>data[!, <span class="op">:</span>FuelRegular_d] <span class="op">=</span> data[<span class="op">:</span>, <span class="op">:</span>FuelType] <span class="op">.==</span> <span class="st">"レギュラー"</span>;</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>data[!, <span class="op">:</span>capacity_d] <span class="op">=</span> data[<span class="op">:</span>, <span class="op">:</span>capacity] <span class="op">.&gt;</span> <span class="fl">4</span>;</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="fu">transform!</span>(</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>    data, </span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>    [</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>        <span class="op">:</span>year <span class="op">=&gt;</span> <span class="fu">ByRow</span>(<span class="fu">isequal</span>(v))<span class="op">=&gt;</span> <span class="fu">Symbol</span>(<span class="st">"year_"</span> <span class="op">*</span> <span class="fu">string</span>(v)) </span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>        for v <span class="kw">in</span> <span class="fu">unique</span>(data.year)</span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>        ]</span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>    );</span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a><span class="fu">select!</span>(data, <span class="fu">Not</span>(<span class="op">:</span>year_2006));</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="section" class="level2" data-number="4.2">
<h2 data-number="4.2" class="anchored" data-anchor-id="section"><span class="header-section-number">4.2</span> 4.2</h2>
<div class="cell" data-execution_count="6">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sort!</span>(data, [<span class="op">:</span>year, <span class="op">:</span>Maker, <span class="op">:</span>price]);</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>N <span class="op">=</span> <span class="fu">nrow</span>(data);</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>T <span class="op">=</span> <span class="fu">length</span>(<span class="fu">unique</span>(data.year));</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>X1 <span class="op">=</span> <span class="fu">hcat</span>(</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ones</span>(N),</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">Matrix</span>(</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>        data[<span class="op">:</span>,[</span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>            <span class="op">:</span>price, <span class="op">:</span>FuelEfficiency, <span class="op">:</span>hppw, <span class="op">:</span>size, </span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>            <span class="op">:</span>capacity_d, <span class="op">:</span>FuelRegular_d, <span class="op">:</span>Foreign_d</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>            ]]</span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>        ),</span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">Matrix</span>(data[<span class="op">:</span>, <span class="st">r"^year_"</span>])    </span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>    );</span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>X2 <span class="op">=</span> <span class="fu">Matrix</span>(data[<span class="op">:</span>, [<span class="op">:</span>price]]);</span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a>Z <span class="op">=</span> <span class="fu">hcat</span>(</span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ones</span>(N),</span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">Matrix</span>(</span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a>        data[<span class="op">:</span>, [</span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a>            <span class="op">:</span>FuelEfficiency, <span class="op">:</span>hppw, <span class="op">:</span>size, </span>
<span id="cb6-20"><a href="#cb6-20" aria-hidden="true" tabindex="-1"></a>            <span class="op">:</span>capacity_d, <span class="op">:</span>FuelRegular_d, <span class="op">:</span>Foreign_d</span>
<span id="cb6-21"><a href="#cb6-21" aria-hidden="true" tabindex="-1"></a>            ]]</span>
<span id="cb6-22"><a href="#cb6-22" aria-hidden="true" tabindex="-1"></a>        ),</span>
<span id="cb6-23"><a href="#cb6-23" aria-hidden="true" tabindex="-1"></a>    <span class="fu">Matrix</span>(data[<span class="op">:</span>, <span class="st">r"^year_"</span>]),</span>
<span id="cb6-24"><a href="#cb6-24" aria-hidden="true" tabindex="-1"></a>    <span class="fu">Matrix</span>(data[<span class="op">:</span>, <span class="st">r"^iv_GH</span><span class="sc">.*</span><span class="ch">(?</span><span class="st">&lt;!nest</span><span class="ch">)</span><span class="sc">$</span><span class="st">"])</span></span>
<span id="cb6-25"><a href="#cb6-25" aria-hidden="true" tabindex="-1"></a><span class="st">    );</span></span>
<span id="cb6-26"><a href="#cb6-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-27"><a href="#cb6-27" aria-hidden="true" tabindex="-1"></a>Random<span class="sc">.</span><span class="st">seed!</span><span class="ch">(</span><span class="st">42</span><span class="ch">)</span><span class="st">;</span></span>
<span id="cb6-28"><a href="#cb6-28" aria-hidden="true" tabindex="-1"></a>Nsim <span class="op">=</span> <span class="fl">1000</span>;</span>
<span id="cb6-29"><a href="#cb6-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-30"><a href="#cb6-30" aria-hidden="true" tabindex="-1"></a>randomDrawMat <span class="op">=</span> <span class="fu">randn</span>(<span class="fu">size</span>(X2)[<span class="fl">2</span>], Nsim);</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="7">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>marketIndex <span class="op">=</span> data.year;</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>uniqueMarketIndex <span class="op">=</span> <span class="fu">sort</span>(<span class="fu">unique</span>(data.year));</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>marketIndexMat <span class="op">=</span> <span class="fu">reduce</span>(</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>    hcat, </span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>    [marketIndex <span class="op">.==</span> market for market <span class="kw">in</span> uniqueMarketIndex]</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>    );</span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>datalist <span class="op">=</span> <span class="fu">datalist_struct</span>(</span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>    X1, </span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>    X2, </span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>    Z, </span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a>    data.share, </span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a>    marketIndex, </span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a>    data.logit_share, </span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a>    randomDrawMat, </span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a>    marketIndexMat</span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a>    );</span>
<span id="cb7-19"><a href="#cb7-19" aria-hidden="true" tabindex="-1"></a>parameter <span class="op">=</span> <span class="fu">parameter_struct</span>(Nsim, T, N);</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="section-1" class="level2" data-number="4.3">
<h2 data-number="4.3" class="anchored" data-anchor-id="section-1"><span class="header-section-number">4.3</span> 4.3</h2>
<div class="cell" data-execution_count="10">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>initial_x <span class="op">=</span> [<span class="fl">0.1</span>];</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>delta_ini <span class="op">=</span> <span class="fu">calculateMeanUtil</span>(initial_x, datalist, datalist.logitshare);</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="11">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>objFunc_for_Optim <span class="op">=</span> <span class="fu">TwiceDifferentiable</span>(</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>    x <span class="op">-&gt;</span> <span class="fu">calculateGMMObjective</span>(x, datalist, delta_ini),</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>    initial_x;</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>    autodiff <span class="op">=</span> <span class="op">:</span>forward</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>    );</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a><span class="pp">@time</span> resultGMM <span class="op">=</span> <span class="fu">optimize</span>(</span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>    objFunc_for_Optim,</span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>    [<span class="fl">0.0</span>],</span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>    [<span class="cn">Inf</span>],</span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>    initial_x,</span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>    Optim.<span class="fu">Options</span>(show_trace <span class="op">=</span> <span class="cn">false</span>)</span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="14">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>W <span class="op">=</span> <span class="fu">inv</span>(datalist.Z<span class="op">'</span> <span class="op">*</span> datalist.Z);    </span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>delta <span class="op">=</span> <span class="fu">calculateMeanUtil</span>(resultGMM.minimizer, datalist, delta_ini);</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>beta_hat <span class="op">=</span> (</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>    (datalist.X1<span class="op">'</span> <span class="op">*</span> datalist.Z <span class="op">*</span> W <span class="op">*</span> datalist.Z<span class="op">'</span> <span class="op">*</span> datalist.X1) <span class="op">\</span> </span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>    (datalist.X1<span class="op">'</span> <span class="op">*</span> datalist.Z <span class="op">*</span> W <span class="op">*</span> datalist.Z<span class="op">'</span> <span class="op">*</span> delta)</span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>);</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="15">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>Xi <span class="op">=</span> delta <span class="op">-</span> X1 <span class="op">*</span> beta_hat;</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>Omega_hat <span class="op">=</span> <span class="fu">reduce</span>(<span class="op">+</span>, Z[i,<span class="op">:</span>] <span class="op">*</span> Z[i,<span class="op">:</span>]<span class="ch">' .* Xi[i]^2 ./ N for i = 1:N);</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>Ddelta <span class="op">=</span> ForwardDiff.<span class="fu">jacobian</span>(</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>    x <span class="op">-&gt;</span> delta_ini <span class="op">=</span> <span class="fu">calculateMeanUtil</span>(x, datalist, delta), </span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>    resultGMM.minimizer</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>    );</span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>G <span class="op">=</span> Z<span class="op">'</span> <span class="op">*</span> <span class="fu">hcat</span>(<span class="op">-</span> X1, Ddelta) <span class="op">./</span> N;</span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>AsyVarMat <span class="op">=</span> (G<span class="op">'</span> <span class="op">*</span> W <span class="op">*</span> G) <span class="op">\</span> G<span class="op">'</span> <span class="op">*</span> W <span class="op">*</span> Omega_hat <span class="op">*</span> W <span class="op">*</span> G <span class="op">*</span> <span class="fu">inv</span>(G<span class="op">'</span> <span class="op">*</span> W <span class="op">*</span> G);</span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>Ase <span class="op">=</span> <span class="fu">sqrt</span>.(<span class="fu">diag</span>(AsyVarMat) <span class="op">./</span> N);</span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a><span class="fu">DataFrame</span>(</span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a>    Var <span class="op">=</span> [</span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Const"</span>, <span class="st">"Price"</span>, <span class="st">"Fuel Efficiency"</span>, <span class="st">"hppw"</span>, <span class="st">"size"</span>, </span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a>        <span class="st">"capacity_d"</span>, <span class="st">"FuelRegular_d"</span>, <span class="st">"Foreign_d"</span>,</span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a>        <span class="st">"year_2007"</span>, <span class="st">"year_2008"</span>, <span class="st">"year_2009"</span>, </span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a>        <span class="st">"year_2010"</span>, <span class="st">"year_2011"</span>, <span class="st">"year_2012"</span>, </span>
<span id="cb11-16"><a href="#cb11-16" aria-hidden="true" tabindex="-1"></a>        <span class="st">"year_2013"</span>, <span class="st">"year_2014"</span>, <span class="st">"year_2015"</span>, <span class="st">"year_2016"</span>, </span>
<span id="cb11-17"><a href="#cb11-17" aria-hidden="true" tabindex="-1"></a>        <span class="st">"random_price"</span></span>
<span id="cb11-18"><a href="#cb11-18" aria-hidden="true" tabindex="-1"></a>        ],</span>
<span id="cb11-19"><a href="#cb11-19" aria-hidden="true" tabindex="-1"></a>    Est <span class="op">=</span> <span class="fu">vcat</span>(beta_hat, resultGMM.minimizer),</span>
<span id="cb11-20"><a href="#cb11-20" aria-hidden="true" tabindex="-1"></a>    se <span class="op">=</span> Ase</span>
<span id="cb11-21"><a href="#cb11-21" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="12">

<div><div style="float: left;"><span>19×3 DataFrame</span></div><div style="clear: both;"></div></div><div class="data-frame" style="overflow-x: scroll;"><table class="data-frame table table-sm table-striped" style="margin-bottom: 6px;"><thead><tr class="header"><th class="rowNumber" style="font-weight: bold; text-align: right;">Row</th><th style="text-align: left;">Var</th><th style="text-align: left;">Est</th><th style="text-align: left;">se</th></tr><tr class="subheader headerLastRow"><th class="rowNumber" style="font-weight: bold; text-align: right;"></th><th title="String" style="text-align: left;">String</th><th title="Float64" style="text-align: left;">Float64</th><th title="Float64" style="text-align: left;">Float64</th></tr></thead><tbody><tr><td class="rowNumber" style="font-weight: bold; text-align: right;">1</td><td style="text-align: left;">Const</td><td style="text-align: right;">-13.9027</td><td style="text-align: right;">0.568553</td></tr><tr><td class="rowNumber" style="font-weight: bold; text-align: right;">2</td><td style="text-align: left;">Price</td><td style="text-align: right;">-2.2782</td><td style="text-align: right;">0.660278</td></tr><tr><td class="rowNumber" style="font-weight: bold; text-align: right;">3</td><td style="text-align: left;">Fuel Efficiency</td><td style="text-align: right;">0.196678</td><td style="text-align: right;">0.012633</td></tr><tr><td class="rowNumber" style="font-weight: bold; text-align: right;">4</td><td style="text-align: left;">hppw</td><td style="text-align: right;">14.6705</td><td style="text-align: right;">3.61249</td></tr><tr><td class="rowNumber" style="font-weight: bold; text-align: right;">5</td><td style="text-align: left;">size</td><td style="text-align: right;">0.55519</td><td style="text-align: right;">0.0766644</td></tr><tr><td class="rowNumber" style="font-weight: bold; text-align: right;">6</td><td style="text-align: left;">capacity_d</td><td style="text-align: right;">-0.323059</td><td style="text-align: right;">0.139002</td></tr><tr><td class="rowNumber" style="font-weight: bold; text-align: right;">7</td><td style="text-align: left;">FuelRegular_d</td><td style="text-align: right;">-1.13995</td><td style="text-align: right;">0.292049</td></tr><tr><td class="rowNumber" style="font-weight: bold; text-align: right;">8</td><td style="text-align: left;">Foreign_d</td><td style="text-align: right;">1.04315</td><td style="text-align: right;">0.19486</td></tr><tr><td class="rowNumber" style="font-weight: bold; text-align: right;">9</td><td style="text-align: left;">year_2007</td><td style="text-align: right;">-0.836153</td><td style="text-align: right;">0.176559</td></tr><tr><td class="rowNumber" style="font-weight: bold; text-align: right;">10</td><td style="text-align: left;">year_2008</td><td style="text-align: right;">-0.704257</td><td style="text-align: right;">0.169228</td></tr><tr><td class="rowNumber" style="font-weight: bold; text-align: right;">11</td><td style="text-align: left;">year_2009</td><td style="text-align: right;">-0.856319</td><td style="text-align: right;">0.169012</td></tr><tr><td class="rowNumber" style="font-weight: bold; text-align: right;">12</td><td style="text-align: left;">year_2010</td><td style="text-align: right;">-0.0976351</td><td style="text-align: right;">0.152402</td></tr><tr><td class="rowNumber" style="font-weight: bold; text-align: right;">13</td><td style="text-align: left;">year_2011</td><td style="text-align: right;">-0.254089</td><td style="text-align: right;">0.152604</td></tr><tr><td class="rowNumber" style="font-weight: bold; text-align: right;">14</td><td style="text-align: left;">year_2012</td><td style="text-align: right;">-0.487342</td><td style="text-align: right;">0.16411</td></tr><tr><td class="rowNumber" style="font-weight: bold; text-align: right;">15</td><td style="text-align: left;">year_2013</td><td style="text-align: right;">-0.625138</td><td style="text-align: right;">0.166785</td></tr><tr><td class="rowNumber" style="font-weight: bold; text-align: right;">16</td><td style="text-align: left;">year_2014</td><td style="text-align: right;">-1.04974</td><td style="text-align: right;">0.180157</td></tr><tr><td class="rowNumber" style="font-weight: bold; text-align: right;">17</td><td style="text-align: left;">year_2015</td><td style="text-align: right;">-1.15121</td><td style="text-align: right;">0.179025</td></tr><tr><td class="rowNumber" style="font-weight: bold; text-align: right;">18</td><td style="text-align: left;">year_2016</td><td style="text-align: right;">-1.2502</td><td style="text-align: right;">0.180264</td></tr><tr><td class="rowNumber" style="font-weight: bold; text-align: right;">19</td><td style="text-align: left;">random_price</td><td style="text-align: right;">0.70029</td><td style="text-align: right;">0.248176</td></tr></tbody></table></div>
</div>
</div>
<div class="cell" data-execution_count="16">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>market2016Index <span class="op">=</span> data.year <span class="op">.==</span> <span class="fl">2016</span>;</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>data_2016 <span class="op">=</span> data[market2016Index, <span class="op">:</span>];</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="pp">@time</span> elasmat_2016 <span class="op">=</span> <span class="fu">calculateElasticity</span>(</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>    data_2016.price,</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>    X2[market2016Index, <span class="op">:</span>],</span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>    beta_hat,</span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>    resultGMM.minimizer,</span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>    randomDrawMat,</span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>    delta[market2016Index]</span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a>);</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  0.365113 seconds (810.67 k allocations: 62.944 MiB, 5.17% gc time, 89.56% compilation time)</code></pre>
</div>
</div>
</section>
<section id="section-2" class="level2" data-number="4.4">
<h2 data-number="4.4" class="anchored" data-anchor-id="section-2"><span class="header-section-number">4.4</span> 5</h2>
<div class="cell" data-execution_count="17">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>Pricevec_2016 <span class="op">=</span> data_2016.price;</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>Sharevec_2016 <span class="op">=</span> data_2016.share;</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>Xi_2016 <span class="op">=</span> Xi[data.year <span class="op">.==</span> <span class="fl">2016</span>];</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>Ownership_2016 <span class="op">=</span> data_2016.Maker <span class="op">.==</span> <span class="fu">permutedims</span>(data_2016.Maker);</span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>Derivative_2016 <span class="op">=</span> <span class="op">-</span> elasmat_2016 <span class="op">.*</span> Sharevec_2016<span class="op">'</span> <span class="op">./</span> Pricevec_2016;</span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>Delta_2016 <span class="op">=</span> Derivative_2016 <span class="op">.*</span> Ownership_2016;</span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>Marginal_Cost_2016 <span class="op">=</span> Pricevec_2016 <span class="op">-</span> (Delta_2016 <span class="op">\</span> Sharevec_2016);</span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>pred_mc_df <span class="op">=</span> <span class="fu">DataFrame</span>(</span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a>    Maker <span class="op">=</span> data_2016.Maker, </span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a>    Name <span class="op">=</span> data_2016.Name, </span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a>    Price <span class="op">=</span> data_2016.price,</span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a>    MC <span class="op">=</span> Marginal_Cost_2016,</span>
<span id="cb14-14"><a href="#cb14-14" aria-hidden="true" tabindex="-1"></a>    Margin <span class="op">=</span> (data_2016.price <span class="op">.-</span> Marginal_Cost_2016) <span class="op">./</span> data_2016.price</span>
<span id="cb14-15"><a href="#cb14-15" aria-hidden="true" tabindex="-1"></a>);</span>
<span id="cb14-16"><a href="#cb14-16" aria-hidden="true" tabindex="-1"></a><span class="fu">first</span>(pred_mc_df, <span class="fl">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="14">

<div><div style="float: left;"><span>10×5 DataFrame</span></div><div style="clear: both;"></div></div><div class="data-frame" style="overflow-x: scroll;"><table class="data-frame table table-sm table-striped" style="margin-bottom: 6px;"><thead><tr class="header"><th class="rowNumber" style="font-weight: bold; text-align: right;">Row</th><th style="text-align: left;">Maker</th><th style="text-align: left;">Name</th><th style="text-align: left;">Price</th><th style="text-align: left;">MC</th><th style="text-align: left;">Margin</th></tr><tr class="subheader headerLastRow"><th class="rowNumber" style="font-weight: bold; text-align: right;"></th><th title="String15" style="text-align: left;">String15</th><th title="String31" style="text-align: left;">String31</th><th title="Float64" style="text-align: left;">Float64</th><th title="Float64" style="text-align: left;">Float64</th><th title="Float64" style="text-align: left;">Float64</th></tr></thead><tbody><tr><td class="rowNumber" style="font-weight: bold; text-align: right;">1</td><td style="text-align: left;">Audi</td><td style="text-align: left;">A3シリーズ</td><td style="text-align: right;">3.28</td><td style="text-align: right;">2.41726</td><td style="text-align: right;">0.263031</td></tr><tr><td class="rowNumber" style="font-weight: bold; text-align: right;">2</td><td style="text-align: left;">Audi</td><td style="text-align: left;">A4シリーズ</td><td style="text-align: right;">5.18</td><td style="text-align: right;">3.74093</td><td style="text-align: right;">0.277812</td></tr><tr><td class="rowNumber" style="font-weight: bold; text-align: right;">3</td><td style="text-align: left;">BMW</td><td style="text-align: left;">ミニ</td><td style="text-align: right;">2.4</td><td style="text-align: right;">1.7001</td><td style="text-align: right;">0.291626</td></tr><tr><td class="rowNumber" style="font-weight: bold; text-align: right;">4</td><td style="text-align: left;">BMW</td><td style="text-align: left;">1シリーズ</td><td style="text-align: right;">3.1</td><td style="text-align: right;">2.27191</td><td style="text-align: right;">0.267127</td></tr><tr><td class="rowNumber" style="font-weight: bold; text-align: right;">5</td><td style="text-align: left;">BMW</td><td style="text-align: left;">X1</td><td style="text-align: right;">3.67</td><td style="text-align: right;">2.71345</td><td style="text-align: right;">0.26064</td></tr><tr><td class="rowNumber" style="font-weight: bold; text-align: right;">6</td><td style="text-align: left;">BMW</td><td style="text-align: left;">2シリーズ</td><td style="text-align: right;">3.81</td><td style="text-align: right;">2.81796</td><td style="text-align: right;">0.260378</td></tr><tr><td class="rowNumber" style="font-weight: bold; text-align: right;">7</td><td style="text-align: left;">BMW</td><td style="text-align: left;">3シリーズ</td><td style="text-align: right;">4.49</td><td style="text-align: right;">3.29924</td><td style="text-align: right;">0.265202</td></tr><tr><td class="rowNumber" style="font-weight: bold; text-align: right;">8</td><td style="text-align: left;">Daihatsu</td><td style="text-align: left;">ミラ</td><td style="text-align: right;">0.885</td><td style="text-align: right;">0.379043</td><td style="text-align: right;">0.571703</td></tr><tr><td class="rowNumber" style="font-weight: bold; text-align: right;">9</td><td style="text-align: left;">Daihatsu</td><td style="text-align: left;">ムーヴ</td><td style="text-align: right;">1.134</td><td style="text-align: right;">0.601233</td><td style="text-align: right;">0.469812</td></tr><tr><td class="rowNumber" style="font-weight: bold; text-align: right;">10</td><td style="text-align: left;">Daihatsu</td><td style="text-align: left;">ブーン</td><td style="text-align: right;">1.15</td><td style="text-align: right;">0.615443</td><td style="text-align: right;">0.464832</td></tr></tbody></table></div>
</div>
</div>
<div class="cell" data-execution_count="18">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">histogram</span>(pred_mc_df.Margin, bins <span class="op">=</span> <span class="fl">40</span>, legend <span class="op">=</span> <span class="cn">false</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="15">
<!--?xml version="1.0" encoding="utf-8"?-->
<svg xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" width="672" height="480" viewbox="0 0 2688 1920">
<defs>
  <clippath id="clip010">
    <rect x="0" y="0" width="2688" height="1920"></rect>
  </clippath>
</defs>
<path clip-path="url(#clip010)" d="M0 1920 L2688 1920 L2688 0 L0 0  Z" fill="#ffffff" fill-rule="evenodd" fill-opacity="1"></path>
<defs>
  <clippath id="clip011">
    <rect x="537" y="0" width="1883" height="1883"></rect>
  </clippath>
</defs>
<path clip-path="url(#clip010)" d="M141.839 1800.78 L2640.76 1800.78 L2640.76 47.2441 L141.839 47.2441  Z" fill="#ffffff" fill-rule="evenodd" fill-opacity="1"></path>
<defs>
  <clippath id="clip012">
    <rect x="141" y="47" width="2500" height="1755"></rect>
  </clippath>
</defs>
<polyline clip-path="url(#clip012)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="496.263,1800.78 496.263,47.2441 "></polyline>
<polyline clip-path="url(#clip012)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="1038.71,1800.78 1038.71,47.2441 "></polyline>
<polyline clip-path="url(#clip012)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="1581.15,1800.78 1581.15,47.2441 "></polyline>
<polyline clip-path="url(#clip012)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="2123.6,1800.78 2123.6,47.2441 "></polyline>
<polyline clip-path="url(#clip010)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="141.839,1800.78 2640.76,1800.78 "></polyline>
<polyline clip-path="url(#clip010)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="496.263,1800.78 496.263,1781.88 "></polyline>
<polyline clip-path="url(#clip010)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="1038.71,1800.78 1038.71,1781.88 "></polyline>
<polyline clip-path="url(#clip010)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="1581.15,1800.78 1581.15,1781.88 "></polyline>
<polyline clip-path="url(#clip010)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="2123.6,1800.78 2123.6,1781.88 "></polyline>
<path clip-path="url(#clip010)" d="M473.971 1834 Q470.36 1834 468.531 1837.57 Q466.726 1841.11 466.726 1848.24 Q466.726 1855.34 468.531 1858.91 Q470.36 1862.45 473.971 1862.45 Q477.605 1862.45 479.411 1858.91 Q481.239 1855.34 481.239 1848.24 Q481.239 1841.11 479.411 1837.57 Q477.605 1834 473.971 1834 M473.971 1830.3 Q479.781 1830.3 482.837 1834.9 Q485.915 1839.49 485.915 1848.24 Q485.915 1856.96 482.837 1861.57 Q479.781 1866.15 473.971 1866.15 Q468.161 1866.15 465.082 1861.57 Q462.027 1856.96 462.027 1848.24 Q462.027 1839.49 465.082 1834.9 Q468.161 1830.3 473.971 1830.3 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip010)" d="M494.133 1859.6 L499.017 1859.6 L499.017 1865.48 L494.133 1865.48 L494.133 1859.6 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip010)" d="M523.369 1846.85 Q526.725 1847.57 528.6 1849.84 Q530.498 1852.1 530.498 1855.44 Q530.498 1860.55 526.98 1863.35 Q523.461 1866.15 516.98 1866.15 Q514.804 1866.15 512.489 1865.71 Q510.198 1865.3 507.744 1864.44 L507.744 1859.93 Q509.688 1861.06 512.003 1861.64 Q514.318 1862.22 516.841 1862.22 Q521.239 1862.22 523.531 1860.48 Q525.846 1858.75 525.846 1855.44 Q525.846 1852.38 523.693 1850.67 Q521.563 1848.93 517.744 1848.93 L513.716 1848.93 L513.716 1845.09 L517.929 1845.09 Q521.378 1845.09 523.207 1843.72 Q525.036 1842.34 525.036 1839.74 Q525.036 1837.08 523.137 1835.67 Q521.262 1834.23 517.744 1834.23 Q515.823 1834.23 513.624 1834.65 Q511.424 1835.07 508.786 1835.95 L508.786 1831.78 Q511.448 1831.04 513.762 1830.67 Q516.1 1830.3 518.161 1830.3 Q523.485 1830.3 526.586 1832.73 Q529.688 1835.14 529.688 1839.26 Q529.688 1842.13 528.045 1844.12 Q526.401 1846.09 523.369 1846.85 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip010)" d="M1015.85 1834 Q1012.24 1834 1010.41 1837.57 Q1008.6 1841.11 1008.6 1848.24 Q1008.6 1855.34 1010.41 1858.91 Q1012.24 1862.45 1015.85 1862.45 Q1019.48 1862.45 1021.29 1858.91 Q1023.12 1855.34 1023.12 1848.24 Q1023.12 1841.11 1021.29 1837.57 Q1019.48 1834 1015.85 1834 M1015.85 1830.3 Q1021.66 1830.3 1024.72 1834.9 Q1027.79 1839.49 1027.79 1848.24 Q1027.79 1856.96 1024.72 1861.57 Q1021.66 1866.15 1015.85 1866.15 Q1010.04 1866.15 1006.96 1861.57 Q1003.91 1856.96 1003.91 1848.24 Q1003.91 1839.49 1006.96 1834.9 Q1010.04 1830.3 1015.85 1830.3 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip010)" d="M1036.01 1859.6 L1040.9 1859.6 L1040.9 1865.48 L1036.01 1865.48 L1036.01 1859.6 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip010)" d="M1063.93 1835 L1052.12 1853.45 L1063.93 1853.45 L1063.93 1835 M1062.7 1830.92 L1068.58 1830.92 L1068.58 1853.45 L1073.51 1853.45 L1073.51 1857.34 L1068.58 1857.34 L1068.58 1865.48 L1063.93 1865.48 L1063.93 1857.34 L1048.33 1857.34 L1048.33 1852.82 L1062.7 1830.92 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip010)" d="M1559.04 1834 Q1555.42 1834 1553.6 1837.57 Q1551.79 1841.11 1551.79 1848.24 Q1551.79 1855.34 1553.6 1858.91 Q1555.42 1862.45 1559.04 1862.45 Q1562.67 1862.45 1564.48 1858.91 Q1566.3 1855.34 1566.3 1848.24 Q1566.3 1841.11 1564.48 1837.57 Q1562.67 1834 1559.04 1834 M1559.04 1830.3 Q1564.85 1830.3 1567.9 1834.9 Q1570.98 1839.49 1570.98 1848.24 Q1570.98 1856.96 1567.9 1861.57 Q1564.85 1866.15 1559.04 1866.15 Q1553.23 1866.15 1550.15 1861.57 Q1547.09 1856.96 1547.09 1848.24 Q1547.09 1839.49 1550.15 1834.9 Q1553.23 1830.3 1559.04 1830.3 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip010)" d="M1579.2 1859.6 L1584.08 1859.6 L1584.08 1865.48 L1579.2 1865.48 L1579.2 1859.6 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip010)" d="M1594.31 1830.92 L1612.67 1830.92 L1612.67 1834.86 L1598.6 1834.86 L1598.6 1843.33 Q1599.61 1842.98 1600.63 1842.82 Q1601.65 1842.64 1602.67 1842.64 Q1608.46 1842.64 1611.84 1845.81 Q1615.22 1848.98 1615.22 1854.4 Q1615.22 1859.97 1611.74 1863.08 Q1608.27 1866.15 1601.95 1866.15 Q1599.78 1866.15 1597.51 1865.78 Q1595.26 1865.41 1592.85 1864.67 L1592.85 1859.97 Q1594.94 1861.11 1597.16 1861.66 Q1599.38 1862.22 1601.86 1862.22 Q1605.86 1862.22 1608.2 1860.11 Q1610.54 1858.01 1610.54 1854.4 Q1610.54 1850.78 1608.2 1848.68 Q1605.86 1846.57 1601.86 1846.57 Q1599.98 1846.57 1598.11 1846.99 Q1596.26 1847.4 1594.31 1848.28 L1594.31 1830.92 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip010)" d="M2100.9 1834 Q2097.29 1834 2095.46 1837.57 Q2093.66 1841.11 2093.66 1848.24 Q2093.66 1855.34 2095.46 1858.91 Q2097.29 1862.45 2100.9 1862.45 Q2104.54 1862.45 2106.34 1858.91 Q2108.17 1855.34 2108.17 1848.24 Q2108.17 1841.11 2106.34 1837.57 Q2104.54 1834 2100.9 1834 M2100.9 1830.3 Q2106.71 1830.3 2109.77 1834.9 Q2112.85 1839.49 2112.85 1848.24 Q2112.85 1856.96 2109.77 1861.57 Q2106.71 1866.15 2100.9 1866.15 Q2095.09 1866.15 2092.01 1861.57 Q2088.96 1856.96 2088.96 1848.24 Q2088.96 1839.49 2092.01 1834.9 Q2095.09 1830.3 2100.9 1830.3 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip010)" d="M2121.06 1859.6 L2125.95 1859.6 L2125.95 1865.48 L2121.06 1865.48 L2121.06 1859.6 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip010)" d="M2146.71 1846.34 Q2143.56 1846.34 2141.71 1848.49 Q2139.88 1850.65 2139.88 1854.4 Q2139.88 1858.12 2141.71 1860.3 Q2143.56 1862.45 2146.71 1862.45 Q2149.86 1862.45 2151.69 1860.3 Q2153.54 1858.12 2153.54 1854.4 Q2153.54 1850.65 2151.69 1848.49 Q2149.86 1846.34 2146.71 1846.34 M2155.99 1831.69 L2155.99 1835.95 Q2154.24 1835.11 2152.43 1834.67 Q2150.65 1834.23 2148.89 1834.23 Q2144.26 1834.23 2141.81 1837.36 Q2139.37 1840.48 2139.03 1846.8 Q2140.39 1844.79 2142.45 1843.72 Q2144.51 1842.64 2146.99 1842.64 Q2152.2 1842.64 2155.21 1845.81 Q2158.24 1848.96 2158.24 1854.4 Q2158.24 1859.72 2155.09 1862.94 Q2151.94 1866.15 2146.71 1866.15 Q2140.72 1866.15 2137.55 1861.57 Q2134.37 1856.96 2134.37 1848.24 Q2134.37 1840.04 2138.26 1835.18 Q2142.15 1830.3 2148.7 1830.3 Q2150.46 1830.3 2152.24 1830.65 Q2154.05 1830.99 2155.99 1831.69 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><polyline clip-path="url(#clip012)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="141.839,1800.78 2640.76,1800.78 "></polyline>
<polyline clip-path="url(#clip012)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="141.839,1339.32 2640.76,1339.32 "></polyline>
<polyline clip-path="url(#clip012)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="141.839,877.866 2640.76,877.866 "></polyline>
<polyline clip-path="url(#clip012)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="141.839,416.409 2640.76,416.409 "></polyline>
<polyline clip-path="url(#clip010)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="141.839,1800.78 141.839,47.2441 "></polyline>
<polyline clip-path="url(#clip010)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="141.839,1800.78 160.737,1800.78 "></polyline>
<polyline clip-path="url(#clip010)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="141.839,1339.32 160.737,1339.32 "></polyline>
<polyline clip-path="url(#clip010)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="141.839,877.866 160.737,877.866 "></polyline>
<polyline clip-path="url(#clip010)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="141.839,416.409 160.737,416.409 "></polyline>
<path clip-path="url(#clip010)" d="M89.5751 1786.58 Q85.964 1786.58 84.1353 1790.14 Q82.3297 1793.68 82.3297 1800.81 Q82.3297 1807.92 84.1353 1811.49 Q85.964 1815.03 89.5751 1815.03 Q93.2093 1815.03 95.0148 1811.49 Q96.8435 1807.92 96.8435 1800.81 Q96.8435 1793.68 95.0148 1790.14 Q93.2093 1786.58 89.5751 1786.58 M89.5751 1782.87 Q95.3852 1782.87 98.4408 1787.48 Q101.519 1792.06 101.519 1800.81 Q101.519 1809.54 98.4408 1814.15 Q95.3852 1818.73 89.5751 1818.73 Q83.7649 1818.73 80.6862 1814.15 Q77.6307 1809.54 77.6307 1800.81 Q77.6307 1792.06 80.6862 1787.48 Q83.7649 1782.87 89.5751 1782.87 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip010)" d="M80.6168 1322.04 L98.9732 1322.04 L98.9732 1325.98 L84.8992 1325.98 L84.8992 1334.45 Q85.9177 1334.1 86.9362 1333.94 Q87.9547 1333.76 88.9732 1333.76 Q94.7602 1333.76 98.1398 1336.93 Q101.519 1340.1 101.519 1345.51 Q101.519 1351.09 98.0472 1354.2 Q94.575 1357.27 88.2556 1357.27 Q86.0797 1357.27 83.8112 1356.9 Q81.5658 1356.53 79.1584 1355.79 L79.1584 1351.09 Q81.2418 1352.23 83.464 1352.78 Q85.6862 1353.34 88.163 1353.34 Q92.1676 1353.34 94.5056 1351.23 Q96.8435 1349.13 96.8435 1345.51 Q96.8435 1341.9 94.5056 1339.8 Q92.1676 1337.69 88.163 1337.69 Q86.288 1337.69 84.4131 1338.11 Q82.5612 1338.52 80.6168 1339.4 L80.6168 1322.04 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip010)" d="M50.2234 891.211 L57.8623 891.211 L57.8623 864.845 L49.5521 866.512 L49.5521 862.253 L57.816 860.586 L62.4919 860.586 L62.4919 891.211 L70.1307 891.211 L70.1307 895.146 L50.2234 895.146 L50.2234 891.211 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip010)" d="M89.5751 863.665 Q85.964 863.665 84.1353 867.23 Q82.3297 870.771 82.3297 877.901 Q82.3297 885.007 84.1353 888.572 Q85.964 892.114 89.5751 892.114 Q93.2093 892.114 95.0148 888.572 Q96.8435 885.007 96.8435 877.901 Q96.8435 870.771 95.0148 867.23 Q93.2093 863.665 89.5751 863.665 M89.5751 859.961 Q95.3852 859.961 98.4408 864.567 Q101.519 869.151 101.519 877.901 Q101.519 886.628 98.4408 891.234 Q95.3852 895.817 89.5751 895.817 Q83.7649 895.817 80.6862 891.234 Q77.6307 886.628 77.6307 877.901 Q77.6307 869.151 80.6862 864.567 Q83.7649 859.961 89.5751 859.961 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip010)" d="M51.2188 429.754 L58.8576 429.754 L58.8576 403.389 L50.5475 405.055 L50.5475 400.796 L58.8113 399.129 L63.4872 399.129 L63.4872 429.754 L71.1261 429.754 L71.1261 433.689 L51.2188 433.689 L51.2188 429.754 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip010)" d="M80.6168 399.129 L98.9732 399.129 L98.9732 403.065 L84.8992 403.065 L84.8992 411.537 Q85.9177 411.19 86.9362 411.027 Q87.9547 410.842 88.9732 410.842 Q94.7602 410.842 98.1398 414.014 Q101.519 417.185 101.519 422.601 Q101.519 428.18 98.0472 431.282 Q94.575 434.361 88.2556 434.361 Q86.0797 434.361 83.8112 433.99 Q81.5658 433.62 79.1584 432.879 L79.1584 428.18 Q81.2418 429.314 83.464 429.87 Q85.6862 430.426 88.163 430.426 Q92.1676 430.426 94.5056 428.319 Q96.8435 426.213 96.8435 422.601 Q96.8435 418.99 94.5056 416.884 Q92.1676 414.777 88.163 414.777 Q86.288 414.777 84.4131 415.194 Q82.5612 415.611 80.6168 416.49 L80.6168 399.129 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip012)" d="M279.284 47.2441 L279.284 1800.78 L333.529 1800.78 L333.529 47.2441 L279.284 47.2441 L279.284 47.2441  Z" fill="#009af9" fill-rule="evenodd" fill-opacity="1"></path>
<polyline clip-path="url(#clip012)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="279.284,47.2441 279.284,1800.78 333.529,1800.78 333.529,47.2441 279.284,47.2441 "></polyline>
<path clip-path="url(#clip012)" d="M333.529 416.409 L333.529 1800.78 L387.773 1800.78 L387.773 416.409 L333.529 416.409 L333.529 416.409  Z" fill="#009af9" fill-rule="evenodd" fill-opacity="1"></path>
<polyline clip-path="url(#clip012)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="333.529,416.409 333.529,1800.78 387.773,1800.78 387.773,416.409 333.529,416.409 "></polyline>
<path clip-path="url(#clip012)" d="M387.773 324.118 L387.773 1800.78 L442.018 1800.78 L442.018 324.118 L387.773 324.118 L387.773 324.118  Z" fill="#009af9" fill-rule="evenodd" fill-opacity="1"></path>
<polyline clip-path="url(#clip012)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="387.773,324.118 387.773,1800.78 442.018,1800.78 442.018,324.118 387.773,324.118 "></polyline>
<path clip-path="url(#clip012)" d="M442.018 324.118 L442.018 1800.78 L496.263 1800.78 L496.263 324.118 L442.018 324.118 L442.018 324.118  Z" fill="#009af9" fill-rule="evenodd" fill-opacity="1"></path>
<polyline clip-path="url(#clip012)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="442.018,324.118 442.018,1800.78 496.263,1800.78 496.263,324.118 442.018,324.118 "></polyline>
<path clip-path="url(#clip012)" d="M496.263 1247.03 L496.263 1800.78 L550.507 1800.78 L550.507 1247.03 L496.263 1247.03 L496.263 1247.03  Z" fill="#009af9" fill-rule="evenodd" fill-opacity="1"></path>
<polyline clip-path="url(#clip012)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="496.263,1247.03 496.263,1800.78 550.507,1800.78 550.507,1247.03 496.263,1247.03 "></polyline>
<path clip-path="url(#clip012)" d="M550.507 1062.45 L550.507 1800.78 L604.752 1800.78 L604.752 1062.45 L550.507 1062.45 L550.507 1062.45  Z" fill="#009af9" fill-rule="evenodd" fill-opacity="1"></path>
<polyline clip-path="url(#clip012)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="550.507,1062.45 550.507,1800.78 604.752,1800.78 604.752,1062.45 550.507,1062.45 "></polyline>
<path clip-path="url(#clip012)" d="M604.752 1431.61 L604.752 1800.78 L658.996 1800.78 L658.996 1431.61 L604.752 1431.61 L604.752 1431.61  Z" fill="#009af9" fill-rule="evenodd" fill-opacity="1"></path>
<polyline clip-path="url(#clip012)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="604.752,1431.61 604.752,1800.78 658.996,1800.78 658.996,1431.61 604.752,1431.61 "></polyline>
<path clip-path="url(#clip012)" d="M658.996 1247.03 L658.996 1800.78 L713.241 1800.78 L713.241 1247.03 L658.996 1247.03 L658.996 1247.03  Z" fill="#009af9" fill-rule="evenodd" fill-opacity="1"></path>
<polyline clip-path="url(#clip012)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="658.996,1247.03 658.996,1800.78 713.241,1800.78 713.241,1247.03 658.996,1247.03 "></polyline>
<path clip-path="url(#clip012)" d="M713.241 877.866 L713.241 1800.78 L767.485 1800.78 L767.485 877.866 L713.241 877.866 L713.241 877.866  Z" fill="#009af9" fill-rule="evenodd" fill-opacity="1"></path>
<polyline clip-path="url(#clip012)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="713.241,877.866 713.241,1800.78 767.485,1800.78 767.485,877.866 713.241,877.866 "></polyline>
<path clip-path="url(#clip012)" d="M767.485 1154.74 L767.485 1800.78 L821.73 1800.78 L821.73 1154.74 L767.485 1154.74 L767.485 1154.74  Z" fill="#009af9" fill-rule="evenodd" fill-opacity="1"></path>
<polyline clip-path="url(#clip012)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="767.485,1154.74 767.485,1800.78 821.73,1800.78 821.73,1154.74 767.485,1154.74 "></polyline>
<path clip-path="url(#clip012)" d="M821.73 1339.32 L821.73 1800.78 L875.974 1800.78 L875.974 1339.32 L821.73 1339.32 L821.73 1339.32  Z" fill="#009af9" fill-rule="evenodd" fill-opacity="1"></path>
<polyline clip-path="url(#clip012)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="821.73,1339.32 821.73,1800.78 875.974,1800.78 875.974,1339.32 821.73,1339.32 "></polyline>
<path clip-path="url(#clip012)" d="M875.974 1616.2 L875.974 1800.78 L930.219 1800.78 L930.219 1616.2 L875.974 1616.2 L875.974 1616.2  Z" fill="#009af9" fill-rule="evenodd" fill-opacity="1"></path>
<polyline clip-path="url(#clip012)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="875.974,1616.2 875.974,1800.78 930.219,1800.78 930.219,1616.2 875.974,1616.2 "></polyline>
<path clip-path="url(#clip012)" d="M930.219 1616.2 L930.219 1800.78 L984.464 1800.78 L984.464 1616.2 L930.219 1616.2 L930.219 1616.2  Z" fill="#009af9" fill-rule="evenodd" fill-opacity="1"></path>
<polyline clip-path="url(#clip012)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="930.219,1616.2 930.219,1800.78 984.464,1800.78 984.464,1616.2 930.219,1616.2 "></polyline>
<path clip-path="url(#clip012)" d="M984.464 1247.03 L984.464 1800.78 L1038.71 1800.78 L1038.71 1247.03 L984.464 1247.03 L984.464 1247.03  Z" fill="#009af9" fill-rule="evenodd" fill-opacity="1"></path>
<polyline clip-path="url(#clip012)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="984.464,1247.03 984.464,1800.78 1038.71,1800.78 1038.71,1247.03 984.464,1247.03 "></polyline>
<path clip-path="url(#clip012)" d="M1038.71 1062.45 L1038.71 1800.78 L1092.95 1800.78 L1092.95 1062.45 L1038.71 1062.45 L1038.71 1062.45  Z" fill="#009af9" fill-rule="evenodd" fill-opacity="1"></path>
<polyline clip-path="url(#clip012)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="1038.71,1062.45 1038.71,1800.78 1092.95,1800.78 1092.95,1062.45 1038.71,1062.45 "></polyline>
<path clip-path="url(#clip012)" d="M1092.95 1339.32 L1092.95 1800.78 L1147.2 1800.78 L1147.2 1339.32 L1092.95 1339.32 L1092.95 1339.32  Z" fill="#009af9" fill-rule="evenodd" fill-opacity="1"></path>
<polyline clip-path="url(#clip012)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="1092.95,1339.32 1092.95,1800.78 1147.2,1800.78 1147.2,1339.32 1092.95,1339.32 "></polyline>
<path clip-path="url(#clip012)" d="M1147.2 1523.91 L1147.2 1800.78 L1201.44 1800.78 L1201.44 1523.91 L1147.2 1523.91 L1147.2 1523.91  Z" fill="#009af9" fill-rule="evenodd" fill-opacity="1"></path>
<polyline clip-path="url(#clip012)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="1147.2,1523.91 1147.2,1800.78 1201.44,1800.78 1201.44,1523.91 1147.2,1523.91 "></polyline>
<path clip-path="url(#clip012)" d="M1201.44 1616.2 L1201.44 1800.78 L1255.69 1800.78 L1255.69 1616.2 L1201.44 1616.2 L1201.44 1616.2  Z" fill="#009af9" fill-rule="evenodd" fill-opacity="1"></path>
<polyline clip-path="url(#clip012)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="1201.44,1616.2 1201.44,1800.78 1255.69,1800.78 1255.69,1616.2 1201.44,1616.2 "></polyline>
<path clip-path="url(#clip012)" d="M1255.69 1431.61 L1255.69 1800.78 L1309.93 1800.78 L1309.93 1431.61 L1255.69 1431.61 L1255.69 1431.61  Z" fill="#009af9" fill-rule="evenodd" fill-opacity="1"></path>
<polyline clip-path="url(#clip012)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="1255.69,1431.61 1255.69,1800.78 1309.93,1800.78 1309.93,1431.61 1255.69,1431.61 "></polyline>
<path clip-path="url(#clip012)" d="M1309.93 1523.91 L1309.93 1800.78 L1364.18 1800.78 L1364.18 1523.91 L1309.93 1523.91 L1309.93 1523.91  Z" fill="#009af9" fill-rule="evenodd" fill-opacity="1"></path>
<polyline clip-path="url(#clip012)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="1309.93,1523.91 1309.93,1800.78 1364.18,1800.78 1364.18,1523.91 1309.93,1523.91 "></polyline>
<path clip-path="url(#clip012)" d="M1364.18 1339.32 L1364.18 1800.78 L1418.42 1800.78 L1418.42 1339.32 L1364.18 1339.32 L1364.18 1339.32  Z" fill="#009af9" fill-rule="evenodd" fill-opacity="1"></path>
<polyline clip-path="url(#clip012)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="1364.18,1339.32 1364.18,1800.78 1418.42,1800.78 1418.42,1339.32 1364.18,1339.32 "></polyline>
<path clip-path="url(#clip012)" d="M1418.42 1616.2 L1418.42 1800.78 L1472.66 1800.78 L1472.66 1616.2 L1418.42 1616.2 L1418.42 1616.2  Z" fill="#009af9" fill-rule="evenodd" fill-opacity="1"></path>
<polyline clip-path="url(#clip012)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="1418.42,1616.2 1418.42,1800.78 1472.66,1800.78 1472.66,1616.2 1418.42,1616.2 "></polyline>
<path clip-path="url(#clip012)" d="M1472.66 1523.91 L1472.66 1800.78 L1526.91 1800.78 L1526.91 1523.91 L1472.66 1523.91 L1472.66 1523.91  Z" fill="#009af9" fill-rule="evenodd" fill-opacity="1"></path>
<polyline clip-path="url(#clip012)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="1472.66,1523.91 1472.66,1800.78 1526.91,1800.78 1526.91,1523.91 1472.66,1523.91 "></polyline>
<path clip-path="url(#clip012)" d="M1526.91 1616.2 L1526.91 1800.78 L1581.15 1800.78 L1581.15 1616.2 L1526.91 1616.2 L1526.91 1616.2  Z" fill="#009af9" fill-rule="evenodd" fill-opacity="1"></path>
<polyline clip-path="url(#clip012)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="1526.91,1616.2 1526.91,1800.78 1581.15,1800.78 1581.15,1616.2 1526.91,1616.2 "></polyline>
<path clip-path="url(#clip012)" d="M1581.15 1616.2 L1581.15 1800.78 L1635.4 1800.78 L1635.4 1616.2 L1581.15 1616.2 L1581.15 1616.2  Z" fill="#009af9" fill-rule="evenodd" fill-opacity="1"></path>
<polyline clip-path="url(#clip012)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="1581.15,1616.2 1581.15,1800.78 1635.4,1800.78 1635.4,1616.2 1581.15,1616.2 "></polyline>
<path clip-path="url(#clip012)" d="M1635.4 1800.78 L1635.4 1800.78 L1689.64 1800.78 L1689.64 1800.78 L1635.4 1800.78 L1635.4 1800.78  Z" fill="#009af9" fill-rule="evenodd" fill-opacity="1"></path>
<polyline clip-path="url(#clip012)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="1635.4,1800.78 1635.4,1800.78 1689.64,1800.78 1635.4,1800.78 "></polyline>
<path clip-path="url(#clip012)" d="M1689.64 1800.78 L1689.64 1800.78 L1743.89 1800.78 L1743.89 1800.78 L1689.64 1800.78 L1689.64 1800.78  Z" fill="#009af9" fill-rule="evenodd" fill-opacity="1"></path>
<polyline clip-path="url(#clip012)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="1689.64,1800.78 1689.64,1800.78 1743.89,1800.78 1689.64,1800.78 "></polyline>
<path clip-path="url(#clip012)" d="M1743.89 1523.91 L1743.89 1800.78 L1798.13 1800.78 L1798.13 1523.91 L1743.89 1523.91 L1743.89 1523.91  Z" fill="#009af9" fill-rule="evenodd" fill-opacity="1"></path>
<polyline clip-path="url(#clip012)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="1743.89,1523.91 1743.89,1800.78 1798.13,1800.78 1798.13,1523.91 1743.89,1523.91 "></polyline>
<path clip-path="url(#clip012)" d="M1798.13 1800.78 L1798.13 1800.78 L1852.38 1800.78 L1852.38 1800.78 L1798.13 1800.78 L1798.13 1800.78  Z" fill="#009af9" fill-rule="evenodd" fill-opacity="1"></path>
<polyline clip-path="url(#clip012)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="1798.13,1800.78 1798.13,1800.78 1852.38,1800.78 1798.13,1800.78 "></polyline>
<path clip-path="url(#clip012)" d="M1852.38 1708.49 L1852.38 1800.78 L1906.62 1800.78 L1906.62 1708.49 L1852.38 1708.49 L1852.38 1708.49  Z" fill="#009af9" fill-rule="evenodd" fill-opacity="1"></path>
<polyline clip-path="url(#clip012)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="1852.38,1708.49 1852.38,1800.78 1906.62,1800.78 1906.62,1708.49 1852.38,1708.49 "></polyline>
<path clip-path="url(#clip012)" d="M1906.62 1800.78 L1906.62 1800.78 L1960.87 1800.78 L1960.87 1800.78 L1906.62 1800.78 L1906.62 1800.78  Z" fill="#009af9" fill-rule="evenodd" fill-opacity="1"></path>
<polyline clip-path="url(#clip012)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="1906.62,1800.78 1906.62,1800.78 1960.87,1800.78 1906.62,1800.78 "></polyline>
<path clip-path="url(#clip012)" d="M1960.87 1708.49 L1960.87 1800.78 L2015.11 1800.78 L2015.11 1708.49 L1960.87 1708.49 L1960.87 1708.49  Z" fill="#009af9" fill-rule="evenodd" fill-opacity="1"></path>
<polyline clip-path="url(#clip012)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="1960.87,1708.49 1960.87,1800.78 2015.11,1800.78 2015.11,1708.49 1960.87,1708.49 "></polyline>
<path clip-path="url(#clip012)" d="M2015.11 1800.78 L2015.11 1800.78 L2069.35 1800.78 L2069.35 1800.78 L2015.11 1800.78 L2015.11 1800.78  Z" fill="#009af9" fill-rule="evenodd" fill-opacity="1"></path>
<polyline clip-path="url(#clip012)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="2015.11,1800.78 2015.11,1800.78 2069.35,1800.78 2015.11,1800.78 "></polyline>
<path clip-path="url(#clip012)" d="M2069.35 1800.78 L2069.35 1800.78 L2123.6 1800.78 L2123.6 1800.78 L2069.35 1800.78 L2069.35 1800.78  Z" fill="#009af9" fill-rule="evenodd" fill-opacity="1"></path>
<polyline clip-path="url(#clip012)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="2069.35,1800.78 2069.35,1800.78 2123.6,1800.78 2069.35,1800.78 "></polyline>
<path clip-path="url(#clip012)" d="M2123.6 1800.78 L2123.6 1800.78 L2177.84 1800.78 L2177.84 1800.78 L2123.6 1800.78 L2123.6 1800.78  Z" fill="#009af9" fill-rule="evenodd" fill-opacity="1"></path>
<polyline clip-path="url(#clip012)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="2123.6,1800.78 2123.6,1800.78 2177.84,1800.78 2123.6,1800.78 "></polyline>
<path clip-path="url(#clip012)" d="M2177.84 1708.49 L2177.84 1800.78 L2232.09 1800.78 L2232.09 1708.49 L2177.84 1708.49 L2177.84 1708.49  Z" fill="#009af9" fill-rule="evenodd" fill-opacity="1"></path>
<polyline clip-path="url(#clip012)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="2177.84,1708.49 2177.84,1800.78 2232.09,1800.78 2232.09,1708.49 2177.84,1708.49 "></polyline>
<path clip-path="url(#clip012)" d="M2232.09 1800.78 L2232.09 1800.78 L2286.33 1800.78 L2286.33 1800.78 L2232.09 1800.78 L2232.09 1800.78  Z" fill="#009af9" fill-rule="evenodd" fill-opacity="1"></path>
<polyline clip-path="url(#clip012)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="2232.09,1800.78 2232.09,1800.78 2286.33,1800.78 2232.09,1800.78 "></polyline>
<path clip-path="url(#clip012)" d="M2286.33 1708.49 L2286.33 1800.78 L2340.58 1800.78 L2340.58 1708.49 L2286.33 1708.49 L2286.33 1708.49  Z" fill="#009af9" fill-rule="evenodd" fill-opacity="1"></path>
<polyline clip-path="url(#clip012)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="2286.33,1708.49 2286.33,1800.78 2340.58,1800.78 2340.58,1708.49 2286.33,1708.49 "></polyline>
<path clip-path="url(#clip012)" d="M2340.58 1800.78 L2340.58 1800.78 L2394.82 1800.78 L2394.82 1800.78 L2340.58 1800.78 L2340.58 1800.78  Z" fill="#009af9" fill-rule="evenodd" fill-opacity="1"></path>
<polyline clip-path="url(#clip012)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="2340.58,1800.78 2340.58,1800.78 2394.82,1800.78 2340.58,1800.78 "></polyline>
<path clip-path="url(#clip012)" d="M2394.82 1800.78 L2394.82 1800.78 L2449.07 1800.78 L2449.07 1800.78 L2394.82 1800.78 L2394.82 1800.78  Z" fill="#009af9" fill-rule="evenodd" fill-opacity="1"></path>
<polyline clip-path="url(#clip012)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="2394.82,1800.78 2394.82,1800.78 2449.07,1800.78 2394.82,1800.78 "></polyline>
<path clip-path="url(#clip012)" d="M2449.07 1708.49 L2449.07 1800.78 L2503.31 1800.78 L2503.31 1708.49 L2449.07 1708.49 L2449.07 1708.49  Z" fill="#009af9" fill-rule="evenodd" fill-opacity="1"></path>
<polyline clip-path="url(#clip012)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="2449.07,1708.49 2449.07,1800.78 2503.31,1800.78 2503.31,1708.49 2449.07,1708.49 "></polyline>
<circle clip-path="url(#clip012)" style="fill:#009af9; stroke:none; fill-opacity:0" cx="306.407" cy="47.2441" r="2"></circle>
<circle clip-path="url(#clip012)" style="fill:#009af9; stroke:none; fill-opacity:0" cx="360.651" cy="416.409" r="2"></circle>
<circle clip-path="url(#clip012)" style="fill:#009af9; stroke:none; fill-opacity:0" cx="414.896" cy="324.118" r="2"></circle>
<circle clip-path="url(#clip012)" style="fill:#009af9; stroke:none; fill-opacity:0" cx="469.14" cy="324.118" r="2"></circle>
<circle clip-path="url(#clip012)" style="fill:#009af9; stroke:none; fill-opacity:0" cx="523.385" cy="1247.03" r="2"></circle>
<circle clip-path="url(#clip012)" style="fill:#009af9; stroke:none; fill-opacity:0" cx="577.629" cy="1062.45" r="2"></circle>
<circle clip-path="url(#clip012)" style="fill:#009af9; stroke:none; fill-opacity:0" cx="631.874" cy="1431.61" r="2"></circle>
<circle clip-path="url(#clip012)" style="fill:#009af9; stroke:none; fill-opacity:0" cx="686.118" cy="1247.03" r="2"></circle>
<circle clip-path="url(#clip012)" style="fill:#009af9; stroke:none; fill-opacity:0" cx="740.363" cy="877.866" r="2"></circle>
<circle clip-path="url(#clip012)" style="fill:#009af9; stroke:none; fill-opacity:0" cx="794.608" cy="1154.74" r="2"></circle>
<circle clip-path="url(#clip012)" style="fill:#009af9; stroke:none; fill-opacity:0" cx="848.852" cy="1339.32" r="2"></circle>
<circle clip-path="url(#clip012)" style="fill:#009af9; stroke:none; fill-opacity:0" cx="903.097" cy="1616.2" r="2"></circle>
<circle clip-path="url(#clip012)" style="fill:#009af9; stroke:none; fill-opacity:0" cx="957.341" cy="1616.2" r="2"></circle>
<circle clip-path="url(#clip012)" style="fill:#009af9; stroke:none; fill-opacity:0" cx="1011.59" cy="1247.03" r="2"></circle>
<circle clip-path="url(#clip012)" style="fill:#009af9; stroke:none; fill-opacity:0" cx="1065.83" cy="1062.45" r="2"></circle>
<circle clip-path="url(#clip012)" style="fill:#009af9; stroke:none; fill-opacity:0" cx="1120.07" cy="1339.32" r="2"></circle>
<circle clip-path="url(#clip012)" style="fill:#009af9; stroke:none; fill-opacity:0" cx="1174.32" cy="1523.91" r="2"></circle>
<circle clip-path="url(#clip012)" style="fill:#009af9; stroke:none; fill-opacity:0" cx="1228.56" cy="1616.2" r="2"></circle>
<circle clip-path="url(#clip012)" style="fill:#009af9; stroke:none; fill-opacity:0" cx="1282.81" cy="1431.61" r="2"></circle>
<circle clip-path="url(#clip012)" style="fill:#009af9; stroke:none; fill-opacity:0" cx="1337.05" cy="1523.91" r="2"></circle>
<circle clip-path="url(#clip012)" style="fill:#009af9; stroke:none; fill-opacity:0" cx="1391.3" cy="1339.32" r="2"></circle>
<circle clip-path="url(#clip012)" style="fill:#009af9; stroke:none; fill-opacity:0" cx="1445.54" cy="1616.2" r="2"></circle>
<circle clip-path="url(#clip012)" style="fill:#009af9; stroke:none; fill-opacity:0" cx="1499.79" cy="1523.91" r="2"></circle>
<circle clip-path="url(#clip012)" style="fill:#009af9; stroke:none; fill-opacity:0" cx="1554.03" cy="1616.2" r="2"></circle>
<circle clip-path="url(#clip012)" style="fill:#009af9; stroke:none; fill-opacity:0" cx="1608.28" cy="1616.2" r="2"></circle>
<circle clip-path="url(#clip012)" style="fill:#009af9; stroke:none; fill-opacity:0" cx="1662.52" cy="1800.78" r="2"></circle>
<circle clip-path="url(#clip012)" style="fill:#009af9; stroke:none; fill-opacity:0" cx="1716.77" cy="1800.78" r="2"></circle>
<circle clip-path="url(#clip012)" style="fill:#009af9; stroke:none; fill-opacity:0" cx="1771.01" cy="1523.91" r="2"></circle>
<circle clip-path="url(#clip012)" style="fill:#009af9; stroke:none; fill-opacity:0" cx="1825.25" cy="1800.78" r="2"></circle>
<circle clip-path="url(#clip012)" style="fill:#009af9; stroke:none; fill-opacity:0" cx="1879.5" cy="1708.49" r="2"></circle>
<circle clip-path="url(#clip012)" style="fill:#009af9; stroke:none; fill-opacity:0" cx="1933.74" cy="1800.78" r="2"></circle>
<circle clip-path="url(#clip012)" style="fill:#009af9; stroke:none; fill-opacity:0" cx="1987.99" cy="1708.49" r="2"></circle>
<circle clip-path="url(#clip012)" style="fill:#009af9; stroke:none; fill-opacity:0" cx="2042.23" cy="1800.78" r="2"></circle>
<circle clip-path="url(#clip012)" style="fill:#009af9; stroke:none; fill-opacity:0" cx="2096.48" cy="1800.78" r="2"></circle>
<circle clip-path="url(#clip012)" style="fill:#009af9; stroke:none; fill-opacity:0" cx="2150.72" cy="1800.78" r="2"></circle>
<circle clip-path="url(#clip012)" style="fill:#009af9; stroke:none; fill-opacity:0" cx="2204.97" cy="1708.49" r="2"></circle>
<circle clip-path="url(#clip012)" style="fill:#009af9; stroke:none; fill-opacity:0" cx="2259.21" cy="1800.78" r="2"></circle>
<circle clip-path="url(#clip012)" style="fill:#009af9; stroke:none; fill-opacity:0" cx="2313.46" cy="1708.49" r="2"></circle>
<circle clip-path="url(#clip012)" style="fill:#009af9; stroke:none; fill-opacity:0" cx="2367.7" cy="1800.78" r="2"></circle>
<circle clip-path="url(#clip012)" style="fill:#009af9; stroke:none; fill-opacity:0" cx="2421.94" cy="1800.78" r="2"></circle>
<circle clip-path="url(#clip012)" style="fill:#009af9; stroke:none; fill-opacity:0" cx="2476.19" cy="1708.49" r="2"></circle>
</svg>
</div>
</div>
</section>
<section id="section-3" class="level2" data-number="4.5">
<h2 data-number="4.5" class="anchored" data-anchor-id="section-3"><span class="header-section-number">4.5</span> 6</h2>
<div class="cell" data-execution_count="19">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>data_2016 <span class="op">=</span> <span class="fu">leftjoin</span>(data_2016, pred_mc_df, on <span class="op">=</span> [<span class="st">"Maker"</span>, <span class="st">"Name"</span>]);</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="fu">dropmissing!</span>(data_2016);</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>data_2016[data_2016.Maker <span class="op">.==</span> <span class="st">"Honda"</span>, <span class="op">:</span>Maker] <span class="op">.=</span> <span class="st">"Nippyo"</span>;</span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>data_2016[data_2016.Maker <span class="op">.==</span> <span class="st">"Nissan"</span>, <span class="op">:</span>Maker] <span class="op">.=</span> <span class="st">"BrandA"</span>;</span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>data_2016[data_2016.Maker <span class="op">.==</span> <span class="st">"Subaru"</span>, <span class="op">:</span>Maker] <span class="op">.=</span> <span class="st">"BrandB"</span>;</span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>data_2016[data_2016.Maker <span class="op">.==</span> <span class="st">"Toyota"</span>, <span class="op">:</span>Maker] <span class="op">.=</span> <span class="st">"BrandC"</span>;</span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a>data_2016[!, <span class="op">:</span>MakerNippyoA] <span class="op">=</span> data_2016[<span class="op">:</span>, <span class="op">:</span>Maker];</span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a>data_2016[!, <span class="op">:</span>MakerNippyoB] <span class="op">=</span> data_2016[<span class="op">:</span>, <span class="op">:</span>Maker];</span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a>data_2016[<span class="fu">in</span>([<span class="st">"Nippyo"</span>, <span class="st">"BrandA"</span>]).(data_2016[<span class="op">:</span>, <span class="op">:</span>Maker]), <span class="op">:</span>MakerNippyoA] <span class="op">.=</span> <span class="st">"NippyoA"</span>;</span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a>data_2016[<span class="fu">in</span>([<span class="st">"Nippyo"</span>, <span class="st">"BrandB"</span>]).(data_2016[<span class="op">:</span>, <span class="op">:</span>Maker]), <span class="op">:</span>MakerNippyoB] <span class="op">.=</span> <span class="st">"NippyoB"</span>;</span>
<span id="cb16-13"><a href="#cb16-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-14"><a href="#cb16-14" aria-hidden="true" tabindex="-1"></a>Ownership_true <span class="op">=</span> data_2016.Maker <span class="op">.==</span> <span class="fu">permutedims</span>(data_2016.Maker);</span>
<span id="cb16-15"><a href="#cb16-15" aria-hidden="true" tabindex="-1"></a>Ownership_NippyoA <span class="op">=</span> data_2016.MakerNippyoA <span class="op">.==</span> <span class="fu">permutedims</span>(data_2016.MakerNippyoA);</span>
<span id="cb16-16"><a href="#cb16-16" aria-hidden="true" tabindex="-1"></a>Ownership_NippyoB <span class="op">=</span> data_2016.MakerNippyoB <span class="op">.==</span> <span class="fu">permutedims</span>(data_2016.MakerNippyoB);</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="section-4" class="level2" data-number="4.6">
<h2 data-number="4.6" class="anchored" data-anchor-id="section-4"><span class="header-section-number">4.6</span> 6.4</h2>
<div class="cell" data-execution_count="20">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>mc <span class="op">=</span> data_2016.MC;</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>datalist_2016 <span class="op">=</span> <span class="fu">datalist_struct</span>(</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>    X1[market2016Index, <span class="op">:</span>],</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>    X2[market2016Index, <span class="op">:</span>],</span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>    Z[market2016Index, <span class="op">:</span>],</span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>    data_2016.share,</span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>    data_2016.year,</span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a>    data_2016.logit_share,</span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a>    datalist.randomDrawMat,</span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a>    datalist.marketIndexMat[market2016Index, <span class="op">:</span>]</span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a>);</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="section-5" class="level2" data-number="4.7">
<h2 data-number="4.7" class="anchored" data-anchor-id="section-5"><span class="header-section-number">4.7</span> 6.5</h2>
<div class="cell" data-execution_count="23">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>p_NippyoA <span class="op">=</span> <span class="fu">calculateEquilibriumPrice</span>(</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>    datalist_2016,</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>    data_2016.price,</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>    Ownership_NippyoA,</span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>    beta_hat,</span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>    resultGMM.minimizer,</span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>    mc,</span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>    Xi_2016</span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a>);</span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a>p_NippyoB <span class="op">=</span> <span class="fu">calculateEquilibriumPrice</span>(</span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a>    datalist_2016,</span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a>    data_2016.price,</span>
<span id="cb18-14"><a href="#cb18-14" aria-hidden="true" tabindex="-1"></a>    Ownership_NippyoB,</span>
<span id="cb18-15"><a href="#cb18-15" aria-hidden="true" tabindex="-1"></a>    beta_hat,</span>
<span id="cb18-16"><a href="#cb18-16" aria-hidden="true" tabindex="-1"></a>    resultGMM.minimizer,</span>
<span id="cb18-17"><a href="#cb18-17" aria-hidden="true" tabindex="-1"></a>    mc,</span>
<span id="cb18-18"><a href="#cb18-18" aria-hidden="true" tabindex="-1"></a>    Xi_2016</span>
<span id="cb18-19"><a href="#cb18-19" aria-hidden="true" tabindex="-1"></a>);</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="section-6" class="level2" data-number="4.8">
<h2 data-number="4.8" class="anchored" data-anchor-id="section-6"><span class="header-section-number">4.8</span> 7</h2>
</section>
<section id="section-7" class="level2" data-number="4.9">
<h2 data-number="4.9" class="anchored" data-anchor-id="section-7"><span class="header-section-number">4.9</span> 7.1</h2>
<div class="cell" data-execution_count="24">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>merger_sim_df <span class="op">=</span> <span class="fu">DataFrame</span>(</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>    Maker <span class="op">=</span> data_2016.Maker, </span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>    Name <span class="op">=</span> data_2016.Name, </span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>    Price_A <span class="op">=</span> (p_NippyoA <span class="op">.-</span> data_2016.price) <span class="op">./</span> data_2016.price <span class="op">.*</span> <span class="fl">100.0</span>,</span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>    Share_A <span class="op">=</span> (<span class="fu">simulateMarketShare</span>(</span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>                datalist_2016,</span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>                p_NippyoA,</span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a>                beta_hat,</span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a>                resultGMM.minimizer,</span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a>                Xi_2016</span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a>            ) <span class="op">.-</span> data_2016.share) <span class="op">./</span> data_2016.share <span class="op">.*</span> <span class="fl">100.0</span>,</span>
<span id="cb19-12"><a href="#cb19-12" aria-hidden="true" tabindex="-1"></a>    Price_B <span class="op">=</span> (p_NippyoB <span class="op">.-</span> data_2016.price) <span class="op">./</span> data_2016.price <span class="op">.*</span> <span class="fl">100.0</span>,</span>
<span id="cb19-13"><a href="#cb19-13" aria-hidden="true" tabindex="-1"></a>    Share_B <span class="op">=</span> (<span class="fu">simulateMarketShare</span>(</span>
<span id="cb19-14"><a href="#cb19-14" aria-hidden="true" tabindex="-1"></a>                datalist_2016,</span>
<span id="cb19-15"><a href="#cb19-15" aria-hidden="true" tabindex="-1"></a>                p_NippyoB,</span>
<span id="cb19-16"><a href="#cb19-16" aria-hidden="true" tabindex="-1"></a>                beta_hat,</span>
<span id="cb19-17"><a href="#cb19-17" aria-hidden="true" tabindex="-1"></a>                resultGMM.minimizer,</span>
<span id="cb19-18"><a href="#cb19-18" aria-hidden="true" tabindex="-1"></a>                Xi_2016</span>
<span id="cb19-19"><a href="#cb19-19" aria-hidden="true" tabindex="-1"></a>            ) <span class="op">.-</span> data_2016.share) <span class="op">./</span> data_2016.share <span class="op">.*</span> <span class="fl">100.0</span>,</span>
<span id="cb19-20"><a href="#cb19-20" aria-hidden="true" tabindex="-1"></a>);</span>
<span id="cb19-21"><a href="#cb19-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-22"><a href="#cb19-22" aria-hidden="true" tabindex="-1"></a>merger_sim_df[<span class="fu">in</span>([<span class="st">"Nippyo"</span>, <span class="st">"BrandA"</span>, <span class="st">"BrandB"</span>, <span class="st">"BrandC"</span>]).(merger_sim_df.Maker), <span class="op">:</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="19">

<div><div style="float: left;"><span>92×6 DataFrame</span></div><div style="float: right;"><span style="font-style: italic;">67 rows omitted</span></div><div style="clear: both;"></div></div><div class="data-frame" style="overflow-x: scroll;"><table class="data-frame table table-sm table-striped" style="margin-bottom: 6px;"><thead><tr class="header"><th class="rowNumber" style="font-weight: bold; text-align: right;">Row</th><th style="text-align: left;">Maker</th><th style="text-align: left;">Name</th><th style="text-align: left;">Price_A</th><th style="text-align: left;">Share_A</th><th style="text-align: left;">Price_B</th><th style="text-align: left;">Share_B</th></tr><tr class="subheader headerLastRow"><th class="rowNumber" style="font-weight: bold; text-align: right;"></th><th title="String15" style="text-align: left;">String15</th><th title="String31" style="text-align: left;">String31</th><th title="Float64" style="text-align: left;">Float64</th><th title="Float64" style="text-align: left;">Float64</th><th title="Float64" style="text-align: left;">Float64</th><th title="Float64" style="text-align: left;">Float64</th></tr></thead><tbody><tr><td class="rowNumber" style="font-weight: bold; text-align: right;">1</td><td style="text-align: left;">Nippyo</td><td style="text-align: left;">N-WGN</td><td style="text-align: right;">0.541509</td><td style="text-align: right;">-1.13154</td><td style="text-align: right;">0.205652</td><td style="text-align: right;">-0.43036</td></tr><tr><td class="rowNumber" style="font-weight: bold; text-align: right;">2</td><td style="text-align: left;">Nippyo</td><td style="text-align: left;">N-ONE</td><td style="text-align: right;">0.53828</td><td style="text-align: right;">-1.14005</td><td style="text-align: right;">0.204763</td><td style="text-align: right;">-0.434345</td></tr><tr><td class="rowNumber" style="font-weight: bold; text-align: right;">3</td><td style="text-align: left;">Nippyo</td><td style="text-align: left;">N-BOX</td><td style="text-align: right;">0.526869</td><td style="text-align: right;">-1.17471</td><td style="text-align: right;">0.201748</td><td style="text-align: right;">-0.450635</td></tr><tr><td class="rowNumber" style="font-weight: bold; text-align: right;">4</td><td style="text-align: left;">Nippyo</td><td style="text-align: left;">フィット</td><td style="text-align: right;">0.523412</td><td style="text-align: right;">-1.18701</td><td style="text-align: right;">0.200885</td><td style="text-align: right;">-0.456444</td></tr><tr><td class="rowNumber" style="font-weight: bold; text-align: right;">5</td><td style="text-align: left;">Nippyo</td><td style="text-align: left;">バモス</td><td style="text-align: right;">0.515992</td><td style="text-align: right;">-1.21749</td><td style="text-align: right;">0.199145</td><td style="text-align: right;">-0.4709</td></tr><tr><td class="rowNumber" style="font-weight: bold; text-align: right;">6</td><td style="text-align: left;">Nippyo</td><td style="text-align: left;">シャトル</td><td style="text-align: right;">0.497664</td><td style="text-align: right;">-1.35151</td><td style="text-align: right;">0.196526</td><td style="text-align: right;">-0.5354</td></tr><tr><td class="rowNumber" style="font-weight: bold; text-align: right;">7</td><td style="text-align: left;">Nippyo</td><td style="text-align: left;">グレイス</td><td style="text-align: right;">0.49624</td><td style="text-align: right;">-1.37468</td><td style="text-align: right;">0.196691</td><td style="text-align: right;">-0.546694</td></tr><tr><td class="rowNumber" style="font-weight: bold; text-align: right;">8</td><td style="text-align: left;">Nippyo</td><td style="text-align: left;">フリード</td><td style="text-align: right;">0.49438</td><td style="text-align: right;">-1.42958</td><td style="text-align: right;">0.197626</td><td style="text-align: right;">-0.573601</td></tr><tr><td class="rowNumber" style="font-weight: bold; text-align: right;">9</td><td style="text-align: left;">Nippyo</td><td style="text-align: left;">ヴェゼル</td><td style="text-align: right;">0.49419</td><td style="text-align: right;">-1.44649</td><td style="text-align: right;">0.198051</td><td style="text-align: right;">-0.581931</td></tr><tr><td class="rowNumber" style="font-weight: bold; text-align: right;">10</td><td style="text-align: left;">Nippyo</td><td style="text-align: left;">S660</td><td style="text-align: right;">0.494207</td><td style="text-align: right;">-1.47187</td><td style="text-align: right;">0.198799</td><td style="text-align: right;">-0.594463</td></tr><tr><td class="rowNumber" style="font-weight: bold; text-align: right;">11</td><td style="text-align: left;">Nippyo</td><td style="text-align: left;">ステップワゴン</td><td style="text-align: right;">0.499161</td><td style="text-align: right;">-1.60188</td><td style="text-align: right;">0.204403</td><td style="text-align: right;">-0.659201</td></tr><tr><td class="rowNumber" style="font-weight: bold; text-align: right;">12</td><td style="text-align: left;">Nippyo</td><td style="text-align: left;">CR-V</td><td style="text-align: right;">0.50524</td><td style="text-align: right;">-1.67813</td><td style="text-align: right;">0.208852</td><td style="text-align: right;">-0.697482</td></tr><tr><td class="rowNumber" style="font-weight: bold; text-align: right;">13</td><td style="text-align: left;">Nippyo</td><td style="text-align: left;">ジェイド</td><td style="text-align: right;">0.507676</td><td style="text-align: right;">-1.70312</td><td style="text-align: right;">0.210473</td><td style="text-align: right;">-0.710059</td></tr><tr><td style="text-align: right;">⋮</td><td style="text-align: right;">⋮</td><td style="text-align: right;">⋮</td><td style="text-align: right;">⋮</td><td style="text-align: right;">⋮</td><td style="text-align: right;">⋮</td><td style="text-align: right;">⋮</td></tr><tr><td class="rowNumber" style="font-weight: bold; text-align: right;">81</td><td style="text-align: left;">BrandC</td><td style="text-align: left;">エスクァイア</td><td style="text-align: right;">0.00519814</td><td style="text-align: right;">0.0500299</td><td style="text-align: right;">0.00233669</td><td style="text-align: right;">0.0204086</td></tr><tr><td class="rowNumber" style="font-weight: bold; text-align: right;">82</td><td style="text-align: left;">BrandC</td><td style="text-align: left;">ハイエースワゴン</td><td style="text-align: right;">0.00518198</td><td style="text-align: right;">0.0504995</td><td style="text-align: right;">0.00232583</td><td style="text-align: right;">0.0206357</td></tr><tr><td class="rowNumber" style="font-weight: bold; text-align: right;">83</td><td style="text-align: left;">BrandC</td><td style="text-align: left;">ハリアー</td><td style="text-align: right;">0.00514866</td><td style="text-align: right;">0.0513939</td><td style="text-align: right;">0.00230289</td><td style="text-align: right;">0.0210709</td></tr><tr><td class="rowNumber" style="font-weight: bold; text-align: right;">84</td><td style="text-align: left;">BrandC</td><td style="text-align: left;">アルファード</td><td style="text-align: right;">0.0049542</td><td style="text-align: right;">0.0551904</td><td style="text-align: right;">0.00216216</td><td style="text-align: right;">0.022958</td></tr><tr><td class="rowNumber" style="font-weight: bold; text-align: right;">85</td><td style="text-align: left;">BrandC</td><td style="text-align: left;">ヴェルファイア</td><td style="text-align: right;">0.0049542</td><td style="text-align: right;">0.0551904</td><td style="text-align: right;">0.00216216</td><td style="text-align: right;">0.022958</td></tr><tr><td class="rowNumber" style="font-weight: bold; text-align: right;">86</td><td style="text-align: left;">BrandC</td><td style="text-align: left;">カムリ</td><td style="text-align: right;">0.00494805</td><td style="text-align: right;">0.0552834</td><td style="text-align: right;">0.00215763</td><td style="text-align: right;">0.0230051</td></tr><tr><td class="rowNumber" style="font-weight: bold; text-align: right;">87</td><td style="text-align: left;">BrandC</td><td style="text-align: left;">FJクルーザー</td><td style="text-align: right;">0.00492789</td><td style="text-align: right;">0.0555803</td><td style="text-align: right;">0.00214276</td><td style="text-align: right;">0.0231558</td></tr><tr><td class="rowNumber" style="font-weight: bold; text-align: right;">88</td><td style="text-align: left;">BrandC</td><td style="text-align: left;">エスティマ</td><td style="text-align: right;">0.00490764</td><td style="text-align: right;">0.055867</td><td style="text-align: right;">0.00212779</td><td style="text-align: right;">0.0233018</td></tr><tr><td class="rowNumber" style="font-weight: bold; text-align: right;">89</td><td style="text-align: left;">BrandC</td><td style="text-align: left;">SAI</td><td style="text-align: right;">0.00488527</td><td style="text-align: right;">0.0561713</td><td style="text-align: right;">0.00211125</td><td style="text-align: right;">0.0234572</td></tr><tr><td class="rowNumber" style="font-weight: bold; text-align: right;">90</td><td style="text-align: left;">BrandC</td><td style="text-align: left;">クラウン</td><td style="text-align: right;">0.00441796</td><td style="text-align: right;">0.0607407</td><td style="text-align: right;">0.00176395</td><td style="text-align: right;">0.025858</td></tr><tr><td class="rowNumber" style="font-weight: bold; text-align: right;">91</td><td style="text-align: left;">BrandC</td><td style="text-align: left;">ランドクルーザー</td><td style="text-align: right;">0.00276548</td><td style="text-align: right;">0.0687652</td><td style="text-align: right;">0.000532715</td><td style="text-align: right;">0.0304727</td></tr><tr><td class="rowNumber" style="font-weight: bold; text-align: right;">92</td><td style="text-align: left;">BrandC</td><td style="text-align: left;">センチュリー</td><td style="text-align: right;">-0.00420306</td><td style="text-align: right;">0.0562352</td><td style="text-align: right;">-0.00342009</td><td style="text-align: right;">0.0171898</td></tr></tbody></table></div>
</div>
</div>
</section>
<section id="section-8" class="level2" data-number="4.10">
<h2 data-number="4.10" class="anchored" data-anchor-id="section-8"><span class="header-section-number">4.10</span> 7.2</h2>
<div class="cell" data-execution_count="25">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>Ownership_2016_A <span class="op">=</span> data_2016.MakerNippyoA <span class="op">.==</span> <span class="fu">permutedims</span>(data_2016.MakerNippyoA);</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>Derivative_2016_A <span class="op">=</span> <span class="op">-</span> elasmat_2016 <span class="op">.*</span> Sharevec_2016<span class="op">'</span> <span class="op">./</span> Pricevec_2016;</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>Delta_2016_A <span class="op">=</span> Derivative_2016_A <span class="op">.*</span> Ownership_2016_A;</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>mc_NippyoA_pfix <span class="op">=</span> Pricevec_2016 <span class="op">-</span> (Delta_2016_A <span class="op">\</span> Sharevec_2016);</span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>Ownership_2016_B <span class="op">=</span> data_2016.MakerNippyoB <span class="op">.==</span> <span class="fu">permutedims</span>(data_2016.MakerNippyoB);</span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>Derivative_2016_B <span class="op">=</span> <span class="op">-</span> elasmat_2016 <span class="op">.*</span> Sharevec_2016<span class="op">'</span> <span class="op">./</span> Pricevec_2016;</span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>Delta_2016_B <span class="op">=</span> Derivative_2016_B <span class="op">.*</span> Ownership_2016_B;</span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a>mc_NippyoB_pfix <span class="op">=</span> Pricevec_2016 <span class="op">-</span> (Delta_2016_B <span class="op">\</span> Sharevec_2016);</span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a>mc_sim_df <span class="op">=</span> <span class="fu">DataFrame</span>(</span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true" tabindex="-1"></a>    Maker <span class="op">=</span> data_2016.Maker, </span>
<span id="cb20-13"><a href="#cb20-13" aria-hidden="true" tabindex="-1"></a>    Name <span class="op">=</span> data_2016.Name, </span>
<span id="cb20-14"><a href="#cb20-14" aria-hidden="true" tabindex="-1"></a>    Nippyo_and_Brand_A <span class="op">=</span> (mc_NippyoA_pfix <span class="op">.-</span> mc) <span class="op">./</span> mc <span class="op">.*</span> <span class="fl">100.0</span>,</span>
<span id="cb20-15"><a href="#cb20-15" aria-hidden="true" tabindex="-1"></a>    Nippyo_and_Brand_B <span class="op">=</span> (mc_NippyoB_pfix <span class="op">.-</span> mc) <span class="op">./</span> mc <span class="op">.*</span> <span class="fl">100.0</span>,</span>
<span id="cb20-16"><a href="#cb20-16" aria-hidden="true" tabindex="-1"></a>);</span>
<span id="cb20-17"><a href="#cb20-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-18"><a href="#cb20-18" aria-hidden="true" tabindex="-1"></a>mc_sim_df[<span class="fu">in</span>([<span class="st">"Nippyo"</span>, <span class="st">"BrandA"</span>, <span class="st">"BrandB"</span>, <span class="st">"BrandC"</span>]).(mc_sim_df.Maker), <span class="op">:</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="20">

<div><div style="float: left;"><span>92×4 DataFrame</span></div><div style="float: right;"><span style="font-style: italic;">67 rows omitted</span></div><div style="clear: both;"></div></div><div class="data-frame" style="overflow-x: scroll;"><table class="data-frame table table-sm table-striped" style="margin-bottom: 6px;"><thead><tr class="header"><th class="rowNumber" style="font-weight: bold; text-align: right;">Row</th><th style="text-align: left;">Maker</th><th style="text-align: left;">Name</th><th style="text-align: left;">Nippyo_and_Brand_A</th><th style="text-align: left;">Nippyo_and_Brand_B</th></tr><tr class="subheader headerLastRow"><th class="rowNumber" style="font-weight: bold; text-align: right;"></th><th title="String15" style="text-align: left;">String15</th><th title="String31" style="text-align: left;">String31</th><th title="Float64" style="text-align: left;">Float64</th><th title="Float64" style="text-align: left;">Float64</th></tr></thead><tbody><tr><td class="rowNumber" style="font-weight: bold; text-align: right;">1</td><td style="text-align: left;">Nippyo</td><td style="text-align: left;">N-WGN</td><td style="text-align: right;">-0.91733</td><td style="text-align: right;">-0.349287</td></tr><tr><td class="rowNumber" style="font-weight: bold; text-align: right;">2</td><td style="text-align: left;">Nippyo</td><td style="text-align: left;">N-ONE</td><td style="text-align: right;">-0.900594</td><td style="text-align: right;">-0.343475</td></tr><tr><td class="rowNumber" style="font-weight: bold; text-align: right;">3</td><td style="text-align: left;">Nippyo</td><td style="text-align: left;">N-BOX</td><td style="text-align: right;">-0.842563</td><td style="text-align: right;">-0.323451</td></tr><tr><td class="rowNumber" style="font-weight: bold; text-align: right;">4</td><td style="text-align: left;">Nippyo</td><td style="text-align: left;">フィット</td><td style="text-align: right;">-0.825194</td><td style="text-align: right;">-0.317506</td></tr><tr><td class="rowNumber" style="font-weight: bold; text-align: right;">5</td><td style="text-align: left;">Nippyo</td><td style="text-align: left;">バモス</td><td style="text-align: right;">-0.787848</td><td style="text-align: right;">-0.304822</td></tr><tr><td class="rowNumber" style="font-weight: bold; text-align: right;">6</td><td style="text-align: left;">Nippyo</td><td style="text-align: left;">シャトル</td><td style="text-align: right;">-0.685154</td><td style="text-align: right;">-0.271214</td></tr><tr><td class="rowNumber" style="font-weight: bold; text-align: right;">7</td><td style="text-align: left;">Nippyo</td><td style="text-align: left;">グレイス</td><td style="text-align: right;">-0.673848</td><td style="text-align: right;">-0.267729</td></tr><tr><td class="rowNumber" style="font-weight: bold; text-align: right;">8</td><td style="text-align: left;">Nippyo</td><td style="text-align: left;">フリード</td><td style="text-align: right;">-0.651828</td><td style="text-align: right;">-0.261192</td></tr><tr><td class="rowNumber" style="font-weight: bold; text-align: right;">9</td><td style="text-align: left;">Nippyo</td><td style="text-align: left;">ヴェゼル</td><td style="text-align: right;">-0.646177</td><td style="text-align: right;">-0.259586</td></tr><tr><td class="rowNumber" style="font-weight: bold; text-align: right;">10</td><td style="text-align: left;">Nippyo</td><td style="text-align: left;">S660</td><td style="text-align: right;">-0.638542</td><td style="text-align: right;">-0.257483</td></tr><tr><td class="rowNumber" style="font-weight: bold; text-align: right;">11</td><td style="text-align: left;">Nippyo</td><td style="text-align: left;">ステップワゴン</td><td style="text-align: right;">-0.611683</td><td style="text-align: right;">-0.251122</td></tr><tr><td class="rowNumber" style="font-weight: bold; text-align: right;">12</td><td style="text-align: left;">Nippyo</td><td style="text-align: left;">CR-V</td><td style="text-align: right;">-0.60284</td><td style="text-align: right;">-0.249869</td></tr><tr><td class="rowNumber" style="font-weight: bold; text-align: right;">13</td><td style="text-align: left;">Nippyo</td><td style="text-align: left;">ジェイド</td><td style="text-align: right;">-0.600761</td><td style="text-align: right;">-0.249749</td></tr><tr><td style="text-align: right;">⋮</td><td style="text-align: right;">⋮</td><td style="text-align: right;">⋮</td><td style="text-align: right;">⋮</td><td style="text-align: right;">⋮</td></tr><tr><td class="rowNumber" style="font-weight: bold; text-align: right;">81</td><td style="text-align: left;">BrandC</td><td style="text-align: left;">エスクァイア</td><td style="text-align: right;">0.0</td><td style="text-align: right;">0.0</td></tr><tr><td class="rowNumber" style="font-weight: bold; text-align: right;">82</td><td style="text-align: left;">BrandC</td><td style="text-align: left;">ハイエースワゴン</td><td style="text-align: right;">0.0</td><td style="text-align: right;">0.0</td></tr><tr><td class="rowNumber" style="font-weight: bold; text-align: right;">83</td><td style="text-align: left;">BrandC</td><td style="text-align: left;">ハリアー</td><td style="text-align: right;">0.0</td><td style="text-align: right;">0.0</td></tr><tr><td class="rowNumber" style="font-weight: bold; text-align: right;">84</td><td style="text-align: left;">BrandC</td><td style="text-align: left;">アルファード</td><td style="text-align: right;">0.0</td><td style="text-align: right;">0.0</td></tr><tr><td class="rowNumber" style="font-weight: bold; text-align: right;">85</td><td style="text-align: left;">BrandC</td><td style="text-align: left;">ヴェルファイア</td><td style="text-align: right;">0.0</td><td style="text-align: right;">0.0</td></tr><tr><td class="rowNumber" style="font-weight: bold; text-align: right;">86</td><td style="text-align: left;">BrandC</td><td style="text-align: left;">カムリ</td><td style="text-align: right;">0.0</td><td style="text-align: right;">0.0</td></tr><tr><td class="rowNumber" style="font-weight: bold; text-align: right;">87</td><td style="text-align: left;">BrandC</td><td style="text-align: left;">FJクルーザー</td><td style="text-align: right;">0.0</td><td style="text-align: right;">0.0</td></tr><tr><td class="rowNumber" style="font-weight: bold; text-align: right;">88</td><td style="text-align: left;">BrandC</td><td style="text-align: left;">エスティマ</td><td style="text-align: right;">0.0</td><td style="text-align: right;">0.0</td></tr><tr><td class="rowNumber" style="font-weight: bold; text-align: right;">89</td><td style="text-align: left;">BrandC</td><td style="text-align: left;">SAI</td><td style="text-align: right;">0.0</td><td style="text-align: right;">0.0</td></tr><tr><td class="rowNumber" style="font-weight: bold; text-align: right;">90</td><td style="text-align: left;">BrandC</td><td style="text-align: left;">クラウン</td><td style="text-align: right;">0.0</td><td style="text-align: right;">0.0</td></tr><tr><td class="rowNumber" style="font-weight: bold; text-align: right;">91</td><td style="text-align: left;">BrandC</td><td style="text-align: left;">ランドクルーザー</td><td style="text-align: right;">0.0</td><td style="text-align: right;">0.0</td></tr><tr><td class="rowNumber" style="font-weight: bold; text-align: right;">92</td><td style="text-align: left;">BrandC</td><td style="text-align: left;">センチュリー</td><td style="text-align: right;">0.0</td><td style="text-align: right;">0.0</td></tr></tbody></table></div>
</div>
</div>
</section>
<section id="section-9" class="level2" data-number="4.11">
<h2 data-number="4.11" class="anchored" data-anchor-id="section-9"><span class="header-section-number">4.11</span> 7.4</h2>
<div class="cell" data-execution_count="26">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>CS_2016 <span class="op">=</span> <span class="fu">calculateCS</span>(</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>    datalist_2016, </span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>    data_2016.price, </span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>    beta_hat, </span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>    resultGMM.minimizer, </span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>    Xi_2016,</span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a>    data_2016.HH[<span class="fl">1</span>]</span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a>);</span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a>CS_NippyoA <span class="op">=</span> <span class="fu">calculateCS</span>(</span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a>    datalist_2016, </span>
<span id="cb21-12"><a href="#cb21-12" aria-hidden="true" tabindex="-1"></a>    p_NippyoA, </span>
<span id="cb21-13"><a href="#cb21-13" aria-hidden="true" tabindex="-1"></a>    beta_hat, </span>
<span id="cb21-14"><a href="#cb21-14" aria-hidden="true" tabindex="-1"></a>    resultGMM.minimizer, </span>
<span id="cb21-15"><a href="#cb21-15" aria-hidden="true" tabindex="-1"></a>    Xi_2016,</span>
<span id="cb21-16"><a href="#cb21-16" aria-hidden="true" tabindex="-1"></a>    data_2016.HH[<span class="fl">1</span>]</span>
<span id="cb21-17"><a href="#cb21-17" aria-hidden="true" tabindex="-1"></a>);</span>
<span id="cb21-18"><a href="#cb21-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-19"><a href="#cb21-19" aria-hidden="true" tabindex="-1"></a>CS_NippyoB <span class="op">=</span> <span class="fu">calculateCS</span>(</span>
<span id="cb21-20"><a href="#cb21-20" aria-hidden="true" tabindex="-1"></a>    datalist_2016, </span>
<span id="cb21-21"><a href="#cb21-21" aria-hidden="true" tabindex="-1"></a>    p_NippyoB, </span>
<span id="cb21-22"><a href="#cb21-22" aria-hidden="true" tabindex="-1"></a>    beta_hat, </span>
<span id="cb21-23"><a href="#cb21-23" aria-hidden="true" tabindex="-1"></a>    resultGMM.minimizer, </span>
<span id="cb21-24"><a href="#cb21-24" aria-hidden="true" tabindex="-1"></a>    Xi_2016,</span>
<span id="cb21-25"><a href="#cb21-25" aria-hidden="true" tabindex="-1"></a>    data_2016.HH[<span class="fl">1</span>]</span>
<span id="cb21-26"><a href="#cb21-26" aria-hidden="true" tabindex="-1"></a>);</span>
<span id="cb21-27"><a href="#cb21-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-28"><a href="#cb21-28" aria-hidden="true" tabindex="-1"></a>CV_NippyoA <span class="op">=</span> CS_NippyoA <span class="op">-</span> CS_2016;</span>
<span id="cb21-29"><a href="#cb21-29" aria-hidden="true" tabindex="-1"></a>CV_NippyoB <span class="op">=</span> CS_NippyoB <span class="op">-</span> CS_2016;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="27">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>pro_rev_2016 <span class="op">=</span> <span class="fu">calculateProfit</span>(</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>    data_2016.Maker,</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>    data_2016.price,</span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>    mc,</span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>    data_2016.share,</span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>    data_2016.HH</span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>);</span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a>pro_rev_NippyoA <span class="op">=</span> <span class="fu">calculateProfit</span>(</span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a>    data_2016.Maker,</span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a>    p_NippyoA,</span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true" tabindex="-1"></a>    mc,</span>
<span id="cb22-12"><a href="#cb22-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">simulateMarketShare</span>(</span>
<span id="cb22-13"><a href="#cb22-13" aria-hidden="true" tabindex="-1"></a>                datalist_2016,</span>
<span id="cb22-14"><a href="#cb22-14" aria-hidden="true" tabindex="-1"></a>                p_NippyoA,</span>
<span id="cb22-15"><a href="#cb22-15" aria-hidden="true" tabindex="-1"></a>                beta_hat,</span>
<span id="cb22-16"><a href="#cb22-16" aria-hidden="true" tabindex="-1"></a>                resultGMM.minimizer,</span>
<span id="cb22-17"><a href="#cb22-17" aria-hidden="true" tabindex="-1"></a>                Xi_2016,</span>
<span id="cb22-18"><a href="#cb22-18" aria-hidden="true" tabindex="-1"></a>            ),</span>
<span id="cb22-19"><a href="#cb22-19" aria-hidden="true" tabindex="-1"></a>    data_2016.HH</span>
<span id="cb22-20"><a href="#cb22-20" aria-hidden="true" tabindex="-1"></a>);</span>
<span id="cb22-21"><a href="#cb22-21" aria-hidden="true" tabindex="-1"></a>pro_rev_NippyoB <span class="op">=</span> <span class="fu">calculateProfit</span>(</span>
<span id="cb22-22"><a href="#cb22-22" aria-hidden="true" tabindex="-1"></a>    data_2016.Maker,</span>
<span id="cb22-23"><a href="#cb22-23" aria-hidden="true" tabindex="-1"></a>    p_NippyoB,</span>
<span id="cb22-24"><a href="#cb22-24" aria-hidden="true" tabindex="-1"></a>    mc,</span>
<span id="cb22-25"><a href="#cb22-25" aria-hidden="true" tabindex="-1"></a>    <span class="fu">simulateMarketShare</span>(</span>
<span id="cb22-26"><a href="#cb22-26" aria-hidden="true" tabindex="-1"></a>                datalist_2016,</span>
<span id="cb22-27"><a href="#cb22-27" aria-hidden="true" tabindex="-1"></a>                p_NippyoB,</span>
<span id="cb22-28"><a href="#cb22-28" aria-hidden="true" tabindex="-1"></a>                beta_hat,</span>
<span id="cb22-29"><a href="#cb22-29" aria-hidden="true" tabindex="-1"></a>                resultGMM.minimizer,</span>
<span id="cb22-30"><a href="#cb22-30" aria-hidden="true" tabindex="-1"></a>                Xi_2016,</span>
<span id="cb22-31"><a href="#cb22-31" aria-hidden="true" tabindex="-1"></a>            ),</span>
<span id="cb22-32"><a href="#cb22-32" aria-hidden="true" tabindex="-1"></a>    data_2016.HH</span>
<span id="cb22-33"><a href="#cb22-33" aria-hidden="true" tabindex="-1"></a>);</span>
<span id="cb22-34"><a href="#cb22-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-35"><a href="#cb22-35" aria-hidden="true" tabindex="-1"></a>TS_change_NippyoA <span class="op">=</span> CV_NippyoA <span class="op">+</span> <span class="fu">sum</span>(pro_rev_NippyoA.profit <span class="op">-</span> pro_rev_2016.profit);</span>
<span id="cb22-36"><a href="#cb22-36" aria-hidden="true" tabindex="-1"></a>TS_change_NippyoB <span class="op">=</span> CV_NippyoB <span class="op">+</span> <span class="fu">sum</span>(pro_rev_NippyoB.profit <span class="op">-</span> pro_rev_2016.profit);</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="28">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">DataFrame</span>(</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>    Measure <span class="op">=</span> [<span class="st">"Consumer surplus"</span>, <span class="st">"Total welfare"</span>],</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>    Nippyo_and_Brand_A <span class="op">=</span> [CV_NippyoA, TS_change_NippyoA],</span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>    Nippyo_and_Brand_B <span class="op">=</span> [CV_NippyoB, TS_change_NippyoB],</span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="23">

<div><div style="float: left;"><span>2×3 DataFrame</span></div><div style="clear: both;"></div></div><div class="data-frame" style="overflow-x: scroll;"><table class="data-frame table table-sm table-striped" style="margin-bottom: 6px;"><thead><tr class="header"><th class="rowNumber" style="font-weight: bold; text-align: right;">Row</th><th style="text-align: left;">Measure</th><th style="text-align: left;">Nippyo_and_Brand_A</th><th style="text-align: left;">Nippyo_and_Brand_B</th></tr><tr class="subheader headerLastRow"><th class="rowNumber" style="font-weight: bold; text-align: right;"></th><th title="String" style="text-align: left;">String</th><th title="Float64" style="text-align: left;">Float64</th><th title="Float64" style="text-align: left;">Float64</th></tr></thead><tbody><tr><td class="rowNumber" style="font-weight: bold; text-align: right;">1</td><td style="text-align: left;">Consumer surplus</td><td style="text-align: right;">-11740.6</td><td style="text-align: right;">-4610.7</td></tr><tr><td class="rowNumber" style="font-weight: bold; text-align: right;">2</td><td style="text-align: left;">Total welfare</td><td style="text-align: right;">-10457.5</td><td style="text-align: right;">-4060.65</td></tr></tbody></table></div>
</div>
</div>
<div class="cell" data-execution_count="29">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>result_df <span class="op">=</span> <span class="fu">DataFrame</span>(</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>    Maker <span class="op">=</span> pro_rev_2016.Maker,</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>    Profits_NippyoA <span class="op">=</span> pro_rev_NippyoA.profit <span class="op">-</span> pro_rev_2016.profit,</span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>    Revenue_NippyoA <span class="op">=</span> pro_rev_NippyoA.revenue <span class="op">-</span> pro_rev_2016.revenue,</span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>    Profits_NippyoB <span class="op">=</span> pro_rev_NippyoB.profit <span class="op">-</span> pro_rev_2016.profit,</span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>    Revenue_NippyoB <span class="op">=</span> pro_rev_NippyoB.revenue <span class="op">-</span> pro_rev_2016.revenue,</span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a>);</span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a>total_df <span class="op">=</span> <span class="fu">combine</span>(result_df, <span class="fl">2</span><span class="op">:</span><span class="fl">5</span> <span class="op">.=&gt;</span> sum <span class="op">.=&gt;</span> <span class="fu">names</span>(result_df)[<span class="fl">2</span><span class="op">:</span><span class="fl">5</span>]);</span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a>total_df[!, <span class="op">:</span>Maker] <span class="op">.=</span> <span class="st">"Total"</span></span>
<span id="cb24-11"><a href="#cb24-11" aria-hidden="true" tabindex="-1"></a><span class="fu">append!</span>(result_df, total_df)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="24">

<div><div style="float: left;"><span>16×5 DataFrame</span></div><div style="clear: both;"></div></div><div class="data-frame" style="overflow-x: scroll;"><table class="data-frame table table-sm table-striped" style="margin-bottom: 6px;"><thead><tr class="header"><th class="rowNumber" style="font-weight: bold; text-align: right;">Row</th><th style="text-align: left;">Maker</th><th style="text-align: left;">Profits_NippyoA</th><th style="text-align: left;">Revenue_NippyoA</th><th style="text-align: left;">Profits_NippyoB</th><th style="text-align: left;">Revenue_NippyoB</th></tr><tr class="subheader headerLastRow"><th class="rowNumber" style="font-weight: bold; text-align: right;"></th><th title="String15" style="text-align: left;">String15</th><th title="Float64" style="text-align: left;">Float64</th><th title="Float64" style="text-align: left;">Float64</th><th title="Float64" style="text-align: left;">Float64</th><th title="Float64" style="text-align: left;">Float64</th></tr></thead><tbody><tr><td class="rowNumber" style="font-weight: bold; text-align: right;">1</td><td style="text-align: left;">Audi</td><td style="text-align: right;">11.7142</td><td style="text-align: right;">43.2562</td><td style="text-align: right;">4.81049</td><td style="text-align: right;">18.5927</td></tr><tr><td class="rowNumber" style="font-weight: bold; text-align: right;">2</td><td style="text-align: left;">BMW</td><td style="text-align: right;">39.1788</td><td style="text-align: right;">134.845</td><td style="text-align: right;">16.3626</td><td style="text-align: right;">56.996</td></tr><tr><td class="rowNumber" style="font-weight: bold; text-align: right;">3</td><td style="text-align: left;">Daihatsu</td><td style="text-align: right;">115.249</td><td style="text-align: right;">224.046</td><td style="text-align: right;">46.3958</td><td style="text-align: right;">88.9922</td></tr><tr><td class="rowNumber" style="font-weight: bold; text-align: right;">4</td><td style="text-align: left;">Fiat</td><td style="text-align: right;">1.6232</td><td style="text-align: right;">4.50465</td><td style="text-align: right;">0.671269</td><td style="text-align: right;">1.83474</td></tr><tr><td class="rowNumber" style="font-weight: bold; text-align: right;">5</td><td style="text-align: left;">Lexas</td><td style="text-align: right;">65.7821</td><td style="text-align: right;">239.716</td><td style="text-align: right;">24.648</td><td style="text-align: right;">108.337</td></tr><tr><td class="rowNumber" style="font-weight: bold; text-align: right;">6</td><td style="text-align: left;">Matsuda</td><td style="text-align: right;">63.1001</td><td style="text-align: right;">164.766</td><td style="text-align: right;">25.9723</td><td style="text-align: right;">67.0547</td></tr><tr><td class="rowNumber" style="font-weight: bold; text-align: right;">7</td><td style="text-align: left;">Mercedes</td><td style="text-align: right;">57.4931</td><td style="text-align: right;">211.166</td><td style="text-align: right;">21.5481</td><td style="text-align: right;">95.6344</td></tr><tr><td class="rowNumber" style="font-weight: bold; text-align: right;">8</td><td style="text-align: left;">Mitsubishi</td><td style="text-align: right;">21.7094</td><td style="text-align: right;">54.6052</td><td style="text-align: right;">8.90259</td><td style="text-align: right;">22.1991</td></tr><tr><td class="rowNumber" style="font-weight: bold; text-align: right;">9</td><td style="text-align: left;">Suzuki</td><td style="text-align: right;">120.615</td><td style="text-align: right;">231.995</td><td style="text-align: right;">48.5311</td><td style="text-align: right;">92.1836</td></tr><tr><td class="rowNumber" style="font-weight: bold; text-align: right;">10</td><td style="text-align: left;">Volkswagen</td><td style="text-align: right;">20.6055</td><td style="text-align: right;">64.2728</td><td style="text-align: right;">8.60923</td><td style="text-align: right;">26.6125</td></tr><tr><td class="rowNumber" style="font-weight: bold; text-align: right;">11</td><td style="text-align: left;">Volvo</td><td style="text-align: right;">9.62958</td><td style="text-align: right;">35.0213</td><td style="text-align: right;">4.01387</td><td style="text-align: right;">14.9299</td></tr><tr><td class="rowNumber" style="font-weight: bold; text-align: right;">12</td><td style="text-align: left;">Nippyo</td><td style="text-align: right;">83.803</td><td style="text-align: right;">-9633.81</td><td style="text-align: right;">44.2022</td><td style="text-align: right;">-3841.84</td></tr><tr><td class="rowNumber" style="font-weight: bold; text-align: right;">13</td><td style="text-align: left;">BrandA</td><td style="text-align: right;">14.4171</td><td style="text-align: right;">-10950.4</td><td style="text-align: right;">59.5345</td><td style="text-align: right;">154.201</td></tr><tr><td class="rowNumber" style="font-weight: bold; text-align: right;">14</td><td style="text-align: left;">BrandB</td><td style="text-align: right;">58.2012</td><td style="text-align: right;">166.716</td><td style="text-align: right;">-12.6581</td><td style="text-align: right;">-5066.24</td></tr><tr><td class="rowNumber" style="font-weight: bold; text-align: right;">15</td><td style="text-align: left;">BrandC</td><td style="text-align: right;">599.97</td><td style="text-align: right;">1536.03</td><td style="text-align: right;">248.507</td><td style="text-align: right;">629.799</td></tr><tr><td class="rowNumber" style="font-weight: bold; text-align: right;">16</td><td style="text-align: left;">Total</td><td style="text-align: right;">1283.09</td><td style="text-align: right;">-17473.3</td><td style="text-align: right;">550.051</td><td style="text-align: right;">-7530.71</td></tr></tbody></table></div>
</div>
</div>
</section>
<section id="section-10" class="level2" data-number="4.12">
<h2 data-number="4.12" class="anchored" data-anchor-id="section-10"><span class="header-section-number">4.12</span> 8</h2>
</section>
<section id="section-11" class="level2" data-number="4.13">
<h2 data-number="4.13" class="anchored" data-anchor-id="section-11"><span class="header-section-number">4.13</span> 8.2</h2>
<div class="cell" data-execution_count="30">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>costReducingFirms <span class="op">=</span> [<span class="st">"Nippyo"</span>, <span class="st">"Brand_A"</span>];</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>distance <span class="op">=</span> <span class="fl">100</span></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>lambda <span class="op">=</span> <span class="fl">1e-6</span>;</span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>max_cost_red <span class="op">=</span> <span class="fl">1.0</span>;</span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>min_cost_red <span class="op">=</span> <span class="fl">0.0</span>;</span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a>iter <span class="op">=</span> <span class="fl">1</span>;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="33">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="pp">@time</span> <span class="cf">while</span> (distance <span class="op">&gt;</span> lambda) <span class="op">&amp;</span> (iter <span class="op">&lt;</span> <span class="fl">100</span>)</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>    mid_cost_red <span class="op">=</span> (max_cost_red <span class="op">+</span> min_cost_red) <span class="op">/</span> <span class="fl">2.0</span>;</span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>    mid_eval <span class="op">=</span> <span class="fu">calculateTSChangeByCostReduction</span>(</span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a>        mid_cost_red,</span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a>        costReducingFirms,</span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a>        Ownership_NippyoA,</span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a>        data_2016,</span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true" tabindex="-1"></a>        mc,</span>
<span id="cb26-11"><a href="#cb26-11" aria-hidden="true" tabindex="-1"></a>        datalist_2016,</span>
<span id="cb26-12"><a href="#cb26-12" aria-hidden="true" tabindex="-1"></a>        beta_hat,</span>
<span id="cb26-13"><a href="#cb26-13" aria-hidden="true" tabindex="-1"></a>        resultGMM.minimizer,</span>
<span id="cb26-14"><a href="#cb26-14" aria-hidden="true" tabindex="-1"></a>        data_2016.HH,</span>
<span id="cb26-15"><a href="#cb26-15" aria-hidden="true" tabindex="-1"></a>        p_NippyoA,</span>
<span id="cb26-16"><a href="#cb26-16" aria-hidden="true" tabindex="-1"></a>        pro_rev_2016,</span>
<span id="cb26-17"><a href="#cb26-17" aria-hidden="true" tabindex="-1"></a>        CS_2016,</span>
<span id="cb26-18"><a href="#cb26-18" aria-hidden="true" tabindex="-1"></a>        Xi_2016</span>
<span id="cb26-19"><a href="#cb26-19" aria-hidden="true" tabindex="-1"></a>    );</span>
<span id="cb26-20"><a href="#cb26-20" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb26-21"><a href="#cb26-21" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> mid_eval <span class="op">&gt;</span> <span class="fl">0</span></span>
<span id="cb26-22"><a href="#cb26-22" aria-hidden="true" tabindex="-1"></a>        min_cost_red <span class="op">=</span> mid_cost_red;</span>
<span id="cb26-23"><a href="#cb26-23" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span></span>
<span id="cb26-24"><a href="#cb26-24" aria-hidden="true" tabindex="-1"></a>        max_cost_red <span class="op">=</span> mid_cost_red;</span>
<span id="cb26-25"><a href="#cb26-25" aria-hidden="true" tabindex="-1"></a>    <span class="cf">end</span></span>
<span id="cb26-26"><a href="#cb26-26" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb26-27"><a href="#cb26-27" aria-hidden="true" tabindex="-1"></a>    distance <span class="op">=</span> <span class="fu">abs</span>(mid_eval <span class="op">-</span> <span class="fl">0</span>);</span>
<span id="cb26-28"><a href="#cb26-28" aria-hidden="true" tabindex="-1"></a>    iter <span class="op">+=</span> <span class="fl">1</span></span>
<span id="cb26-29"><a href="#cb26-29" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb26-30"><a href="#cb26-30" aria-hidden="true" tabindex="-1"></a><span class="cf">end</span></span>
<span id="cb26-31"><a href="#cb26-31" aria-hidden="true" tabindex="-1"></a>cost_red_NippyoA <span class="op">=</span> (min_cost_red <span class="op">+</span> min_cost_red) <span class="op">/</span> <span class="fl">2.0</span>;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="36">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>mc_NippyoA_TSfix <span class="op">=</span> mc[<span class="op">:</span>];</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>mc_NippyoA_TSfix[<span class="fu">in</span>(costReducingFirms).(data_2016.Maker)] <span class="op">.*=</span> cost_red_NippyoA;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="37">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>p_NippyoA_TSfix <span class="op">=</span> <span class="fu">calculateEquilibriumPrice</span>(</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>    datalist_2016, </span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>    p_NippyoA, </span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>    Ownership_NippyoA, </span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>    beta_hat, </span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a>    resultGMM.minimizer, </span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a>    mc_NippyoA_TSfix, </span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a>    Xi_2016</span>
<span id="cb28-9"><a href="#cb28-9" aria-hidden="true" tabindex="-1"></a>    );</span>
<span id="cb28-10"><a href="#cb28-10" aria-hidden="true" tabindex="-1"></a>share_NippyoA_TSfix <span class="op">=</span> <span class="fu">simulateMarketShare</span>(</span>
<span id="cb28-11"><a href="#cb28-11" aria-hidden="true" tabindex="-1"></a>    datalist_2016, </span>
<span id="cb28-12"><a href="#cb28-12" aria-hidden="true" tabindex="-1"></a>    p_NippyoA_TSfix, </span>
<span id="cb28-13"><a href="#cb28-13" aria-hidden="true" tabindex="-1"></a>    beta_hat, </span>
<span id="cb28-14"><a href="#cb28-14" aria-hidden="true" tabindex="-1"></a>    resultGMM.minimizer, </span>
<span id="cb28-15"><a href="#cb28-15" aria-hidden="true" tabindex="-1"></a>    Xi_2016</span>
<span id="cb28-16"><a href="#cb28-16" aria-hidden="true" tabindex="-1"></a>    );</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="section-12" class="level2" data-number="4.14">
<h2 data-number="4.14" class="anchored" data-anchor-id="section-12"><span class="header-section-number">4.14</span> 8.3</h2>
<div class="cell" data-execution_count="38">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>costReducingFirms <span class="op">=</span> [<span class="st">"Nippyo"</span>, <span class="st">"Brand_B"</span>];</span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>distance <span class="op">=</span> <span class="fl">100</span></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>lambda <span class="op">=</span> <span class="fl">1e-6</span>;</span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>max_cost_red <span class="op">=</span> <span class="fl">1.0</span>;</span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a>min_cost_red <span class="op">=</span> <span class="fl">0.0</span>;</span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a>iter <span class="op">=</span> <span class="fl">1</span>;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="39">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="pp">@time</span> <span class="cf">while</span> (distance <span class="op">&gt;</span> lambda) <span class="op">&amp;</span> (iter <span class="op">&lt;</span> <span class="fl">100</span>)</span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>    mid_cost_red <span class="op">=</span> (max_cost_red <span class="op">+</span> min_cost_red) <span class="op">/</span> <span class="fl">2.0</span>;</span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a>    mid_eval <span class="op">=</span> <span class="fu">calculateTSChangeByCostReduction</span>(</span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a>        mid_cost_red,</span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a>        costReducingFirms,</span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a>        Ownership_NippyoB,</span>
<span id="cb30-9"><a href="#cb30-9" aria-hidden="true" tabindex="-1"></a>        data_2016,</span>
<span id="cb30-10"><a href="#cb30-10" aria-hidden="true" tabindex="-1"></a>        mc,</span>
<span id="cb30-11"><a href="#cb30-11" aria-hidden="true" tabindex="-1"></a>        datalist_2016,</span>
<span id="cb30-12"><a href="#cb30-12" aria-hidden="true" tabindex="-1"></a>        beta_hat,</span>
<span id="cb30-13"><a href="#cb30-13" aria-hidden="true" tabindex="-1"></a>        resultGMM.minimizer,</span>
<span id="cb30-14"><a href="#cb30-14" aria-hidden="true" tabindex="-1"></a>        data_2016.HH,</span>
<span id="cb30-15"><a href="#cb30-15" aria-hidden="true" tabindex="-1"></a>        p_NippyoB,</span>
<span id="cb30-16"><a href="#cb30-16" aria-hidden="true" tabindex="-1"></a>        pro_rev_2016,</span>
<span id="cb30-17"><a href="#cb30-17" aria-hidden="true" tabindex="-1"></a>        CS_2016,</span>
<span id="cb30-18"><a href="#cb30-18" aria-hidden="true" tabindex="-1"></a>        Xi_2016</span>
<span id="cb30-19"><a href="#cb30-19" aria-hidden="true" tabindex="-1"></a>    );</span>
<span id="cb30-20"><a href="#cb30-20" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb30-21"><a href="#cb30-21" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> mid_eval <span class="op">&gt;</span> <span class="fl">0</span></span>
<span id="cb30-22"><a href="#cb30-22" aria-hidden="true" tabindex="-1"></a>        min_cost_red <span class="op">=</span> mid_cost_red;</span>
<span id="cb30-23"><a href="#cb30-23" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span></span>
<span id="cb30-24"><a href="#cb30-24" aria-hidden="true" tabindex="-1"></a>        max_cost_red <span class="op">=</span> mid_cost_red;</span>
<span id="cb30-25"><a href="#cb30-25" aria-hidden="true" tabindex="-1"></a>    <span class="cf">end</span></span>
<span id="cb30-26"><a href="#cb30-26" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb30-27"><a href="#cb30-27" aria-hidden="true" tabindex="-1"></a>    distance <span class="op">=</span> <span class="fu">abs</span>(mid_eval <span class="op">-</span> <span class="fl">0</span>);</span>
<span id="cb30-28"><a href="#cb30-28" aria-hidden="true" tabindex="-1"></a>    iter <span class="op">+=</span> <span class="fl">1</span></span>
<span id="cb30-29"><a href="#cb30-29" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb30-30"><a href="#cb30-30" aria-hidden="true" tabindex="-1"></a><span class="cf">end</span></span>
<span id="cb30-31"><a href="#cb30-31" aria-hidden="true" tabindex="-1"></a>cost_red_NippyoB <span class="op">=</span> (min_cost_red <span class="op">+</span> min_cost_red) <span class="op">/</span> <span class="fl">2.0</span>;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="42">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>mc_NippyoB_TSfix <span class="op">=</span> mc[<span class="op">:</span>];</span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>mc_NippyoB_TSfix[<span class="fu">in</span>(costReducingFirms).(data_2016.Maker)] <span class="op">.*=</span> cost_red_NippyoB;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="43">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>p_NippyoB_TSfix <span class="op">=</span> <span class="fu">calculateEquilibriumPrice</span>(</span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>    datalist_2016, </span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>    p_NippyoB, </span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>    Ownership_NippyoB,</span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a>    beta_hat, </span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a>    resultGMM.minimizer, </span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a>    mc_NippyoB_TSfix, </span>
<span id="cb32-8"><a href="#cb32-8" aria-hidden="true" tabindex="-1"></a>    Xi_2016</span>
<span id="cb32-9"><a href="#cb32-9" aria-hidden="true" tabindex="-1"></a>    );</span>
<span id="cb32-10"><a href="#cb32-10" aria-hidden="true" tabindex="-1"></a>share_NippyoB_TSfix <span class="op">=</span> <span class="fu">simulateMarketShare</span>(</span>
<span id="cb32-11"><a href="#cb32-11" aria-hidden="true" tabindex="-1"></a>    datalist_2016, </span>
<span id="cb32-12"><a href="#cb32-12" aria-hidden="true" tabindex="-1"></a>    p_NippyoB_TSfix, </span>
<span id="cb32-13"><a href="#cb32-13" aria-hidden="true" tabindex="-1"></a>    beta_hat, </span>
<span id="cb32-14"><a href="#cb32-14" aria-hidden="true" tabindex="-1"></a>    resultGMM.minimizer, </span>
<span id="cb32-15"><a href="#cb32-15" aria-hidden="true" tabindex="-1"></a>    Xi_2016</span>
<span id="cb32-16"><a href="#cb32-16" aria-hidden="true" tabindex="-1"></a>    );</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="44">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>[<span class="fl">1</span><span class="op">-</span>cost_red_NippyoA <span class="fl">1</span><span class="op">-</span>cost_red_NippyoB] <span class="op">.*</span> <span class="fl">100</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="33">
<pre><code>1×2 Matrix{Float64}:
 1.46299  0.566009</code></pre>
</div>
</div>
</section>
<section id="section-13" class="level2" data-number="4.15">
<h2 data-number="4.15" class="anchored" data-anchor-id="section-13"><span class="header-section-number">4.15</span> 8.5</h2>
<div class="cell" data-execution_count="45">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>pro_rev_NippyoA_rc <span class="op">=</span> <span class="fu">calculateProfit</span>(</span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>    data_2016.Maker,</span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>    p_NippyoA_TSfix,</span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a>    mc_NippyoA_TSfix,</span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a>    share_NippyoA_TSfix,</span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a>    data_2016.HH</span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true" tabindex="-1"></a>);</span>
<span id="cb35-8"><a href="#cb35-8" aria-hidden="true" tabindex="-1"></a>pro_rev_NippyoB_rc <span class="op">=</span> <span class="fu">calculateProfit</span>(</span>
<span id="cb35-9"><a href="#cb35-9" aria-hidden="true" tabindex="-1"></a>    data_2016.Maker,</span>
<span id="cb35-10"><a href="#cb35-10" aria-hidden="true" tabindex="-1"></a>    p_NippyoB_TSfix,</span>
<span id="cb35-11"><a href="#cb35-11" aria-hidden="true" tabindex="-1"></a>    mc_NippyoB_TSfix,</span>
<span id="cb35-12"><a href="#cb35-12" aria-hidden="true" tabindex="-1"></a>    share_NippyoB_TSfix,</span>
<span id="cb35-13"><a href="#cb35-13" aria-hidden="true" tabindex="-1"></a>    data_2016.HH</span>
<span id="cb35-14"><a href="#cb35-14" aria-hidden="true" tabindex="-1"></a>);</span>
<span id="cb35-15"><a href="#cb35-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-16"><a href="#cb35-16" aria-hidden="true" tabindex="-1"></a>result2_df <span class="op">=</span> <span class="fu">DataFrame</span>(</span>
<span id="cb35-17"><a href="#cb35-17" aria-hidden="true" tabindex="-1"></a>    Maker <span class="op">=</span> pro_rev_2016.Maker,</span>
<span id="cb35-18"><a href="#cb35-18" aria-hidden="true" tabindex="-1"></a>    Profits_NippyoA <span class="op">=</span> pro_rev_NippyoA_rc.profit <span class="op">-</span> pro_rev_2016.profit,</span>
<span id="cb35-19"><a href="#cb35-19" aria-hidden="true" tabindex="-1"></a>    Revenue_NippyoA <span class="op">=</span> pro_rev_NippyoA_rc.revenue <span class="op">-</span> pro_rev_2016.revenue,</span>
<span id="cb35-20"><a href="#cb35-20" aria-hidden="true" tabindex="-1"></a>    Profits_NippyoB <span class="op">=</span> pro_rev_NippyoB_rc.profit <span class="op">-</span> pro_rev_2016.profit,</span>
<span id="cb35-21"><a href="#cb35-21" aria-hidden="true" tabindex="-1"></a>    Revenue_NippyoB <span class="op">=</span> pro_rev_NippyoB_rc.revenue <span class="op">-</span> pro_rev_2016.revenue,</span>
<span id="cb35-22"><a href="#cb35-22" aria-hidden="true" tabindex="-1"></a>);</span>
<span id="cb35-23"><a href="#cb35-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-24"><a href="#cb35-24" aria-hidden="true" tabindex="-1"></a>total2_df <span class="op">=</span> <span class="fu">combine</span>(result2_df, <span class="fl">2</span><span class="op">:</span><span class="fl">5</span> <span class="op">.=&gt;</span> sum <span class="op">.=&gt;</span> <span class="fu">names</span>(result2_df)[<span class="fl">2</span><span class="op">:</span><span class="fl">5</span>]);</span>
<span id="cb35-25"><a href="#cb35-25" aria-hidden="true" tabindex="-1"></a>total2_df[!, <span class="op">:</span>Maker] <span class="op">.=</span> <span class="st">"Total"</span>;</span>
<span id="cb35-26"><a href="#cb35-26" aria-hidden="true" tabindex="-1"></a><span class="fu">append!</span>(result2_df, total2_df)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="34">

<div><div style="float: left;"><span>16×5 DataFrame</span></div><div style="clear: both;"></div></div><div class="data-frame" style="overflow-x: scroll;"><table class="data-frame table table-sm table-striped" style="margin-bottom: 6px;"><thead><tr class="header"><th class="rowNumber" style="font-weight: bold; text-align: right;">Row</th><th style="text-align: left;">Maker</th><th style="text-align: left;">Profits_NippyoA</th><th style="text-align: left;">Revenue_NippyoA</th><th style="text-align: left;">Profits_NippyoB</th><th style="text-align: left;">Revenue_NippyoB</th></tr><tr class="subheader headerLastRow"><th class="rowNumber" style="font-weight: bold; text-align: right;"></th><th title="String15" style="text-align: left;">String15</th><th title="Float64" style="text-align: left;">Float64</th><th title="Float64" style="text-align: left;">Float64</th><th title="Float64" style="text-align: left;">Float64</th><th title="Float64" style="text-align: left;">Float64</th></tr></thead><tbody><tr><td class="rowNumber" style="font-weight: bold; text-align: right;">1</td><td style="text-align: left;">Audi</td><td style="text-align: right;">0.793276</td><td style="text-align: right;">0.20165</td><td style="text-align: right;">0.582507</td><td style="text-align: right;">1.91038</td></tr><tr><td class="rowNumber" style="font-weight: bold; text-align: right;">2</td><td style="text-align: left;">BMW</td><td style="text-align: right;">1.30459</td><td style="text-align: right;">-0.281839</td><td style="text-align: right;">1.69204</td><td style="text-align: right;">4.62626</td></tr><tr><td class="rowNumber" style="font-weight: bold; text-align: right;">3</td><td style="text-align: left;">Daihatsu</td><td style="text-align: right;">-2.32452</td><td style="text-align: right;">-5.48568</td><td style="text-align: right;">0.798079</td><td style="text-align: right;">-0.0427404</td></tr><tr><td class="rowNumber" style="font-weight: bold; text-align: right;">4</td><td style="text-align: left;">Fiat</td><td style="text-align: right;">-0.0129623</td><td style="text-align: right;">-0.0823041</td><td style="text-align: right;">0.0369968</td><td style="text-align: right;">0.0560608</td></tr><tr><td class="rowNumber" style="font-weight: bold; text-align: right;">5</td><td style="text-align: left;">Lexas</td><td style="text-align: right;">10.4042</td><td style="text-align: right;">-3.42177</td><td style="text-align: right;">3.23775</td><td style="text-align: right;">14.1649</td></tr><tr><td class="rowNumber" style="font-weight: bold; text-align: right;">6</td><td style="text-align: left;">Matsuda</td><td style="text-align: right;">-0.530161</td><td style="text-align: right;">-2.9517</td><td style="text-align: right;">1.30433</td><td style="text-align: right;">2.01809</td></tr><tr><td class="rowNumber" style="font-weight: bold; text-align: right;">7</td><td style="text-align: left;">Mercedes</td><td style="text-align: right;">8.89097</td><td style="text-align: right;">-3.77876</td><td style="text-align: right;">2.75465</td><td style="text-align: right;">12.34</td></tr><tr><td class="rowNumber" style="font-weight: bold; text-align: right;">8</td><td style="text-align: left;">Mitsubishi</td><td style="text-align: right;">-0.20892</td><td style="text-align: right;">-0.982351</td><td style="text-align: right;">0.404885</td><td style="text-align: right;">0.643438</td></tr><tr><td class="rowNumber" style="font-weight: bold; text-align: right;">9</td><td style="text-align: left;">Suzuki</td><td style="text-align: right;">-2.43626</td><td style="text-align: right;">-5.65462</td><td style="text-align: right;">0.808364</td><td style="text-align: right;">0.000195457</td></tr><tr><td class="rowNumber" style="font-weight: bold; text-align: right;">10</td><td style="text-align: left;">Volkswagen</td><td style="text-align: right;">0.103826</td><td style="text-align: right;">-0.763781</td><td style="text-align: right;">0.663997</td><td style="text-align: right;">1.39926</td></tr><tr><td class="rowNumber" style="font-weight: bold; text-align: right;">11</td><td style="text-align: left;">Volvo</td><td style="text-align: right;">0.462464</td><td style="text-align: right;">0.098106</td><td style="text-align: right;">0.463918</td><td style="text-align: right;">1.39705</td></tr><tr><td class="rowNumber" style="font-weight: bold; text-align: right;">12</td><td style="text-align: left;">Nippyo</td><td style="text-align: right;">10318.3</td><td style="text-align: right;">11771.1</td><td style="text-align: right;">3965.29</td><td style="text-align: right;">4405.34</td></tr><tr><td class="rowNumber" style="font-weight: bold; text-align: right;">13</td><td style="text-align: left;">BrandA</td><td style="text-align: right;">-134.893</td><td style="text-align: right;">-11555.4</td><td style="text-align: right;">3.09454</td><td style="text-align: right;">5.48678</td></tr><tr><td class="rowNumber" style="font-weight: bold; text-align: right;">14</td><td style="text-align: left;">BrandB</td><td style="text-align: right;">-0.0324771</td><td style="text-align: right;">-2.34426</td><td style="text-align: right;">-35.6801</td><td style="text-align: right;">-5169.25</td></tr><tr><td class="rowNumber" style="font-weight: bold; text-align: right;">15</td><td style="text-align: left;">BrandC</td><td style="text-align: right;">1.32756</td><td style="text-align: right;">-25.8992</td><td style="text-align: right;">16.4801</td><td style="text-align: right;">24.1576</td></tr><tr><td class="rowNumber" style="font-weight: bold; text-align: right;">16</td><td style="text-align: left;">Total</td><td style="text-align: right;">10201.1</td><td style="text-align: right;">164.383</td><td style="text-align: right;">3961.93</td><td style="text-align: right;">-695.752</td></tr></tbody></table></div>
</div>
</div>
</section>
<section id="section-14" class="level2" data-number="4.16">
<h2 data-number="4.16" class="anchored" data-anchor-id="section-14"><span class="header-section-number">4.16</span> 8.6</h2>
<div class="cell" data-execution_count="46">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="pp">@printf</span>(</span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Percent change in profit by Brand A merger: %.3f </span><span class="sc">\n</span><span class="st">"</span>, </span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>    (<span class="fu">sum</span>(pro_rev_NippyoA_rc.profit) <span class="op">-</span> <span class="fu">sum</span>(pro_rev_2016.profit)) <span class="op">/</span> <span class="fu">sum</span>(pro_rev_2016.profit) <span class="op">*</span> <span class="fl">100.0</span></span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a><span class="pp">@printf</span>(</span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Percent change in revenue by brand A merger: %.3f </span><span class="sc">\n</span><span class="st">"</span>, </span>
<span id="cb36-7"><a href="#cb36-7" aria-hidden="true" tabindex="-1"></a>    (<span class="fu">sum</span>(pro_rev_NippyoA_rc.revenue) <span class="op">-</span> <span class="fu">sum</span>(pro_rev_2016.revenue)) <span class="op">/</span> <span class="fu">sum</span>(pro_rev_2016.revenue) <span class="op">*</span> <span class="fl">100.0</span></span>
<span id="cb36-8"><a href="#cb36-8" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb36-9"><a href="#cb36-9" aria-hidden="true" tabindex="-1"></a><span class="pp">@printf</span>(</span>
<span id="cb36-10"><a href="#cb36-10" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Percent change in profit by Brand B merger: %.3f </span><span class="sc">\n</span><span class="st">"</span>, </span>
<span id="cb36-11"><a href="#cb36-11" aria-hidden="true" tabindex="-1"></a>    (<span class="fu">sum</span>(pro_rev_NippyoB_rc.profit) <span class="op">-</span> <span class="fu">sum</span>(pro_rev_2016.profit)) <span class="op">/</span> <span class="fu">sum</span>(pro_rev_2016.profit) <span class="op">*</span> <span class="fl">100.0</span></span>
<span id="cb36-12"><a href="#cb36-12" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb36-13"><a href="#cb36-13" aria-hidden="true" tabindex="-1"></a><span class="pp">@printf</span>(</span>
<span id="cb36-14"><a href="#cb36-14" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Percent change in revenue by Brand B merger: %.3f </span><span class="sc">\n</span><span class="st">"</span>, </span>
<span id="cb36-15"><a href="#cb36-15" aria-hidden="true" tabindex="-1"></a>    (<span class="fu">sum</span>(pro_rev_NippyoB_rc.revenue) <span class="op">-</span> <span class="fu">sum</span>(pro_rev_2016.revenue)) <span class="op">/</span> <span class="fu">sum</span>(pro_rev_2016.revenue) <span class="op">*</span> <span class="fl">100.0</span></span>
<span id="cb36-16"><a href="#cb36-16" aria-hidden="true" tabindex="-1"></a>    )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Percent change in profit by Brand A merger: 0.384 
Percent change in revenue by brand A merger: 0.002 
Percent change in profit by Brand B merger: 0.149 
Percent change in revenue by Brand B merger: -0.009 </code></pre>
</div>
</div>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./demand_estimation_2.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">基礎編 2</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./entry_exit_basic.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">基礎編</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>